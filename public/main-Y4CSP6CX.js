var $O=Object.defineProperty,HO=Object.defineProperties;var qO=Object.getOwnPropertyDescriptors;var ET=Object.getOwnPropertySymbols,zO=Object.getPrototypeOf,GO=Object.prototype.hasOwnProperty,WO=Object.prototype.propertyIsEnumerable,KO=Reflect.get;var CT=(t,e,n)=>e in t?$O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})GO.call(e,n)&&CT(t,n,e[n]);if(ET)for(var n of ET(e))WO.call(e,n)&&CT(t,n,e[n]);return t},Ce=(t,e)=>HO(t,qO(e));var qr=(t,e,n)=>KO(zO(t),n,e);var I=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var TT=null;var am=1,cm=Symbol("SIGNAL");function Te(t){let e=TT;return TT=t,e}var bT={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function QO(t){if(!(dm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===am)){if(!t.producerMustRecompute(t)&&!um(t)){t.dirty=!1,t.lastCleanEpoch=am;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=am}}function DT(t){return t&&(t.nextProducerIndex=0),Te(t)}function ST(t,e){if(Te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(dm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)lm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function um(t){Dl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(QO(n),r!==n.version))return!0}return!1}function AT(t){if(Dl(t),dm(t))for(let e=0;e<t.producerNode.length;e++)lm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function lm(t,e){if(YO(t),Dl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)lm(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Dl(i),i.producerIndexOfThis[r]=e}}function dm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function YO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function JO(){throw new Error}var XO=JO;function RT(t){XO=t}function se(t){return typeof t=="function"}function Gs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sl=Gs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ye=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(s){e=s instanceof Sl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{NT(s)}catch(o){e=e??[],o instanceof Sl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Sl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)NT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mi(n,e)}remove(e){let{_finalizers:n}=this;n&&Mi(n,e),e instanceof t&&e._removeParent(this)}};Ye.EMPTY=(()=>{let t=new Ye;return t.closed=!0,t})();var hm=Ye.EMPTY;function Al(t){return t instanceof Ye||t&&"closed"in t&&se(t.remove)&&se(t.add)&&se(t.unsubscribe)}function NT(t){se(t)?t():t.unsubscribe()}var vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ws={setTimeout(t,e,...n){let{delegate:r}=Ws;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ws;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Rl(t){Ws.setTimeout(()=>{let{onUnhandledError:e}=vn;if(e)e(t);else throw t})}function rc(){}var MT=fm("C",void 0,void 0);function xT(t){return fm("E",void 0,t)}function PT(t){return fm("N",t,void 0)}function fm(t,e,n){return{kind:t,value:e,error:n}}var xi=null;function Ks(t){if(vn.useDeprecatedSynchronousErrorHandling){let e=!xi;if(e&&(xi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xi;if(xi=null,n)throw r}}else t()}function OT(t){vn.useDeprecatedSynchronousErrorHandling&&xi&&(xi.errorThrown=!0,xi.error=t)}var Pi=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Al(e)&&e.add(this)):this.destination=tk}static create(e,n,r){return new Qs(e,n,r)}next(e){this.isStopped?mm(PT(e),this):this._next(e)}error(e){this.isStopped?mm(xT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?mm(MT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZO=Function.prototype.bind;function pm(t,e){return ZO.call(t,e)}var gm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Nl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Nl(r)}else Nl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Nl(n)}}},Qs=class extends Pi{constructor(e,n,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&vn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pm(e.next,s),error:e.error&&pm(e.error,s),complete:e.complete&&pm(e.complete,s)}):i=e}this.destination=new gm(i)}};function Nl(t){vn.useDeprecatedSynchronousErrorHandling?OT(t):Rl(t)}function ek(t){throw t}function mm(t,e){let{onStoppedNotification:n}=vn;n&&Ws.setTimeout(()=>n(t,e))}var tk={closed:!0,next:rc,error:ek,complete:rc};var Ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yt(t){return t}function ym(...t){return vm(t)}function vm(t){return t.length===0?Yt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var he=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=rk(n)?n:new Qs(n,r,i);return Ks(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kT(r),new r((i,s)=>{let o=new Qs({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ys](){return this}pipe(...n){return vm(n)(this)}toPromise(n){return n=kT(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function kT(t){var e;return(e=t??vn.Promise)!==null&&e!==void 0?e:Promise}function nk(t){return t&&se(t.next)&&se(t.error)&&se(t.complete)}function rk(t){return t&&t instanceof Pi||nk(t)&&Al(t)}function _m(t){return se(t?.lift)}function ye(t){return e=>{if(_m(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new wm(t,e,n,r,i)}var wm=class extends Pi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Js(){return ye((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Xs=class extends he{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,_m(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ye;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ye.EMPTY)}return e}refCount(){return Js()(this)}};var FT=Gs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ft=(()=>{class t extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ml(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new FT}next(n){Ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?hm:(this.currentObservers=null,s.push(n),new Ye(()=>{this.currentObservers=null,Mi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return t.create=(e,n)=>new Ml(e,n),t})(),Ml=class extends Ft{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:hm}};var ot=class extends Ft{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Im={now(){return(Im.delegate||Date).now()},delegate:void 0};var xl=class extends Ye{constructor(e,n){super()}schedule(e,n=0){return this}};var ic={setInterval(t,e,...n){let{delegate:r}=ic;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ic;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Zs=class extends xl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ic.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ic.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Mi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var eo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};eo.now=Im.now;var to=class extends eo{constructor(e,n=eo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Em=new to(Zs);var Pl=class extends Zs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ol=class extends to{};var Cm=new Ol(Pl);var Jt=new he(t=>t.complete());function LT(t){return t&&se(t.schedule)}function VT(t){return t[t.length-1]}function kl(t){return se(VT(t))?t.pop():void 0}function zr(t){return LT(VT(t))?t.pop():void 0}function Tm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function jT(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function UT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oi(t){return this instanceof Oi?(this.v=t,this):new Oi(t)}function BT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(v){return new Promise(function(D,N){s.push([m,v,D,N])>1||a(m,v)})})}function a(m,v){try{c(r[m](v))}catch(D){p(s[0][3],D)}}function c(m){m.value instanceof Oi?Promise.resolve(m.value.v).then(l,h):p(s[0][2],m)}function l(m){a("next",m)}function h(m){a("throw",m)}function p(m,v){m(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function $T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof UT=="function"?UT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Fl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ll(t){return se(t?.then)}function Vl(t){return se(t[Ys])}function Ul(t){return Symbol.asyncIterator&&se(t?.[Symbol.asyncIterator])}function jl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ik(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bl=ik();function $l(t){return se(t?.[Bl])}function Hl(t){return BT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Oi(n.read());if(i)return yield Oi(void 0);yield yield Oi(r)}}finally{n.releaseLock()}})}function ql(t){return se(t?.getReader)}function Ze(t){if(t instanceof he)return t;if(t!=null){if(Vl(t))return sk(t);if(Fl(t))return ok(t);if(Ll(t))return ak(t);if(Ul(t))return HT(t);if($l(t))return ck(t);if(ql(t))return uk(t)}throw jl(t)}function sk(t){return new he(e=>{let n=t[Ys]();if(se(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ok(t){return new he(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ak(t){return new he(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rl)})}function ck(t){return new he(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function HT(t){return new he(e=>{lk(t,e).catch(n=>e.error(n))})}function uk(t){return HT(Hl(t))}function lk(t,e){var n,r,i,s;return jT(this,void 0,void 0,function*(){try{for(n=$T(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function $t(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Gr(t,e=0){return ye((n,r)=>{n.subscribe(fe(r,i=>$t(r,t,()=>r.next(i),e),()=>$t(r,t,()=>r.complete(),e),i=>$t(r,t,()=>r.error(i),e)))})}function Wr(t,e=0){return ye((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function qT(t,e){return Ze(t).pipe(Wr(e),Gr(e))}function zT(t,e){return Ze(t).pipe(Wr(e),Gr(e))}function GT(t,e){return new he(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function WT(t,e){return new he(n=>{let r;return $t(n,e,()=>{r=t[Bl](),$t(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function zl(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(n=>{$t(n,e,()=>{let r=t[Symbol.asyncIterator]();$t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function KT(t,e){return zl(Hl(t),e)}function QT(t,e){if(t!=null){if(Vl(t))return qT(t,e);if(Fl(t))return GT(t,e);if(Ll(t))return zT(t,e);if(Ul(t))return zl(t,e);if($l(t))return WT(t,e);if(ql(t))return KT(t,e)}throw jl(t)}function be(t,e){return e?QT(t,e):Ze(t)}function J(...t){let e=zr(t);return be(t,e)}function no(t,e){let n=se(t)?t:()=>t,r=i=>i.error(n());return new he(e?i=>e.schedule(r,0,i):r)}function bm(t){return!!t&&(t instanceof he||se(t.lift)&&se(t.subscribe))}var pr=Gs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(t,e){return ye((n,r)=>{let i=0;n.subscribe(fe(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:dk}=Array;function hk(t,e){return dk(e)?t(...e):t(e)}function Gl(t){return Z(e=>hk(t,e))}var{isArray:fk}=Array,{getPrototypeOf:pk,prototype:mk,keys:gk}=Object;function Wl(t){if(t.length===1){let e=t[0];if(fk(e))return{args:e,keys:null};if(yk(e)){let n=gk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function yk(t){return t&&typeof t=="object"&&pk(t)===mk}function Kl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function sc(...t){let e=zr(t),n=kl(t),{args:r,keys:i}=Wl(t);if(r.length===0)return be([],e);let s=new he(vk(r,e,i?o=>Kl(i,o):Yt));return n?s.pipe(Gl(n)):s}function vk(t,e,n=Yt){return r=>{YT(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)YT(e,()=>{let l=be(t[c],e),h=!1;l.subscribe(fe(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function YT(t,e,n){t?$t(n,t,e):e()}function JT(t,e,n,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=N=>l<r?D(N):c.push(N),D=N=>{s&&e.next(N),l++;let R=!1;Ze(n(N,h++)).subscribe(fe(e,x=>{i?.(x),s?v(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let x=c.shift();o?$t(e,o,()=>D(x)):D(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(fe(e,v,()=>{p=!0,m()})),()=>{a?.()}}function et(t,e,n=1/0){return se(e)?et((r,i)=>Z((s,o)=>e(r,s,i,o))(Ze(t(r,i))),n):(typeof e=="number"&&(n=e),ye((r,i)=>JT(r,i,t,n)))}function ro(t=1/0){return et(Yt,t)}function XT(){return ro(1)}function io(...t){return XT()(be(t,zr(t)))}function Ql(t){return new he(e=>{Ze(t()).subscribe(e)})}function Dm(...t){let e=kl(t),{args:n,keys:r}=Wl(t),i=new he(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;Ze(n[h]).subscribe(fe(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?Kl(r,a):a),s.complete())}))}});return e?i.pipe(Gl(e)):i}function Ht(t,e){return ye((n,r)=>{let i=0;n.subscribe(fe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Kr(t){return ye((e,n)=>{let r=null,i=!1,s;r=e.subscribe(fe(n,void 0,void 0,o=>{s=Ze(t(o,Kr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function ZT(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(fe(o,h=>{let p=l++;c=a?t(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function mr(t,e){return se(e)?et(t,e,1):et(t,1)}function Qr(t){return ye((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function gr(t){return t<=0?()=>Jt:ye((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Sm(t){return Z(()=>t)}function Yl(t=_k){return ye((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function _k(){return new pr}function Yr(t){return ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ln(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ht((i,s)=>t(i,s,r)):Yt,gr(1),n?Qr(e):Yl(()=>new pr))}function so(t){return t<=0?()=>Jt:ye((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Am(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ht((i,s)=>t(i,s,r)):Yt,so(1),n?Qr(e):Yl(()=>new pr))}function Rm(t,e){return ye(ZT(t,e,arguments.length>=2,!0))}function Nm(...t){let e=zr(t);return ye((n,r)=>{(e?io(t,n,e):io(t,n)).subscribe(r)})}function qt(t,e){return ye((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(fe(r,c=>{i?.unsubscribe();let l=0,h=s++;Ze(t(c,h)).subscribe(i=fe(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Mm(t){return ye((e,n)=>{Ze(t).subscribe(fe(n,()=>n.complete(),rc)),!n.closed&&e.subscribe(n)})}function tt(t,e,n){let r=se(t)||e||n?{next:t,error:e,complete:n}:t;return r?ye((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(fe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Yt}var Lb="https://g.co/ng/security#xss",W=class extends Error{constructor(e,n){super(Sd(e,n)),this.code=e}};function Sd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function yc(t){return{toString:t}.toString()}var Jl="__parameters__";function wk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Vb(t,e,n){return yc(()=>{let r=wk(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(Jl)?c[Jl]:Object.defineProperty(c,Jl,{value:[]})[Jl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ki=globalThis;function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function Ik(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Vt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Vt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function eb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Ek=xe({__forward_ref__:xe});function Xt(t){return t.__forward_ref__=Xt,t.toString=function(){return Vt(this())},t}function Lt(t){return Ub(t)?t():t}function Ub(t){return typeof t=="function"&&t.hasOwnProperty(Ek)&&t.__forward_ref__===Xt}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ad(t){return tb(t,Bb)||tb(t,$b)}function jb(t){return Ad(t)!==null}function tb(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ck(t){let e=t&&(t[Bb]||t[$b]);return e||null}function nb(t){return t&&(t.hasOwnProperty(rb)||t.hasOwnProperty(Tk))?t[rb]:null}var Bb=xe({\u0275prov:xe}),rb=xe({\u0275inj:xe}),$b=xe({ngInjectableDef:xe}),Tk=xe({ngInjectorDef:xe}),$=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hb(t){return t&&!!t.\u0275providers}var bk=xe({\u0275cmp:xe}),Dk=xe({\u0275dir:xe}),Sk=xe({\u0275pipe:xe}),Ak=xe({\u0275mod:xe}),od=xe({\u0275fac:xe}),oc=xe({__NG_ELEMENT_ID__:xe}),ib=xe({__NG_ENV_ID__:xe});function fo(t){return typeof t=="string"?t:t==null?"":String(t)}function Rk(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():fo(t)}function Nk(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,t)}function Og(t,e){throw new W(-201,!1)}var ue=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ue||{}),Wm;function qb(){return Wm}function on(t){let e=Wm;return Wm=t,e}function zb(t,e,n){let r=Ad(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ue.Optional)return null;if(e!==void 0)return e;Og(t,"Injector")}var Mk={},ac=Mk,Km="__NG_DI_FLAG__",ad="ngTempTokenPath",xk="ngTokenPath",Pk=/\n/gm,Ok="\u0275",sb="__source",lo;function kk(){return lo}function Jr(t){let e=lo;return lo=t,e}function Fk(t,e=ue.Default){if(lo===void 0)throw new W(-203,!1);return lo===null?zb(t,void 0,e):lo.get(t,e&ue.Optional?null:void 0,e)}function Q(t,e=ue.Default){return(qb()||Fk)(Lt(t),e)}function P(t,e=ue.Default){return Q(t,Rd(e))}function Rd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qm(t){let e=[];for(let n=0;n<t.length;n++){let r=Lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=ue.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Lk(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Q(i,s))}else e.push(Q(r))}return e}function Gb(t,e){return t[Km]=e,t.prototype[Km]=e,t}function Lk(t){return t[Km]}function Vk(t,e,n,r){let i=t[ad];throw e[sb]&&i.unshift(e[sb]),t.message=Uk(`
`+t.message,i,n,r),t[xk]=i,t[ad]=null,t}function Uk(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Ok?t.slice(2):t;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Vt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Pk,`
  `)}`}var Je=Gb(Vb("Optional"),8);var kg=Gb(Vb("SkipSelf"),4);function po(t,e){let n=t.hasOwnProperty(od);return n?t[od]:null}function Fg(t,e){t.forEach(n=>Array.isArray(n)?Fg(n,e):e(n))}function Wb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function cd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jk(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Bk(t,e,n){let r=vc(t,e);return r>=0?t[r|1]=n:(r=~r,jk(t,r,e,n)),r}function xm(t,e){let n=vc(t,e);if(n>=0)return t[n|1]}function vc(t,e){return $k(t,e,1)}function $k(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var mo={},an=[],go=new $(""),Kb=new $("",-1),Qb=new $(""),ud=class{get(e,n=ac){if(n===ac){let r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return n}},Yb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yb||{}),jn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(jn||{}),mt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(mt||{});function Hk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Ym(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];zk(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function qk(t){return t===3||t===4||t===6}function zk(t){return t.charCodeAt(0)===64}function cc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ob(t,n,i,null,e[++r]):ob(t,n,i,null,null))}}return t}function ob(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Jb="ng-template";function Gk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Hk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Lg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Lg(t){return t.type===4&&t.value!==Jb}function Wk(t,e,n){let r=t.type===4&&!n?Jb:t.value;return e===r}function Kk(t,e,n){let r=4,i=t.attrs,s=i!==null?Jk(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!_n(r)&&!_n(c))return!1;if(o&&_n(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Wk(t,c,n)||c===""&&e.length===1){if(_n(r))return!1;o=!0}}else if(r&8){if(i===null||!Gk(t,i,c,n)){if(_n(r))return!1;o=!0}}else{let l=e[++a],h=Qk(c,i,Lg(t),n);if(h===-1){if(_n(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(_n(r))return!1;o=!0}}}}return _n(r)||o}function _n(t){return(t&1)===0}function Qk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Xk(e,t)}function Yk(t,e,n=!1){for(let r=0;r<e.length;r++)if(Kk(t,e[r],n))return!0;return!1}function Jk(t){for(let e=0;e<t.length;e++){let n=t[e];if(qk(n))return e}return t.length}function Xk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ab(t,e){return t?":not("+e.trim()+")":e}function Zk(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!_n(o)&&(e+=ab(s,i),i=""),r=o,s=s||!_n(r);n++}return i!==""&&(e+=ab(s,i)),e}function e1(t){return t.map(Zk).join(",")}function t1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!_n(i))break;i=s}r++}return{attrs:e,classes:n}}function Ge(t){return yc(()=>{let e=nD(t),n=Ce(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||jn.Emulated,styles:t.styles||an,_:null,schemas:t.schemas||null,tView:null,id:""});rD(n);let r=t.dependencies;return n.directiveDefs=ub(r,!1),n.pipeDefs=ub(r,!0),n.id=i1(n),n})}function n1(t){return Zr(t)||Xb(t)}function r1(t){return t!==null}function Tn(t){return yc(()=>({type:t.type,bootstrap:t.bootstrap||an,declarations:t.declarations||an,imports:t.imports||an,exports:t.exports||an,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function cb(t,e){if(t==null)return mo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=mt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==mt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function je(t){return yc(()=>{let e=nD(t);return rD(e),e})}function Zr(t){return t[bk]||null}function Xb(t){return t[Dk]||null}function Zb(t){return t[Sk]||null}function eD(t){let e=Zr(t)||Xb(t)||Zb(t);return e!==null?e.standalone:!1}function tD(t,e){let n=t[Ak]||null;if(!n&&e===!0)throw new Error(`Type ${Vt(t)} does not have '\u0275mod' property.`);return n}function nD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||mo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||an,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cb(t.inputs,e),outputs:cb(t.outputs),debugInfo:null}}function rD(t){t.features?.forEach(e=>e(t))}function ub(t,e){if(!t)return null;let n=e?Zb:n1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(r1)}function i1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function zt(t){return{\u0275providers:t}}function s1(...t){return{\u0275providers:iD(!0,t),\u0275fromNgModule:!0}}function iD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Fg(e,o=>{let a=o;Jm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&sD(i,s),n}function sD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Vg(i,s=>{e(s,r)})}}function Jm(t,e,n,r){if(t=Lt(t),!t)return!1;let i=null,s=nb(t),o=!s&&Zr(t);if(!s&&!o){let c=t.ngModule;if(s=nb(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Jm(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Fg(s.imports,h=>{Jm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&sD(l,e)}if(!a){let l=po(i)||(()=>new i);e({provide:i,useFactory:l,deps:an},i),e({provide:Qb,useValue:i,multi:!0},i),e({provide:go,useValue:()=>Q(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;Vg(c,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Vg(t,e){for(let n of t)Hb(n)&&(n=n.\u0275providers),Array.isArray(n)?Vg(n,e):e(n)}var o1=xe({provide:String,useValue:xe});function oD(t){return t!==null&&typeof t=="object"&&o1 in t}function a1(t){return!!(t&&t.useExisting)}function c1(t){return!!(t&&t.useFactory)}function yo(t){return typeof t=="function"}function u1(t){return!!t.useClass}var Nd=new $(""),td={},l1={},Pm;function Ug(){return Pm===void 0&&(Pm=new ud),Pm}var bt=class{},uc=class extends bt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zm(e,o=>this.processProvider(o)),this.records.set(Kb,oo(void 0,this)),i.has("environment")&&this.records.set(bt,oo(void 0,this));let s=this.records.get(Nd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Qb,an,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Jr(this),r=on(void 0),i;try{return e()}finally{Jr(n),on(r)}}get(e,n=ac,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ib))return e[ib](this);r=Rd(r);let i,s=Jr(this),o=on(void 0);try{if(!(r&ue.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=m1(e)&&Ad(e);l&&this.injectableDefInScope(l)?c=oo(Xm(e),td):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ue.Self?Ug():this.parent;return n=r&ue.Optional&&n===ac?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ad]=a[ad]||[]).unshift(Vt(e)),s)throw a;return Vk(a,e,"R3InjectorError",this.source)}else throw a}finally{on(o),Jr(s)}}resolveInjectorInitializers(){let e=Te(null),n=Jr(this),r=on(void 0),i;try{let s=this.get(go,an,ue.Self);for(let o of s)o()}finally{Jr(n),on(r),Te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=Lt(e);let n=yo(e)?e:Lt(e&&e.provide),r=h1(e);if(!yo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=oo(void 0,td,!0),i.factory=()=>Qm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Te(null);try{return n.value===td&&(n.value=l1,n.value=n.factory()),typeof n.value=="object"&&n.value&&p1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Xm(t){let e=Ad(t),n=e!==null?e.factory:po(t);if(n!==null)return n;if(t instanceof $)throw new W(204,!1);if(t instanceof Function)return d1(t);throw new W(204,!1)}function d1(t){if(t.length>0)throw new W(204,!1);let n=Ck(t);return n!==null?()=>n.factory(t):()=>new t}function h1(t){if(oD(t))return oo(void 0,t.useValue);{let e=aD(t);return oo(e,td)}}function aD(t,e,n){let r;if(yo(t)){let i=Lt(t);return po(i)||Xm(i)}else if(oD(t))r=()=>Lt(t.useValue);else if(c1(t))r=()=>t.useFactory(...Qm(t.deps||[]));else if(a1(t))r=()=>Q(Lt(t.useExisting));else{let i=Lt(t&&(t.useClass||t.provide));if(f1(t))r=()=>new i(...Qm(t.deps));else return po(i)||Xm(i)}return r}function oo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function f1(t){return!!t.deps}function p1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function m1(t){return typeof t=="function"||typeof t=="object"&&t instanceof $}function Zm(t,e){for(let n of t)Array.isArray(n)?Zm(n,e):n&&Hb(n)?Zm(n.\u0275providers,e):e(n)}function bn(t,e){t instanceof uc&&t.assertNotDestroyed();let n,r=Jr(t),i=on(void 0);try{return e()}finally{Jr(r),on(i)}}function cD(){return qb()!==void 0||kk()!=null}function g1(t){if(!cD())throw new W(-203,!1)}function y1(t){return typeof t=="function"}var _r=0,me=1,ne=2,Dt=3,wn=4,Dn=5,ld=6,lc=7,In=8,vo=9,En=10,nt=11,dc=12,lb=13,Co=14,Bn=15,Md=16,ao=17,_o=18,xd=19,uD=20,Xr=21,Om=22,Vi=23,ei=25,lD=1;var Ui=7,dd=8,hd=9,cn=10,jg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(jg||{});function Fi(t){return Array.isArray(t)&&typeof t[lD]=="object"}function wr(t){return Array.isArray(t)&&t[lD]===!0}function dD(t){return(t.flags&4)!==0}function Pd(t){return t.componentOffset>-1}function Bg(t){return(t.flags&1)===1}function ti(t){return!!t.template}function v1(t){return(t[ne]&512)!==0}var eg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function hD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Sn(){return fD}function fD(t){return t.type.prototype.ngOnChanges&&(t.setInput=w1),_1}Sn.ngInherit=!0;function _1(){let t=mD(this),e=t?.current;if(e){let n=t.previous;if(n===mo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function w1(t,e,n,r,i){let s=this.declaredInputs[r],o=mD(t)||I1(t,{previous:mo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new eg(l&&l.currentValue,n,c===mo),hD(t,e,i,n)}var pD="__ngSimpleChanges__";function mD(t){return t[pD]||null}function I1(t,e){return t[pD]=e}var db=null;var Vn=function(t,e,n){db?.(t,e,n)},E1="svg",C1="math",T1=!1;function b1(){return T1}function $n(t){for(;Array.isArray(t);)t=t[_r];return t}function gD(t,e){return $n(e[t])}function un(t,e){return $n(e[t.index])}function yD(t,e){return t.data[e]}function ri(t,e){let n=e[t];return Fi(n)?n:n[_r]}function $g(t){return(t[ne]&128)===128}function D1(t){return wr(t[Dt])}function fd(t,e){return e==null?null:t[e]}function vD(t){t[ao]=0}function S1(t){t[ne]&1024||(t[ne]|=1024,$g(t)&&hc(t))}function A1(t,e){for(;t>0;)e=e[Co],t--;return e}function Hg(t){return!!(t[ne]&9216||t[Vi]?.dirty)}function tg(t){t[En].changeDetectionScheduler?.notify(1),Hg(t)?hc(t):t[ne]&64&&(b1()?(t[ne]|=1024,hc(t)):t[En].changeDetectionScheduler?.notify())}function hc(t){t[En].changeDetectionScheduler?.notify();let e=fc(t);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!$g(e)));)e=fc(e)}function _D(t,e){if((t[ne]&256)===256)throw new W(911,!1);t[Xr]===null&&(t[Xr]=[]),t[Xr].push(e)}function R1(t,e){if(t[Xr]===null)return;let n=t[Xr].indexOf(e);n!==-1&&t[Xr].splice(n,1)}function fc(t){let e=t[Dt];return wr(e)?e[Dt]:e}var le={lFrame:SD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function N1(){return le.lFrame.elementDepthCount}function M1(){le.lFrame.elementDepthCount++}function x1(){le.lFrame.elementDepthCount--}function wD(){return le.bindingsEnabled}function P1(){return le.skipHydrationRootTNode!==null}function O1(t){return le.skipHydrationRootTNode===t}function k1(){le.skipHydrationRootTNode=null}function Re(){return le.lFrame.lView}function Gt(){return le.lFrame.tView}function Od(t){return le.lFrame.contextLView=t,t[In]}function kd(t){return le.lFrame.contextLView=null,t}function Zt(){let t=ID();for(;t!==null&&t.type===64;)t=t.parent;return t}function ID(){return le.lFrame.currentTNode}function F1(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function _c(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function ED(){return le.lFrame.isParent}function L1(){le.lFrame.isParent=!1}function V1(){let t=le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function U1(){return le.lFrame.bindingIndex}function j1(t){return le.lFrame.bindingIndex=t}function Fd(){return le.lFrame.bindingIndex++}function CD(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function B1(){return le.lFrame.inI18n}function $1(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,ng(e)}function H1(){return le.lFrame.currentDirectiveIndex}function ng(t){le.lFrame.currentDirectiveIndex=t}function q1(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function TD(t){le.lFrame.currentQueryIndex=t}function z1(t){let e=t[me];return e.type===2?e.declTNode:e.type===1?t[Dn]:null}function bD(t,e,n){if(n&ue.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ue.Host);)if(i=z1(s),i===null||(s=s[Co],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=le.lFrame=DD();return r.currentTNode=e,r.lView=t,!0}function qg(t){let e=DD(),n=t[me];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function DD(){let t=le.lFrame,e=t===null?null:t.child;return e===null?SD(t):e}function SD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function AD(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var RD=AD;function zg(){let t=AD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function G1(t){return(le.lFrame.contextLView=A1(t,le.lFrame.contextLView))[In]}function Gi(){return le.lFrame.selectedIndex}function ji(t){le.lFrame.selectedIndex=t}function Ld(){let t=le.lFrame;return yD(t.tView,t.selectedIndex)}function W1(){return le.lFrame.currentNamespace}var ND=!0;function Gg(){return ND}function Wg(t){ND=t}function K1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=fD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Kg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function nd(t,e,n){MD(t,e,3,n)}function rd(t,e,n,r){(t[ne]&3)===n&&MD(t,e,n,r)}function km(t,e){let n=t[ne];(n&3)===e&&(n&=16383,n+=1,t[ne]=n)}function MD(t,e,n,r){let i=r!==void 0?t[ao]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[ao]+=65536),(a<s||s==-1)&&(Q1(t,n,e,c),t[ao]=(t[ao]&4294901760)+c+2),c++}function hb(t,e){Vn(4,t,e);let n=Te(null);try{e.call(t)}finally{Te(n),Vn(5,t,e)}}function Q1(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ne]>>14<t[ao]>>16&&(t[ne]&3)===e&&(t[ne]+=16384,hb(a,s)):hb(a,s)}var ho=-1,Bi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Y1(t){return t instanceof Bi}function J1(t){return(t.flags&8)!==0}function X1(t){return(t.flags&16)!==0}function xD(t){return t!==ho}function pd(t){return t&32767}function Z1(t){return t>>16}function md(t,e){let n=Z1(t),r=e;for(;n>0;)r=r[Co],n--;return r}var rg=!0;function fb(t){let e=rg;return rg=t,e}var eF=256,PD=eF-1,OD=5,tF=0,Un={};function nF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(oc)&&(r=n[oc]),r==null&&(r=n[oc]=tF++);let i=r&PD,s=1<<i;e.data[t+(i>>OD)]|=s}function gd(t,e){let n=kD(t,e);if(n!==-1)return n;let r=e[me];r.firstCreatePass&&(t.injectorIndex=e.length,Fm(r.data,t),Fm(e,null),Fm(r.blueprint,null));let i=Qg(t,e),s=t.injectorIndex;if(xD(i)){let o=pd(i),a=md(i,e),c=a[me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Fm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function kD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Qg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=jD(i),r===null)return ho;if(n++,i=i[Co],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ho}function ig(t,e,n){nF(t,e,n)}function FD(t,e,n){if(n&ue.Optional||t!==void 0)return t;Og(e,"NodeInjector")}function LD(t,e,n,r){if(n&ue.Optional&&r===void 0&&(r=null),!(n&(ue.Self|ue.Host))){let i=t[vo],s=on(void 0);try{return i?i.get(e,r,n&ue.Optional):zb(e,r,n&ue.Optional)}finally{on(s)}}return FD(r,e,n)}function VD(t,e,n,r=ue.Default,i){if(t!==null){if(e[ne]&2048&&!(r&ue.Self)){let o=aF(t,e,n,r,Un);if(o!==Un)return o}let s=UD(t,e,n,r,Un);if(s!==Un)return s}return LD(e,n,r,i)}function UD(t,e,n,r,i){let s=sF(n);if(typeof s=="function"){if(!bD(e,t,r))return r&ue.Host?FD(i,n,r):LD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ue.Optional))Og(n);else return o}finally{RD()}}else if(typeof s=="number"){let o=null,a=kD(t,e),c=ho,l=r&ue.Host?e[Bn][Dn]:null;for((a===-1||r&ue.SkipSelf)&&(c=a===-1?Qg(t,e):e[a+8],c===ho||!mb(r,!1)?a=-1:(o=e[me],a=pd(c),e=md(c,e)));a!==-1;){let h=e[me];if(pb(s,a,h.data)){let p=rF(a,e,n,o,r,l);if(p!==Un)return p}c=e[a+8],c!==ho&&mb(r,e[me].data[a+8]===l)&&pb(s,a,e)?(o=h,a=pd(c),e=md(c,e)):a=-1}}return i}function rF(t,e,n,r,i,s){let o=e[me],a=o.data[t+8],c=r==null?Pd(a)&&rg:r!=o&&(a.type&3)!==0,l=i&ue.Host&&s===a,h=iF(a,o,n,c,l);return h!==null?wo(e,o,h,a):Un}function iF(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let D=o[v];if(v<c&&n===D||v>=c&&D.type===n)return v}if(i){let v=o[c];if(v&&ti(v)&&v.type===n)return c}return null}function wo(t,e,n,r){let i=t[n],s=e.data;if(Y1(i)){let o=i;o.resolving&&Nk(Rk(s[n]));let a=fb(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?on(o.injectImpl):null,h=bD(t,r,ue.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&K1(n,s[n],e)}finally{l!==null&&on(l),fb(a),o.resolving=!1,RD()}}return i}function sF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(oc)?t[oc]:void 0;return typeof e=="number"?e>=0?e&PD:oF:e}function pb(t,e,n){let r=1<<t;return!!(n[e+(t>>OD)]&r)}function mb(t,e){return!(t&ue.Self)&&!(t&ue.Host&&e)}var Li=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return VD(this._tNode,this._lView,e,Rd(r),n)}};function oF(){return new Li(Zt(),Re())}function qn(t){return yc(()=>{let e=t.prototype.constructor,n=e[od]||sg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[od]||sg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function sg(t){return Ub(t)?()=>{let e=sg(Lt(t));return e&&e()}:po(t)}function aF(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ne]&2048&&!(o[ne]&512);){let a=UD(s,o,n,r|ue.Self,Un);if(a!==Un)return a;let c=s.parent;if(!c){let l=o[uD];if(l){let h=l.get(n,Un,r);if(h!==Un)return h}c=jD(o),o=o[Co]}s=c}return i}function jD(t){let e=t[me],n=e.type;return n===2?e.declTNode:n===1?t[Dn]:null}function gb(t,e=null,n=null,r){let i=BD(t,e,n,r);return i.resolveInjectorInitializers(),i}function BD(t,e=null,n=null,r,i=new Set){let s=[n||an,s1(t)];return r=r||(typeof t=="object"?void 0:Vt(t)),new uc(s,e||Ug(),r||null,i)}var gt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return gb({name:""},i,r,"");{let s=r.name??"";return gb({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=ac,e.NULL=new ud,e.\u0275prov=G({token:e,providedIn:"any",factory:()=>Q(Kb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var cF="ngOriginalError";function Lm(t){return t[cF]}var Hn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Lm(e);for(;n&&Lm(n);)n=Lm(n);return n||null}},$D=new $("",{providedIn:"root",factory:()=>P(Hn).handleError.bind(void 0)}),Yg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uF,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),og=class extends Yg{constructor(e){super(),this._lView=e}onDestroy(e){return _D(this._lView,e),()=>R1(this._lView,e)}};function uF(){return new og(Re())}function lF(){return Vd(Zt(),Re())}function Vd(t,e){return new Ir(un(t,e))}var Ir=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=lF;let t=e;return t})();var ag=class extends Ft{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,cD()&&(this.destroyRef=P(Yg,{optional:!0})??void 0)}emit(e){let n=Te(null);try{super.next(e)}finally{Te(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Vm(s),i&&(i=Vm(i)),o&&(o=Vm(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ye&&e.add(a),a}};function Vm(t){return e=>{setTimeout(t,void 0,e)}}var ze=ag;function HD(t){return(t.flags&128)===128}var qD=new Map,dF=0;function hF(){return dF++}function fF(t){qD.set(t[xd],t)}function pF(t){qD.delete(t[xd])}var yb="__ngContext__";function $i(t,e){Fi(e)?(t[yb]=e[xd],fF(e)):t[yb]=e}function zD(t){return WD(t[dc])}function GD(t){return WD(t[wn])}function WD(t){for(;t!==null&&!wr(t);)t=t[wn];return t}var cg;function KD(t){cg=t}function mF(){if(cg!==void 0)return cg;if(typeof document<"u")return document;throw new W(210,!1)}var Jg=new $("",{providedIn:"root",factory:()=>gF}),gF="ng",Xg=new $(""),ln=new $("",{providedIn:"platform",factory:()=>"unknown"});var Zg=new $("",{providedIn:"root",factory:()=>mF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var yF="h",vF="b";var _F=()=>null;function ey(t,e,n=!1){return _F(t,e,n)}var QD=!1,wF=new $("",{providedIn:"root",factory:()=>QD});var Xl;function IF(){if(Xl===void 0&&(Xl=null,ki.trustedTypes))try{Xl=ki.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Xl}function EF(t){return IF()?.createScriptURL(t)||t}var yd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lb})`}};function Ud(t){return t instanceof yd?t.changingThisBreaksApplicationSecurity:t}function YD(t,e){let n=CF(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Lb})`)}return n===e}function CF(t){return t instanceof yd&&t.getTypeName()||null}var TF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function JD(t){return t=String(t),t.match(TF)?t:"unsafe:"+t}var ty=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ty||{});function Wi(t){let e=bF();return e?e.sanitize(ty.URL,t)||"":YD(t,"URL")?Ud(t):JD(fo(t))}function XD(t){return EF(t[0])}function bF(){let t=Re();return t&&t[En].sanitizer}function ZD(t){return t instanceof Function?t():t}function DF(t){return(t??P(gt)).get(ln)==="browser"}var yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(yr||{}),SF;function ny(t,e){return SF(t,e)}function co(t,e,n,r,i){if(r!=null){let s,o=!1;wr(r)?s=r:Fi(r)&&(o=!0,r=r[_r]);let a=$n(r);t===0&&n!==null?i==null?i0(e,n,a):vd(e,n,a,i||null,!0):t===1&&n!==null?vd(e,n,a,i||null,!0):t===2?qF(e,a,o):t===3&&e.destroyNode(a),s!=null&&GF(e,t,s,n,i)}}function AF(t,e){return t.createText(e)}function RF(t,e,n){t.setValue(e,n)}function e0(t,e,n){return t.createElement(e,n)}function NF(t,e){t0(t,e),e[_r]=null,e[Dn]=null}function MF(t,e,n,r,i,s){r[_r]=i,r[Dn]=e,jd(t,r,n,1,i,s)}function t0(t,e){e[En].changeDetectionScheduler?.notify(1),jd(t,e,e[nt],2,null,null)}function xF(t){let e=t[dc];if(!e)return Um(t[me],t);for(;e;){let n=null;if(Fi(e))n=e[dc];else{let r=e[cn];r&&(n=r)}if(!n){for(;e&&!e[wn]&&e!==t;)Fi(e)&&Um(e[me],e),e=e[Dt];e===null&&(e=t),Fi(e)&&Um(e[me],e),n=e&&e[wn]}e=n}}function PF(t,e,n,r){let i=cn+r,s=n.length;r>0&&(n[i-1][wn]=e),r<s-cn?(e[wn]=n[i],Wb(n,cn+r,e)):(n.push(e),e[wn]=null),e[Dt]=n;let o=e[Md];o!==null&&n!==o&&OF(o,e);let a=e[_o];a!==null&&a.insertView(t),tg(e),e[ne]|=128}function OF(t,e){let n=t[hd],i=e[Dt][Dt][Bn];e[Bn]!==i&&(t[ne]|=jg.HasTransplantedViews),n===null?t[hd]=[e]:n.push(e)}function n0(t,e){let n=t[hd],r=n.indexOf(e);n.splice(r,1)}function ug(t,e){if(t.length<=cn)return;let n=cn+e,r=t[n];if(r){let i=r[Md];i!==null&&i!==t&&n0(i,r),e>0&&(t[n-1][wn]=r[wn]);let s=cd(t,cn+e);NF(r[me],r);let o=s[_o];o!==null&&o.detachView(s[me]),r[Dt]=null,r[wn]=null,r[ne]&=-129}return r}function r0(t,e){if(!(e[ne]&256)){let n=e[nt];n.destroyNode&&jd(t,e,n,3,null,null),xF(e)}}function Um(t,e){if(e[ne]&256)return;let n=Te(null);try{e[ne]&=-129,e[ne]|=256,e[Vi]&&AT(e[Vi]),FF(t,e),kF(t,e),e[me].type===1&&e[nt].destroy();let r=e[Md];if(r!==null&&wr(e[Dt])){r!==e[Dt]&&n0(r,e);let i=e[_o];i!==null&&i.detachView(t)}pF(e)}finally{Te(n)}}function kF(t,e){let n=t.cleanup,r=e[lc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[lc]=null);let i=e[Xr];if(i!==null){e[Xr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function FF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Bi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Vn(4,a,c);try{c.call(a)}finally{Vn(5,a,c)}}else{Vn(4,i,s);try{s.call(i)}finally{Vn(5,i,s)}}}}}function LF(t,e,n){return VF(t,e.parent,n)}function VF(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[_r];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===jn.None||s===jn.Emulated)return null}return un(r,n)}}function vd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function i0(t,e,n){t.appendChild(e,n)}function vb(t,e,n,r,i){r!==null?vd(t,e,n,r,i):i0(t,e,n)}function UF(t,e,n,r){t.removeChild(e,n,r)}function ry(t,e){return t.parentNode(e)}function jF(t,e){return t.nextSibling(e)}function BF(t,e,n){return HF(t,e,n)}function $F(t,e,n){return t.type&40?un(t,n):null}var HF=$F,_b;function iy(t,e,n,r){let i=LF(t,r,e),s=e[nt],o=r.parent||e[Dn],a=BF(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)vb(s,i,n[c],a,!1);else vb(s,i,n,a,!1);_b!==void 0&&_b(s,r,e,n,i)}function id(t,e){if(e!==null){let n=e.type;if(n&3)return un(e,t);if(n&4)return lg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return id(t,r);{let i=t[e.index];return wr(i)?lg(-1,i):$n(i)}}else{if(n&32)return ny(e,t)()||$n(t[e.index]);{let r=s0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fc(t[Bn]);return id(i,r)}else return id(t,e.next)}}}return null}function s0(t,e){if(e!==null){let r=t[Bn][Dn],i=e.projection;return r.projection[i]}return null}function lg(t,e){let n=cn+t+1;if(n<e.length){let r=e[n],i=r[me].firstChild;if(i!==null)return id(r,i)}return e[Ui]}function qF(t,e,n){let r=ry(t,e);r&&UF(t,r,e,n)}function sy(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&$i($n(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)sy(t,e,n.child,r,i,s,!1),co(e,t,i,a,s);else if(c&32){let l=ny(n,r),h;for(;h=l();)co(e,t,i,h,s);co(e,t,i,a,s)}else c&16?zF(t,e,r,n,i,s):co(e,t,i,a,s);n=o?n.projectionNext:n.next}}function jd(t,e,n,r,i,s){sy(n,r,t.firstChild,e,i,s,!1)}function zF(t,e,n,r,i,s){let o=n[Bn],c=o[Dn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];co(e,t,i,h,s)}else{let l=c,h=o[Dt];HD(r)&&(l.flags|=128),sy(t,e,l,h,i,s,!0)}}function GF(t,e,n,r,i){let s=n[Ui],o=$n(n);s!==o&&co(e,t,r,s,i);for(let a=cn;a<n.length;a++){let c=n[a];jd(c[me],c,t,e,r,s)}}function WF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:yr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=yr.Important),t.setStyle(n,r,i,s))}}function KF(t,e,n){t.setAttribute(e,"style",n)}function o0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function a0(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Ym(t,e,r),i!==null&&o0(t,e,i),s!==null&&KF(t,e,s)}var zn={};function re(t=1){c0(Gt(),Re(),Gi()+t,!1)}function c0(t,e,n,r){if(!r)if((e[ne]&3)===3){let s=t.preOrderCheckHooks;s!==null&&nd(e,s,n)}else{let s=t.preOrderHooks;s!==null&&rd(e,s,0,n)}ji(n)}function j(t,e=ue.Default){let n=Re();if(n===null)return Q(t,e);let r=Zt();return VD(r,n,Lt(t),e)}function u0(){let t="invalid";throw new Error(t)}function l0(t,e,n,r,i,s){let o=Te(null);try{let a=null;i&mt.SignalBased&&(a=e[r][cm]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&mt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):hD(e,a,r,s)}finally{Te(o)}}function QF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ji(~i);else{let s=i,o=n[++r],a=n[++r];$1(o,s);let c=e[s];a(2,c)}}}finally{ji(-1)}}function Bd(t,e,n,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[_r]=i,p[ne]=r|4|128|8|64,(l!==null||t&&t[ne]&2048)&&(p[ne]|=2048),vD(p),p[Dt]=p[Co]=t,p[In]=n,p[En]=o||t&&t[En],p[nt]=a||t&&t[nt],p[vo]=c||t&&t[vo]||null,p[Dn]=s,p[xd]=hF(),p[ld]=h,p[uD]=l,p[Bn]=e.type==2?t[Bn]:p,p}function $d(t,e,n,r,i){let s=t.data[e];if(s===null)s=YF(t,e,n,r,i),B1()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=F1();s.injectorIndex=o===null?-1:o.injectorIndex}return _c(s,!0),s}function YF(t,e,n,r,i){let s=ID(),o=ED(),a=o?s:s&&s.parent,c=t.data[e]=tL(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function d0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function h0(t,e,n,r,i){let s=Gi(),o=r&2;try{ji(-1),o&&e.length>ei&&c0(t,e,ei,!1),Vn(o?2:0,i),n(r,i)}finally{ji(s),Vn(o?3:1,i)}}function f0(t,e,n){if(dD(e)){let r=Te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{Te(r)}}}function p0(t,e,n){wD()&&(aL(t,e,n,un(n,e)),(n.flags&64)===64&&_0(t,e,n))}function m0(t,e,n=un){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function g0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=oy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function oy(t,e,n,r,i,s,o,a,c,l,h){let p=ei+r,m=p+i,v=JF(p,m),D=typeof l=="function"?l():l;return v[me]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:h}}function JF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:zn);return n}function XF(t,e,n,r){let s=r.get(wF,QD)||n===jn.ShadowDom,o=t.selectRootElement(e,s);return ZF(o),o}function ZF(t){eL(t)}var eL=()=>null;function tL(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return P1()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function wb(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=mt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Ib(r,n,l,a,c):Ib(r,n,l,a)}return r}function Ib(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function nL(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,D=m?m.outputs:null;c=wb(0,p.inputs,h,c,v),l=wb(1,p.outputs,h,l,D);let N=c!==null&&o!==null&&!Lg(e)?vL(c,h,o):null;a.push(N)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function rL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function ay(t,e,n,r,i,s,o,a){let c=un(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(cy(t,n,h,r,i),Pd(e)&&iL(n,e.index)):e.type&3?(r=rL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function iL(t,e){let n=ri(e,t);n[ne]&16||(n[ne]|=64)}function y0(t,e,n,r){if(wD()){let i=r===null?null:{"":-1},s=uL(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&v0(t,e,n,o,i,a),i&&lL(n,r,i)}n.mergedAttrs=cc(n.mergedAttrs,n.attrs)}function v0(t,e,n,r,i,s){for(let l=0;l<r.length;l++)ig(gd(n,e),t,r[l].type);hL(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=d0(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=cc(n.mergedAttrs,h.hostAttrs),fL(t,n,e,c,h),dL(c,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}nL(t,n,s)}function sL(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;oL(o)!=a&&o.push(a),o.push(n,r,s)}}function oL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function aL(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Pd(n)&&pL(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||gd(n,e),$i(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=wo(e,t,a,n);if($i(l,e),o!==null&&yL(e,a-i,l,c,n,o),ti(c)){let h=ri(n.index,e);h[In]=wo(e,t,a,n)}}}function _0(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=H1();try{ji(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];ng(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&cL(c,l)}}finally{ji(-1),ng(o)}}function cL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function uL(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Yk(e,o.selectors,!1))if(r||(r=[]),ti(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;dg(t,e,c)}else r.unshift(o),dg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function dg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function lL(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function dL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ti(e)&&(n[""]=t)}}function hL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function fL(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=po(i.type,!0)),o=new Bi(s,ti(i),j);t.blueprint[r]=o,n[r]=o,sL(t,e,r,d0(t,n,i.hostVars,zn),i)}function pL(t,e,n){let r=un(e,t),i=g0(n),s=t[En].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Hd(t,Bd(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function mL(t,e,n,r,i,s){let o=un(t,e);gL(e[nt],o,s,t.value,n,r,i)}function gL(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?fo(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function yL(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];l0(r,n,c,l,h,p)}}function vL(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function w0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function I0(t,e){let n=t.contentQueries;if(n!==null){let r=Te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];TD(s),a.contentQueries(2,e[o],o)}}}finally{Te(r)}}}function Hd(t,e){return t[dc]?t[lb][wn]=e:t[dc]=e,t[lb]=e,e}function hg(t,e,n){TD(0);let r=Te(null);try{e(t,n)}finally{Te(r)}}function _L(t){return t[lc]||(t[lc]=[])}function wL(t){return t.cleanup||(t.cleanup=[])}function E0(t,e){let n=t[vo],r=n?n.get(Hn,null):null;r&&r.handleError(e)}function cy(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],h=t.data[o];l0(h,l,r,a,c,i)}}function C0(t,e,n){let r=gD(e,t);RF(t[nt],r,n)}function IL(t,e){let n=ri(e,t),r=n[me];EL(r,n);let i=n[_r];i!==null&&n[ld]===null&&(n[ld]=ey(i,n[vo])),uy(r,n,n[In])}function EL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function uy(t,e,n){qg(e);try{let r=t.viewQuery;r!==null&&hg(1,r,n);let i=t.template;i!==null&&h0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[_o]?.finishViewCreation(t),t.staticContentQueries&&I0(t,e),t.staticViewQueries&&hg(2,t.viewQuery,n);let s=t.components;s!==null&&CL(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ne]&=-5,zg()}}function CL(t,e){for(let n=0;n<e.length;n++)IL(t,e[n])}function TL(t,e,n,r){let i=Te(null);try{let s=e.tView,a=t[ne]&4096?4096:16,c=Bd(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Md]=l;let h=t[_o];return h!==null&&(c[_o]=h.createEmbeddedView(s)),uy(s,c,n),c}finally{Te(i)}}function Eb(t,e){return!e||e.firstChild===null||HD(t)}function bL(t,e,n,r=!0){let i=e[me];if(PF(i,e,t,n),r){let o=lg(n,t),a=e[nt],c=ry(a,t[Ui]);c!==null&&MF(i,t[Dn],a,e,c,o)}let s=e[ld];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function _d(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push($n(s)),wr(s)&&DL(s,r);let o=n.type;if(o&8)_d(t,e,n.child,r);else if(o&32){let a=ny(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=s0(e,n);if(Array.isArray(a))r.push(...a);else{let c=fc(e[Bn]);_d(c[me],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function DL(t,e){for(let n=cn;n<t.length;n++){let r=t[n],i=r[me].firstChild;i!==null&&_d(r[me],r,i,e)}t[Ui]!==t[_r]&&e.push(t[Ui])}var T0=[];function SL(t){return t[Vi]??AL(t)}function AL(t){let e=T0.pop()??Object.create(NL);return e.lView=t,e}function RL(t){t.lView[Vi]!==t&&(t.lView=null,T0.push(t))}var NL=Ce(V({},bT),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{hc(t.lView)},consumerOnSignalRead(){this.lView[Vi]=this}}),b0=100;function D0(t,e=!0,n=0){let r=t[En],i=r.rendererFactory,s=!1;s||i.begin?.();try{ML(t,n)}catch(o){throw e&&E0(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function ML(t,e){fg(t,e);let n=0;for(;Hg(t);){if(n===b0)throw new W(103,!1);n++,fg(t,1)}}function xL(t,e,n,r){let i=e[ne];if((i&256)===256)return;let s=!1;!s&&e[En].inlineEffectRunner?.flush(),qg(e);let o=null,a=null;!s&&PL(t)&&(a=SL(e),o=DT(a));try{vD(e),j1(t.bindingStartIndex),n!==null&&h0(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let p=t.preOrderCheckHooks;p!==null&&nd(e,p,null)}else{let p=t.preOrderHooks;p!==null&&rd(e,p,0,null),km(e,0)}if(OL(e),S0(e,0),t.contentQueries!==null&&I0(t,e),!s)if(c){let p=t.contentCheckHooks;p!==null&&nd(e,p)}else{let p=t.contentHooks;p!==null&&rd(e,p,1),km(e,1)}QF(t,e);let l=t.components;l!==null&&R0(e,l,0);let h=t.viewQuery;if(h!==null&&hg(2,h,r),!s)if(c){let p=t.viewCheckHooks;p!==null&&nd(e,p)}else{let p=t.viewHooks;p!==null&&rd(e,p,2),km(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Om]){for(let p of e[Om])p();e[Om]=null}s||(e[ne]&=-73)}catch(c){throw hc(e),c}finally{a!==null&&(ST(a,o),RL(a)),zg()}}function PL(t){return t.type!==2}function S0(t,e){for(let n=zD(t);n!==null;n=GD(n))for(let r=cn;r<n.length;r++){let i=n[r];A0(i,e)}}function OL(t){for(let e=zD(t);e!==null;e=GD(e)){if(!(e[ne]&jg.HasTransplantedViews))continue;let n=e[hd];for(let r=0;r<n.length;r++){let i=n[r],s=i[Dt];S1(i)}}}function kL(t,e,n){let r=ri(e,t);A0(r,n)}function A0(t,e){$g(t)&&fg(t,e)}function fg(t,e){let r=t[me],i=t[ne],s=t[Vi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&um(s)),s&&(s.dirty=!1),t[ne]&=-9217,o)xL(r,t,r.template,t[In]);else if(i&8192){S0(t,1);let a=r.components;a!==null&&R0(t,a,1)}}function R0(t,e,n){for(let r=0;r<e.length;r++)kL(t,e[r],n)}function ly(t){for(t[En].changeDetectionScheduler?.notify();t;){t[ne]|=64;let e=fc(t);if(v1(t)&&!e)return t;t=e}return null}var Hi=class{get rootNodes(){let e=this._lView,n=e[me];return _d(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[In]}set context(e){this._lView[In]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(wr(e)){let n=e[dd],r=n?n.indexOf(this):-1;r>-1&&(ug(e,r),cd(n,r))}this._attachedToViewContainer=!1}r0(this._lView[me],this._lView)}onDestroy(e){_D(this._lView,e)}markForCheck(){ly(this._cdRefInjectingView||this._lView)}detach(){this._lView[ne]&=-129}reattach(){tg(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,D0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,t0(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e,tg(this._lView)}},qd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VL;let t=e;return t})(),FL=qd,LL=class extends FL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=TL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Hi(i)}};function VL(){return UL(Zt(),Re())}function UL(t,e){return t.type&4?new LL(e,t,Vd(t,e)):null}var cY=new RegExp(`^(\\d+)*(${vF}|${yF})*(.*)`);var jL=()=>null;function Cb(t,e){return jL(t,e)}var wd=class{},pg=class{},Id=class{};function BL(t){let e=Error(`No component factory found for ${Vt(t)}.`);return e[$L]=t,e}var $L="ngComponent";var mg=class{resolveComponentFactory(e){throw BL(e)}},zd=(()=>{let e=class e{};e.NULL=new mg;let t=e;return t})(),pc=class{},ii=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>HL();let t=e;return t})();function HL(){let t=Re(),e=Zt(),n=ri(e.index,t);return(Fi(n)?n:t)[nt]}var qL=(()=>{let e=class e{};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),jm={};var Tb=new Set;function Gd(t){Tb.has(t)||(Tb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function bb(...t){}function zL(){let t=typeof ki.requestAnimationFrame=="function",e=ki[t?"requestAnimationFrame":"setTimeout"],n=ki[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ve=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=zL().nativeRequestAnimationFrame,KL(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,GL,bb,bb);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},GL={};function dy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WL(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ki,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gg(t),t.isCheckStableRunning=!0,dy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gg(t))}function KL(t){let e=()=>{WL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(QL(a))return n.invokeTask(i,s,o,a);try{return Db(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Sb(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return Db(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Sb(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,gg(t),dy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function gg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Db(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Sb(t){t._nesting--,dy(t)}function QL(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var uo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(uo||{}),YL={destroy(){}};function Wd(t,e){!e&&g1(Wd);let n=e?.injector??P(gt);if(!DF(n))return YL;Gd("NgAfterNextRender");let r=n.get(hy),i=r.handler??=new vg,s=e?.phase??uo.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(Yg).onDestroy(o),c=bn(n,()=>new yg(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var yg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=P(ve),this.errorHandler=P(Hn,{optional:!0}),P(wd,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},vg=class{constructor(){this.executingCallbacks=!1,this.buckets={[uo.EarlyRead]:new Set,[uo.Write]:new Set,[uo.MixedReadWrite]:new Set,[uo.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},hy=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function _g(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=eb(i,a);else if(s==2){let c=a,l=e[++o];r=eb(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ed=class extends zd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Zr(e);return new Io(n,this.ngModule)}};function Ab(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function JL(t){let e=t.toLowerCase();return e==="svg"?E1:e==="math"?C1:null}var wg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Rd(r);let i=this.injector.get(e,jm,r);return i!==jm||n===jm?i:this.parentInjector.get(e,n,r)}},Io=class extends Id{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ab(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ab(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=e1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Te(null);try{i=i||this.ngModule;let o=i instanceof bt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new wg(e,o):e,c=a.get(pc,null);if(c===null)throw new W(407,!1);let l=a.get(qL,null),h=a.get(hy,null),p=a.get(wd,null),m={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},v=c.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",N=r?XF(v,r,this.componentDef.encapsulation,a):e0(v,D,JL(D)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let x=null;N!==null&&(x=ey(N,a,!0));let q=oy(0,null,null,1,0,null,null,null,null,null,null),z=Bd(null,q,null,R,null,null,m,v,a,null,x);qg(z);let K,ke;try{let ie=this.componentDef,C,y=null;ie.findHostDirectiveDefs?(C=[],y=new Map,ie.findHostDirectiveDefs(ie,C,y),C.push(ie)):C=[ie];let _=XL(z,N),E=ZL(_,N,ie,C,z,m,v);ke=yD(q,ei),N&&nV(v,ie,N,r),n!==void 0&&rV(ke,this.ngContentSelectors,n),K=tV(E,ie,C,y,z,[iV]),uy(q,z,null)}finally{zg()}return new Ig(this.componentType,K,Vd(ke,z),z,ke)}finally{Te(s)}}},Ig=class extends pg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Hi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;cy(s[me],s,i,e,n),this.previousInputValues.set(e,n);let o=ri(this._tNode.index,s);ly(o)}}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function XL(t,e){let n=t[me],r=ei;return t[r]=e,$d(n,r,2,"#host",null)}function ZL(t,e,n,r,i,s,o){let a=i[me];eV(r,t,e,o);let c=null;e!==null&&(c=ey(e,i[vo]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Bd(i,g0(n),null,h,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&dg(a,t,r.length-1),Hd(i,p),i[t.index]=p}function eV(t,e,n,r){for(let i of t)e.mergedAttrs=cc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_g(e,e.mergedAttrs,!0),n!==null&&a0(r,n,e))}function tV(t,e,n,r,i,s){let o=Zt(),a=i[me],c=un(o,i);v0(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=wo(i,a,p,o);$i(m,i)}_0(a,i,o),c&&$i(c,i);let l=wo(i,a,o.directiveStart+o.componentOffset,o);if(t[In]=i[In]=l,s!==null)for(let h of s)h(l,e);return f0(a,o,i),l}function nV(t,e,n,r){if(r)Ym(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:s}=t1(e.selectors[0]);i&&Ym(t,n,i),s&&s.length>0&&o0(t,n,s.join(" "))}}function rV(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function iV(){let t=Zt();Kg(Re()[me],t)}var To=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sV;let t=e;return t})();function sV(){let t=Zt();return aV(t,Re())}var oV=To,N0=class extends oV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vd(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qg(this._hostTNode,this._hostLView);if(xD(e)){let n=md(e,this._hostLView),r=pd(e),i=n[me].data[r+8];return new Li(i,n)}else return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Rb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-cn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Cb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Eb(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!y1(e),a;if(o)a=n;else{let D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}let c=o?e:new Io(Zr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let N=(o?l:this.parentInjector).get(bt,null);N&&(s=N)}let h=Zr(c.componentType??{}),p=Cb(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,s);return this.insertImpl(v.hostView,a,Eb(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(D1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Dt],l=new N0(c,c[Dn],c[Dt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return bL(o,i,s,r),e.attachToViewContainerRef(),Wb(Bm(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Rb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ug(this._lContainer,n);r&&(cd(Bm(this._lContainer),n),r0(r[me],r))}detach(e){let n=this._adjustIndex(e,-1),r=ug(this._lContainer,n);return r&&cd(Bm(this._lContainer),n)!=null?new Hi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Rb(t){return t[dd]}function Bm(t){return t[dd]||(t[dd]=[])}function aV(t,e){let n,r=e[t.index];return wr(r)?n=r:(n=w0(r,e,null,t),e[t.index]=n,Hd(e,n)),uV(n,e,t,r),new N0(n,t,e)}function cV(t,e){let n=t[nt],r=n.createComment(""),i=un(e,t),s=ry(n,i);return vd(n,s,r,jF(n,i),!1),r}var uV=hV,lV=()=>!1;function dV(t,e,n){return lV(t,e,n)}function hV(t,e,n,r){if(t[Ui])return;let i;n.type&8?i=$n(r):i=cV(e,n),t[Ui]=i}function fV(t){return typeof t=="function"&&t[cm]!==void 0}function M0(t){return fV(t)&&typeof t.set=="function"}function pV(t){return Object.getPrototypeOf(t.prototype).constructor}function Ut(t){let e=pV(t.type),n=!0,r=[t];for(;e;){let i;if(ti(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Zl(t.inputs),o.inputTransforms=Zl(t.inputTransforms),o.declaredInputs=Zl(t.declaredInputs),o.outputs=Zl(t.outputs);let a=i.hostBindings;a&&_V(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&yV(t,c),l&&vV(t,l),mV(t,i),Ik(t.outputs,i.outputs),ti(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ut&&(n=!1)}}e=Object.getPrototypeOf(e)}gV(r)}function mV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function gV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=cc(i.hostAttrs,n=cc(n,i.hostAttrs))}}function Zl(t){return t===mo?{}:t===an?[]:t}function yV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function vV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function _V(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var ni=class{},mc=class{};var Eg=class extends ni{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ed(this);let i=tD(e);this._bootstrapComponents=ZD(i.bootstrap),this._r3Injector=BD(e,n,[{provide:ni,useValue:this},{provide:zd,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cg=class extends mc{constructor(e){super(),this.moduleType=e}create(e){return new Eg(this.moduleType,e,[])}};var Cd=class extends ni{constructor(e){super(),this.componentFactoryResolver=new Ed(this),this.instance=null;let n=new uc([...e.providers,{provide:ni,useValue:this},{provide:zd,useValue:this.componentFactoryResolver}],e.parent||Ug(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kd(t,e,n=null){return new Cd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ki=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ot(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function x0(t){return IV(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function wV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function IV(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function EV(t,e,n){return t[e]=n}function CV(t,e){return t[e]}function qi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function TV(t,e,n,r){let i=qi(t,e,n);return qi(t,e+1,r)||i}function bV(t){return(t.flags&32)===32}function DV(t,e,n,r,i,s,o,a,c){let l=e.consts,h=$d(e,t,4,o||null,fd(l,a));y0(e,n,h,fd(l,c)),Kg(e,h);let p=h.tView=oy(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function yt(t,e,n,r,i,s,o,a){let c=Re(),l=Gt(),h=t+ei,p=l.firstCreatePass?DV(h,l,c,e,n,r,i,s,o):l.data[h];_c(p,!1);let m=SV(l,c,p,t);Gg()&&iy(l,c,m,p),$i(m,c);let v=w0(m,c,m,p);return c[h]=v,Hd(c,v),dV(v,p,c),Bg(p)&&p0(l,c,p),o!=null&&m0(c,p,a),yt}var SV=AV;function AV(t,e,n,r){return Wg(!0),e[nt].createComment("")}function Qd(t,e,n,r){let i=Re(),s=Fd();if(qi(i,s,e)){let o=Gt(),a=Ld();mL(a,i,t,e,n,r)}return Qd}function P0(t,e,n,r){return qi(t,Fd(),n)?e+fo(n)+r:zn}function RV(t,e,n,r,i,s){let o=U1(),a=TV(t,o,n,i);return CD(2),a?e+fo(n)+r+fo(i)+s:zn}function ed(t,e){return t<<17|e<<2}function zi(t){return t>>17&32767}function NV(t){return(t&2)==2}function MV(t,e){return t&131071|e<<17}function Tg(t){return t|2}function Eo(t){return(t&131068)>>2}function $m(t,e){return t&-131069|e<<2}function xV(t){return(t&1)===1}function bg(t){return t|1}function PV(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=zi(o),c=Eo(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||vc(p,h)>0)&&(l=!0)}else h=n;if(i)if(c!==0){let m=zi(t[a+1]);t[r+1]=ed(m,a),m!==0&&(t[m+1]=$m(t[m+1],r)),t[a+1]=MV(t[a+1],r)}else t[r+1]=ed(a,0),a!==0&&(t[a+1]=$m(t[a+1],r)),a=r;else t[r+1]=ed(c,0),a===0?a=r:t[c+1]=$m(t[c+1],r),c=r;l&&(t[r+1]=Tg(t[r+1])),Nb(t,h,r,!0),Nb(t,h,r,!1),OV(e,h,t,r,s),o=ed(a,c),s?e.classBindings=o:e.styleBindings=o}function OV(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&vc(s,e)>=0&&(n[r+1]=bg(n[r+1]))}function Nb(t,e,n,r){let i=t[n+1],s=e===null,o=r?zi(i):Eo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];kV(c,e)&&(a=!0,t[o+1]=r?bg(l):Tg(l)),o=r?zi(l):Eo(l)}a&&(t[n+1]=r?Tg(i):bg(i))}function kV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?vc(t,e)>=0:!1}function De(t,e,n){let r=Re(),i=Fd();if(qi(r,i,e)){let s=Gt(),o=Ld();ay(s,o,r,t,e,r[nt],n,!1)}return De}function Mb(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";cy(t,n,s[o],o,r)}function Yd(t,e){return FV(t,e,null,!0),Yd}function FV(t,e,n,r){let i=Re(),s=Gt(),o=CD(2);if(s.firstUpdatePass&&VV(s,t,o,r),e!==zn&&qi(i,o,e)){let a=s.data[Gi()];HV(s,a,i,i[nt],t,i[o+1]=qV(e,n),r,o)}}function LV(t,e){return e>=t.expandoStartIndex}function VV(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Gi()],o=LV(t,n);zV(s,r)&&e===null&&!o&&(e=!1),e=UV(i,s,e,r),PV(i,s,e,n,o,r)}}function UV(t,e,n,r){let i=q1(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Hm(null,t,e,n,r),n=gc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Hm(i,t,e,n,r),s===null){let c=jV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Hm(null,t,e,c[1],r),c=gc(c,e.attrs,r),BV(t,e,r,c))}else s=$V(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function jV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Eo(r)!==0)return t[zi(r)]}function BV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[zi(i)]=r}function $V(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=gc(r,o,n)}return gc(r,e.attrs,n)}function Hm(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=gc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function gc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Bk(t,o,n?!0:e[++s]))}return t===void 0?null:t}function HV(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],h=xV(l)?xb(c,e,n,i,Eo(l),o):void 0;if(!Td(h)){Td(s)||NV(l)&&(s=xb(c,null,n,i,a,o));let p=gD(Gi(),n);WF(r,o,p,i,s)}}function xb(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=n[i+1];m===zn&&(m=p?an:void 0);let v=p?xm(m,r):h===r?m:void 0;if(l&&!Td(v)&&(v=xm(c,r)),Td(v)&&(a=v,o))return a;let D=t[i+1];i=o?zi(D):Eo(D)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=xm(c,r))}return a}function Td(t){return t!==void 0}function qV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Vt(Ud(t)))),t}function zV(t,e){return(t.flags&(e?8:16))!==0}function GV(t,e,n,r,i,s){let o=e.consts,a=fd(o,i),c=$d(e,t,2,r,a);return y0(e,n,c,fd(o,s)),c.attrs!==null&&_g(c,c.attrs,!1),c.mergedAttrs!==null&&_g(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function U(t,e,n,r){let i=Re(),s=Gt(),o=ei+t,a=i[nt],c=s.firstCreatePass?GV(o,s,i,e,n,r):s.data[o],l=WV(s,i,c,a,e,t);i[o]=l;let h=Bg(c);return _c(c,!0),a0(a,l,c),!bV(c)&&Gg()&&iy(s,i,l,c),N1()===0&&$i(l,i),M1(),h&&(p0(s,i,c),f0(s,c,i)),r!==null&&m0(i,c),U}function L(){let t=Zt();ED()?L1():(t=t.parent,_c(t,!1));let e=t;O1(e)&&k1(),x1();let n=Gt();return n.firstCreatePass&&(Kg(n,t),dD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&J1(e)&&Mb(n,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&X1(e)&&Mb(n,e,Re(),e.stylesWithoutHost,!1),L}function Fe(t,e,n,r){return U(t,e,n,r),L(),Fe}var WV=(t,e,n,r,i,s)=>(Wg(!0),e0(r,i,W1()));function Jd(){return Re()}var bd="en-US";var KV=bd;function QV(t){typeof t=="string"&&(KV=t.toLowerCase().replace(/_/g,"-"))}function Pe(t,e,n,r){let i=Re(),s=Gt(),o=Zt();return O0(s,i,i[nt],o,t,e,r),Pe}function YV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[lc],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function O0(t,e,n,r,i,s,o){let a=Bg(r),l=t.firstCreatePass&&wL(t),h=e[In],p=_L(e),m=!0;if(r.type&3||o){let N=un(r,e),R=o?o(N):N,x=p.length,q=o?K=>o($n(K[r.index])):r.index,z=null;if(!o&&a&&(z=YV(t,e,i,r.index)),z!==null){let K=z.__ngLastListenerFn__||z;K.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1}else{s=Ob(r,e,h,s,!1);let K=n.listen(R,i,s);p.push(s,K),l&&l.push(i,q,x,x+1)}}else s=Ob(r,e,h,s,!1);let v=r.outputs,D;if(m&&v!==null&&(D=v[i])){let N=D.length;if(N)for(let R=0;R<N;R+=2){let x=D[R],q=D[R+1],ke=e[x][q].subscribe(s),ie=p.length;p.push(s,ke),l&&l.push(i,r.index,ie,-(ie+1))}}}function Pb(t,e,n,r){let i=Te(null);try{return Vn(6,e,n),n(r)!==!1}catch(s){return E0(t,s),!1}finally{Vn(7,e,n),Te(i)}}function Ob(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?ri(t.index,e):e;ly(a);let c=Pb(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=Pb(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Xe(t=1){return G1(t)}function fy(t,e,n){return Xd(t,"",e,"",n),fy}function Xd(t,e,n,r,i){let s=Re(),o=P0(s,e,n,r);if(o!==zn){let a=Gt(),c=Ld();ay(a,c,s,t,o,s[nt],i,!1)}return Xd}function X(t,e=""){let n=Re(),r=Gt(),i=t+ei,s=r.firstCreatePass?$d(r,i,1,e,null):r.data[i],o=JV(r,n,s,e,t);n[i]=o,Gg()&&iy(r,n,o,s),_c(s,!1)}var JV=(t,e,n,r,i)=>(Wg(!0),AF(e[nt],r));function bo(t){return vt("",t,""),bo}function vt(t,e,n){let r=Re(),i=P0(r,t,e,n);return i!==zn&&C0(r,Gi(),i),vt}function py(t,e,n,r,i){let s=Re(),o=RV(s,t,e,n,r,i);return o!==zn&&C0(s,Gi(),o),py}function Qi(t,e,n){M0(e)&&(e=e());let r=Re(),i=Fd();if(qi(r,i,e)){let s=Gt(),o=Ld();ay(s,o,r,t,e,r[nt],n,!1)}return Qi}function Do(t,e){let n=M0(t);return n&&t.set(e),n}function Yi(t,e){let n=Re(),r=Gt(),i=Zt();return O0(r,n,n[nt],i,t,e),Yi}function XV(t,e,n){let r=Gt();if(r.firstCreatePass){let i=ti(t);Dg(n,r.data,r.blueprint,i,!0),Dg(e,r.data,r.blueprint,i,!1)}}function Dg(t,e,n,r,i){if(t=Lt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Dg(t[s],e,n,r,i);else{let s=Gt(),o=Re(),a=Zt(),c=yo(t)?t:Lt(t.provide),l=aD(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(yo(t)||!t.multi){let v=new Bi(l,i,j),D=zm(c,e,i?h:h+m,p);D===-1?(ig(gd(a,o),s,c),qm(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[D]=v,o[D]=v)}else{let v=zm(c,e,h+m,p),D=zm(c,e,h,h+m),N=v>=0&&n[v],R=D>=0&&n[D];if(i&&!R||!i&&!N){ig(gd(a,o),s,c);let x=tU(i?eU:ZV,n.length,i,r,l);!i&&R&&(n[D].providerFactory=x),qm(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),o.push(x)}else{let x=k0(n[i?D:v],l,!i&&r);qm(s,t,v>-1?v:D,x)}!i&&r&&R&&n[D].componentProviders++}}}function qm(t,e,n,r){let i=yo(e),s=u1(e);if(i||s){let c=(s?Lt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,c]):l[h+1].push(r,c)}else l.push(n,c)}}}function k0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function zm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ZV(t,e,n,r){return Sg(this.multi,[])}function eU(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=wo(n,n[me],this.providerFactory.index,r);s=a.slice(0,o),Sg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Sg(i,s);return s}function Sg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tU(t,e,n,r,i){let s=new Bi(t,n,j);return s.multi=[],s.index=e,s.componentProviders=0,k0(s,i,r&&!n),s}function An(t,e=[]){return n=>{n.providersResolver=(r,i)=>XV(r,i?i(t):t,e)}}var nU=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=iD(!1,r.type),s=i.length>0?Kd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=G({token:e,providedIn:"environment",factory:()=>new e(Q(bt))});let t=e;return t})();function We(t){Gd("NgStandalone"),t.getStandaloneInjector=e=>e.get(nU).getOrCreateStandaloneInjector(t)}function F0(t,e,n){let r=V1()+t,i=Re();return i[r]===zn?EV(i,r,n?e.call(n):e()):CV(i,r)}var vr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},L0=new vr("17.3.10"),Zd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var V0=new $("");function Ji(t){return!!t&&typeof t.then=="function"}function U0(t){return!!t&&typeof t.subscribe=="function"}var eh=new $(""),j0=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=P(eh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ji(o))r.push(o);else if(U0(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wc=new $("");function rU(){RT(()=>{throw new W(600,!1)})}function iU(t){return t.isBoundToModule}function sU(t,e,n){try{let r=n();return Ji(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var So=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P($D),this.afterRenderEffectManager=P(hy),this.externalTestViews=new Set,this.beforeRender=new Ft,this.afterTick=new Ft,this.componentTypes=[],this.components=[],this.isStable=P(Ki).hasPendingTasks.pipe(Z(r=>!r)),this._injector=P(bt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Id;if(!this._injector.get(j0).done){let v=!s&&eD(r),D=!1;throw new W(405,D)}let a;s?a=r:a=this._injector.get(zd).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=iU(a)?void 0:this._injector.get(ni),l=i||a.selector,h=a.create(gt.NULL,[],l,c),p=h.location.nativeElement,m=h.injector.get(V0,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Gm(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new W(101,!1);let i=Te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Te(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===b0)throw new W(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)oU(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ag(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ag(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Gm(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(wc,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Gm(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new W(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function oU(t,e,n){!e&&!Ag(t)||aU(t,n,e)}function Ag(t){return Hg(t)}function aU(t,e,n){let r;n?(r=0,t[ne]|=1024):t[ne]&64?r=0:r=1,D0(t,e,r)}var Rg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},th=(()=>{let e=class e{compileModuleSync(r){return new Cg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=tD(r),o=ZD(s.declarations).reduce((a,c)=>{let l=Zr(c);return l&&a.push(new Io(l)),a},[]);return new Rg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var cU=(()=>{let e=class e{constructor(){this.zone=P(ve),this.applicationRef=P(So)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uU(t){return[{provide:ve,useFactory:t},{provide:go,multi:!0,useFactory:()=>{let e=P(cU,{optional:!0});return()=>e.initialize()}},{provide:go,multi:!0,useFactory:()=>{let e=P(fU);return()=>{e.initialize()}}},{provide:$D,useFactory:lU}]}function lU(){let t=P(ve),e=P(Hn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function dU(t){let e=uU(()=>new ve(hU(t)));return zt([[],e])}function hU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var fU=(()=>{let e=class e{constructor(){this.subscription=new Ye,this.initialized=!1,this.zone=P(ve),this.pendingTasks=P(Ki)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pU(){return typeof $localize<"u"&&$localize.locale||bd}var my=new $("",{providedIn:"root",factory:()=>P(my,ue.Optional|ue.SkipSelf)||pU()});var B0=new $("");var sd=null;function mU(t=[],e){return gt.create({name:e,providers:[{provide:Nd,useValue:"platform"},{provide:B0,useValue:new Set([()=>sd=null])},...t]})}function gU(t=[]){if(sd)return sd;let e=mU(t);return sd=e,rU(),yU(e),e}function yU(t){t.get(Xg,null)?.forEach(n=>n())}var Xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vU;let t=e;return t})();function vU(t){return _U(Zt(),Re(),(t&16)===16)}function _U(t,e,n){if(Pd(t)&&!n){let r=ri(t.index,e);return new Hi(r,r)}else if(t.type&47){let r=e[Bn];return new Hi(r,e)}return null}var Ng=class{constructor(){}supports(e){return x0(e)}create(e){return new Mg(e)}},wU=(t,e)=>e,Mg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wU}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<kb(r,i,s)?n:r,a=kb(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,D=v+m;h<=D&&D<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!x0(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,wV(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new xg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},xg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Pg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Dd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Pg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function kb(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Fb(){return new gy([new Ng])}var gy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Fb()),deps:[[e,new kg,new Je]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new W(901,!1)}};e.\u0275prov=G({token:e,providedIn:"root",factory:Fb});let t=e;return t})();function $0(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=gU(r),s=[dU(),...n||[]],a=new Cd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ve);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Hn,null),h;c.runOutsideAngular(()=>{h=c.onError.subscribe({next:v=>{l.handleError(v)}})});let p=()=>a.destroy(),m=i.get(B0);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),sU(l,c,()=>{let v=a.get(j0);return v.runInitializers(),v.donePromise.then(()=>{let D=a.get(my,bd);QV(D||bd);let N=a.get(So);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}function Ic(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function H0(t){let e=Zr(t);if(!e)return null;let n=new Io(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var K0=null;function Cr(){return K0}function Q0(t){K0??=t}var nh=class{};var At=new $(""),Iy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>P(CU),providedIn:"platform"});let t=e;return t})(),Y0=new $(""),CU=(()=>{let e=class e extends Iy{constructor(){super(),this._doc=P(At),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cr().getBaseHref(this._doc)}onPopState(r){let i=Cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Ey(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function q0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Er(t){return t&&t[0]!=="?"?"?"+t:t}var Zi=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>P(Cy),providedIn:"root"});let t=e;return t})(),J0=new $(""),Cy=(()=>{let e=class e extends Zi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(At).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Ey(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Er(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Er(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Er(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Q(Iy),Q(J0,8))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),X0=(()=>{let e=class e extends Zi{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Ey(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Er(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Er(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Q(Iy),Q(J0,8))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Ro=(()=>{let e=class e{constructor(r){this._subject=new ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=DU(q0(z0(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Er(i))}normalize(r){return e.stripTrailingSlash(bU(this._basePath,z0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Er(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Er(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Er,e.joinWithSlash=Ey,e.stripTrailingSlash=q0,e.\u0275fac=function(i){return new(i||e)(Q(Zi))},e.\u0275prov=G({token:e,factory:()=>TU(),providedIn:"root"});let t=e;return t})();function TU(){return new Ro(Q(Zi))}function bU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function z0(t){return t.replace(/\/index.html$/,"")}function DU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function rh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var yy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ih=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new yy(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),G0(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);G0(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(j(To),j(qd),j(gy))},e.\u0275dir=je({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function G0(t,e){t.context.$implicit=e.item}var dn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new vy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){W0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){W0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(j(To),j(qd))},e.\u0275dir=je({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),vy=class{constructor(){this.$implicit=null,this.ngIf=null}};function W0(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Vt(e)}'.`)}var _t=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tn({type:e}),e.\u0275inj=Cn({});let t=e;return t})(),Ty="browser",SU="server";function AU(t){return t===Ty}function sh(t){return t===SU}var Z0=(()=>{let e=class e{};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>AU(P(ln))?new _y(P(At),window):new wy});let t=e;return t})(),_y=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=RU(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function RU(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var wy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ao=class{};var Cc=class{},ah=class{},es=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Dy=class{encodeKey(e){return eS(e)}encodeValue(e){return eS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function xU(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var PU=/%(\d[a-f0-9])/gi,OU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eS(t){return encodeURIComponent(t).replace(PU,(e,n)=>OU[n]??e)}function oh(t){return`${t}`}var si=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Dy,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=xU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(oh):[oh(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(oh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(oh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Sy=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function kU(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function tS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function nS(t){return typeof Blob<"u"&&t instanceof Blob}function rS(t){return typeof FormData<"u"&&t instanceof FormData}function FU(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ec=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(kU(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new es,this.context??=new Sy,!this.params)this.params=new si,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||tS(this.body)||nS(this.body)||rS(this.body)||FU(this.body)?this.body:this.body instanceof si?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||rS(this.body)?null:nS(this.body)?this.body.type||null:tS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof si?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},No=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(No||{}),Tc=class{constructor(e,n=lh.Ok,r="OK"){this.headers=e.headers||new es,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ay=class t extends Tc{constructor(e={}){super(e),this.type=No.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ch=class t extends Tc{constructor(e={}){super(e),this.type=No.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},uh=class extends Tc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},lh=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(lh||{});function by(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var ts=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Ec)o=r;else{let l;s.headers instanceof es?l=s.headers:l=new es(s.headers);let h;s.params&&(s.params instanceof si?h=s.params:h=new si({fromObject:s.params})),o=new Ec(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=J(o).pipe(mr(l=>this.handler.handle(l)));if(r instanceof Ec||s.observe==="events")return a;let c=a.pipe(Ht(l=>l instanceof ch));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(Z(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Z(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Z(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(Z(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new si().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,by(s,i))}post(r,i,s={}){return this.request("POST",r,by(s,i))}put(r,i,s={}){return this.request("PUT",r,by(s,i))}};e.\u0275fac=function(i){return new(i||e)(Q(Cc))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function aS(t,e){return e(t)}function LU(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function VU(t,e,n){return(r,i)=>bn(n,()=>e(r,s=>t(s,i)))}var UU=new $(""),Ry=new $(""),jU=new $(""),BU=new $("");function $U(){let t=null;return(e,n)=>{t===null&&(t=(P(UU,{optional:!0})??[]).reduceRight(LU,aS));let r=P(Ki),i=r.add();return t(e,n).pipe(Yr(()=>r.remove(i)))}}var iS=(()=>{let e=class e extends Cc{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=P(Ki);let s=P(BU,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(Ry),...this.injector.get(jU,[])]));this.chain=s.reduceRight((o,a)=>VU(o,a,this.injector),aS)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Yr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(Q(ah),Q(bt))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();var HU=/^\)\]\}',?\n/;function qU(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var sS=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new W(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?be(i.\u0275loadImpl()):J(null)).pipe(qt(()=>new he(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((R,x)=>a.setRequestHeader(R,x.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let c=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let R=a.statusText||"OK",x=new es(a.getAllResponseHeaders()),q=qU(a)||r.url;return l=new Ay({headers:x,status:a.status,statusText:R,url:q}),l},p=()=>{let{headers:R,status:x,statusText:q,url:z}=h(),K=null;x!==lh.NoContent&&(K=typeof a.response>"u"?a.responseText:a.response),x===0&&(x=K?lh.Ok:0);let ke=x>=200&&x<300;if(r.responseType==="json"&&typeof K=="string"){let ie=K;K=K.replace(HU,"");try{K=K!==""?JSON.parse(K):null}catch(C){K=ie,ke&&(ke=!1,K={error:C,text:K})}}ke?(o.next(new ch({body:K,headers:R,status:x,statusText:q,url:z||void 0})),o.complete()):o.error(new uh({error:K,headers:R,status:x,statusText:q,url:z||void 0}))},m=R=>{let{url:x}=h(),q=new uh({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:x||void 0});o.error(q)},v=!1,D=R=>{v||(o.next(h()),v=!0);let x={type:No.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),r.responseType==="text"&&a.responseText&&(x.partialText=a.responseText),o.next(x)},N=R=>{let x={type:No.UploadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),o.next(x)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",D),c!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(c),o.next({type:No.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",D),c!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(Q(Ao))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),cS=new $(""),zU="XSRF-TOKEN",GU=new $("",{providedIn:"root",factory:()=>zU}),WU="X-XSRF-TOKEN",KU=new $("",{providedIn:"root",factory:()=>WU}),dh=class{},QU=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=rh(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(Q(At),Q(ln),Q(GU))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function YU(t,e){let n=t.url.toLowerCase();if(!P(cS)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=P(dh).getToken(),i=P(KU);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var uS=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(uS||{});function JU(t,e){return{\u0275kind:t,\u0275providers:e}}function XU(...t){let e=[ts,sS,iS,{provide:Cc,useExisting:iS},{provide:ah,useExisting:sS},{provide:Ry,useValue:YU,multi:!0},{provide:cS,useValue:!0},{provide:dh,useClass:QU}];for(let n of t)e.push(...n.\u0275providers);return zt(e)}var oS=new $("");function ZU(){return JU(uS.LegacyInterceptors,[{provide:oS,useFactory:$U},{provide:Ry,useExisting:oS,multi:!0}])}var oi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tn({type:e}),e.\u0275inj=Cn({providers:[XU(ZU())]});let t=e;return t})();var Py=class extends nh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Oy=class t extends Py{static makeCurrent(){Q0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=ej();return n==null?null:tj(n)}resetBaseElement(){bc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rh(document.cookie,e)}},bc=null;function ej(){return bc=bc||document.querySelector("base"),bc?bc.getAttribute("href"):null}function tj(t){return new URL(t,document.baseURI).pathname}var nj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),ky=new $(""),fS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new W(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Q(ky),Q(ve))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),hh=class{constructor(e){this._doc=e}},My="ng-app-id",pS=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=sh(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${My}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(My),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(My,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Q(At),Q(Jg),Q(Zg,8),Q(ln))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),xy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ly=/%COMP%/g,mS="%COMP%",rj=`_nghost-${mS}`,ij=`_ngcontent-${mS}`,sj=!0,oj=new $("",{providedIn:"root",factory:()=>sj});function aj(t){return ij.replace(Ly,t)}function cj(t){return rj.replace(Ly,t)}function gS(t,e){return e.map(n=>n.replace(Ly,t))}var lS=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=sh(c),this.defaultRenderer=new Dc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===jn.ShadowDom&&(i=Ce(V({},i),{encapsulation:jn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof fh?s.applyToHost(r):s instanceof Sc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case jn.Emulated:o=new fh(l,h,i,this.appId,p,a,c,m);break;case jn.ShadowDom:return new Fy(l,h,r,i,a,c,this.nonce,m);default:o=new Sc(l,h,i,p,a,c,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Q(fS),Q(pS),Q(Jg),Q(oj),Q(At),Q(ln),Q(ve),Q(Zg))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Dc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(xy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(dS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(dS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=xy[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=xy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(yr.DashCase|yr.Important)?e.style.setProperty(n,r,i&yr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&yr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Cr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function dS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Fy=class extends Dc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=gS(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sc=class extends Dc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?gS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fh=class extends Sc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=aj(l),this.hostAttr=cj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},uj=(()=>{let e=class e extends hh{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(Q(At))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),hS=["alt","control","meta","shift"],lj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},hj=(()=>{let e=class e extends hh{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),hS.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=lj[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),hS.forEach(a=>{if(a!==s){let c=dj[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Q(At))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function yS(t,e){return $0(V({rootComponent:t},fj(e)))}function fj(t){return{appProviders:[...vj,...t?.providers??[]],platformProviders:yj}}function pj(){Oy.makeCurrent()}function mj(){return new Hn}function gj(){return KD(document),document}var yj=[{provide:ln,useValue:Ty},{provide:Xg,useValue:pj,multi:!0},{provide:At,useFactory:gj,deps:[]}];var vj=[{provide:Nd,useValue:"root"},{provide:Hn,useFactory:mj,deps:[]},{provide:ky,useClass:uj,multi:!0,deps:[At,ve,ln]},{provide:ky,useClass:hj,multi:!0,deps:[At]},lS,pS,fS,{provide:pc,useExisting:lS},{provide:Ao,useClass:nj,deps:[]},[]];var vS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Q(At))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ce="primary",Hc=Symbol("RouteTitle"),$y=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ko(t){return new $y(t)}function wj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ij(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Gn(t[n],e[n]))return!1;return!0}function Gn(t,e){let n=t?Hy(t):void 0,r=e?Hy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!SS(t[i],e[i]))return!1;return!0}function Hy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function SS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function AS(t){return t.length>0?t[t.length-1]:null}function li(t){return bm(t)?t:Ji(t)?be(Promise.resolve(t)):J(t)}var Ej={exact:NS,subset:MS},RS={exact:Cj,subset:Tj,ignored:()=>!0};function _S(t,e,n){return Ej[n.paths](t.root,e.root,n.matrixParams)&&RS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Cj(t,e){return Gn(t,e)}function NS(t,e,n){if(!rs(t.segments,e.segments)||!gh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!NS(t.children[r],e.children[r],n))return!1;return!0}function Tj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>SS(t[n],e[n]))}function MS(t,e,n){return xS(t,e,e.segments,n)}function xS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!rs(i,n)||e.hasChildren()||!gh(i,n,r))}else if(t.segments.length===n.length){if(!rs(t.segments,n)||!gh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!MS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!rs(t.segments,i)||!gh(t.segments,i,r)||!t.children[ce]?!1:xS(t.children[ce],e,s,r)}}function gh(t,e,n){return e.every((r,i)=>RS[n](t[i].parameters,r.parameters))}var ai=class{constructor(e=new Ae([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){return Sj.serialize(this)}},Ae=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yh(this)}},ns=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ko(this.parameters),this._parameterMap}toString(){return OS(this)}};function bj(t,e){return rs(t,e)&&t.every((n,r)=>Gn(n.parameters,e[r].parameters))}function rs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Dj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ce&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ce&&(n=n.concat(e(i,r)))}),n}var qc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new Oc,providedIn:"root"});let t=e;return t})(),Oc=class{parse(e){let n=new zy(e);return new ai(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ac(e.root,!0)}`,r=Nj(e.queryParams),i=typeof e.fragment=="string"?`#${Aj(e.fragment)}`:"";return`${n}${r}${i}`}},Sj=new Oc;function yh(t){return t.segments.map(e=>OS(e)).join("/")}function Ac(t,e){if(!t.hasChildren())return yh(t);if(e){let n=t.children[ce]?Ac(t.children[ce],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${Ac(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Dj(t,(r,i)=>i===ce?[Ac(t.children[ce],!1)]:[`${i}:${Ac(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ce]!=null?`${yh(t)}/${n[0]}`:`${yh(t)}/(${n.join("//")})`}}function PS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ph(t){return PS(t).replace(/%3B/gi,";")}function Aj(t){return encodeURI(t)}function qy(t){return PS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vh(t){return decodeURIComponent(t)}function wS(t){return vh(t.replace(/\+/g,"%20"))}function OS(t){return`${qy(t.path)}${Rj(t.parameters)}`}function Rj(t){return Object.entries(t).map(([e,n])=>`;${qy(e)}=${qy(n)}`).join("")}function Nj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ph(n)}=${ph(i)}`).join("&"):`${ph(n)}=${ph(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Mj=/^[^\/()?;#]+/;function Vy(t){let e=t.match(Mj);return e?e[0]:""}var xj=/^[^\/()?;=#]+/;function Pj(t){let e=t.match(xj);return e?e[0]:""}var Oj=/^[^=?&#]+/;function kj(t){let e=t.match(Oj);return e?e[0]:""}var Fj=/^[^&#]+/;function Lj(t){let e=t.match(Fj);return e?e[0]:""}var zy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ce]=new Ae(e,n)),r}parseSegment(){let e=Vy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new ns(vh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Pj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Vy(this.remaining);i&&(r=i,this.capture(r))}e[vh(n)]=vh(r)}parseQueryParam(e){let n=kj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Lj(this.remaining);o&&(r=o,this.capture(r))}let i=wS(n),s=wS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Vy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ce]:new Ae([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function kS(t){return t.segments.length>0?new Ae([],{[ce]:t}):t}function FS(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=FS(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ae(t.segments,e);return Vj(n)}function Vj(t){if(t.numberOfChildren===1&&t.children[ce]){let e=t.children[ce];return new Ae(t.segments.concat(e.segments),e.children)}return t}function Fo(t){return t instanceof ai}function Uj(t,e,n=null,r=null){let i=LS(t);return VS(i,e,n,r)}function LS(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ae(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=kS(r);return e??i}function VS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Uy(i,i,i,n,r);let s=jj(e);if(s.toRoot())return Uy(i,i,new Ae([],{}),n,r);let o=Bj(s,i,t),a=o.processChildren?Mc(o.segmentGroup,o.index,s.commands):jS(o.segmentGroup,o.index,s.commands);return Uy(i,o.segmentGroup,a,n,r)}function _h(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function kc(t){return typeof t=="object"&&t!=null&&t.outlets}function Uy(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=US(t,e,n);let a=kS(FS(o));return new ai(a,s,i)}function US(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=US(s,e,n)}),new Ae(t.segments,r)}var wh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&_h(r[0]))throw new W(4003,!1);let i=r.find(kc);if(i&&i!==AS(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new wh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new wh(n,e,r)}var Po=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Bj(t,e,n){if(t.isAbsolute)return new Po(e,!0,0);if(!n)return new Po(e,!1,NaN);if(n.parent===null)return new Po(n,!0,0);let r=_h(t.commands[0])?0:1,i=n.segments.length-1+r;return $j(n,i,t.numberOfDoubleDots)}function $j(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Po(r,!1,i-s)}function Hj(t){return kc(t[0])?t[0].outlets:{[ce]:t}}function jS(t,e,n){if(t??=new Ae([],{}),t.segments.length===0&&t.hasChildren())return Mc(t,e,n);let r=qj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ae(t.segments.slice(0,r.pathIndex),{});return s.children[ce]=new Ae(t.segments.slice(r.pathIndex),t.children),Mc(s,0,i)}else return r.match&&i.length===0?new Ae(t.segments,{}):r.match&&!t.hasChildren()?Gy(t,e,n):r.match?Mc(t,0,i):Gy(t,e,n)}function Mc(t,e,n){if(n.length===0)return new Ae(t.segments,{});{let r=Hj(n),i={};if(Object.keys(r).some(s=>s!==ce)&&t.children[ce]&&t.numberOfChildren===1&&t.children[ce].segments.length===0){let s=Mc(t.children[ce],e,n);return new Ae(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=jS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ae(t.segments,i)}}function qj(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(kc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ES(c,l,o))return s;r+=2}else{if(!ES(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(kc(s)){let c=zj(s.outlets);return new Ae(r,c)}if(i===0&&_h(n[0])){let c=t.segments[e];r.push(new ns(c.path,IS(n[0]))),i++;continue}let o=kc(s)?s.outlets[ce]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&_h(a)?(r.push(new ns(o,IS(a))),i+=2):(r.push(new ns(o,{})),i++)}return new Ae(r,{})}function zj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Gy(new Ae([],{}),0,r))}),e}function IS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ES(t,e,n){return t==n.path&&Gn(e,n.parameters)}var xc="imperative",ut=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ut||{}),hn=class{constructor(e,n){this.id=e,this.url=n}},Lo=class extends hn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ut.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},br=class extends hn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(tn||{}),Ih=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ih||{}),ci=class extends hn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ui=class extends hn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationSkipped}},Fc=class extends hn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Eh=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ky=class extends hn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qy=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jy=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xy=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zy=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ev=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tv=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nv=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ch=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ut.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Lc=class{},Vc=class{constructor(e){this.url=e}};var rv=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new zc,this.attachRef=null}},zc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new rv,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Th=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=iv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=iv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=sv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sv(e,this._root).map(n=>n.value)}};function iv(t,e){if(t===e.value)return e;for(let n of e.children){let r=iv(t,n);if(r)return r}return null}function sv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=sv(t,n);if(r.length)return r.unshift(e),r}return[]}var en=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function xo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var bh=class extends Th{constructor(e,n){super(e),this.snapshot=n,mv(this,e)}toString(){return this.snapshot.toString()}};function BS(t){let e=Gj(t),n=new ot([new ns("",{})]),r=new ot({}),i=new ot({}),s=new ot({}),o=new ot(""),a=new is(n,r,s,o,i,ce,t,e.root);return a.snapshot=e.root,new bh(new en(a,[]),e)}function Gj(t){let e={},n={},r={},i="",s=new Uc([],e,r,i,n,ce,t,null,{});return new Dh("",new en(s,[]))}var is=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(l=>l[Hc]))??J(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>ko(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>ko(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pv(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&HS(i)&&(r.resolve[Hc]=i.title),r}var Uc=class{get title(){return this.data?.[Hc]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ko(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Dh=class extends Th{constructor(e,n){super(n),this.url=e,mv(this,n)}toString(){return $S(this._root)}};function mv(t,e){e.value._routerState=t,e.children.forEach(n=>mv(t,n))}function $S(t){let e=t.children.length>0?` { ${t.children.map($S).join(", ")} } `:"";return`${t.value}${e}`}function jy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Gn(e.params,n.params)||t.paramsSubject.next(n.params),Ij(e.url,n.url)||t.urlSubject.next(n.url),Gn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ov(t,e){let n=Gn(t.params,e.params)&&bj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||ov(t.parent,e.parent))}function HS(t){return typeof t.title=="string"||t.title===null}var gv=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new ze,this.deactivateEvents=new ze,this.attachEvents=new ze,this.detachEvents=new ze,this.parentContexts=P(zc),this.location=P(To),this.changeDetector=P(Xi),this.environmentInjector=P(bt),this.inputBinder=P(Nh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new av(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sn]});let t=e;return t})(),av=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===is?this.route:e===zc?this.childContexts:this.parent.get(e,n)}},Nh=new $(""),CS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=sc([i.queryParams,i.params,i.data]).pipe(qt(([o,a,c],l)=>(c=V(V(V({},o),a),c),l===0?J(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=H0(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function Wj(t,e,n){let r=jc(t,e._root,n?n._root:void 0);return new bh(r,e)}function jc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Kj(t,e,n);return new en(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>jc(t,a)),o}}let r=Qj(e.value),i=e.children.map(s=>jc(t,s));return new en(r,i)}}function Kj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return jc(t,r,i);return jc(t,r)})}function Qj(t){return new is(new ot(t.url),new ot(t.params),new ot(t.queryParams),new ot(t.fragment),new ot(t.data),t.outlet,t.component,t)}var qS="ngNavigationCancelingError";function zS(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Fo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GS(!1,tn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function GS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[qS]=!0,n.cancellationCode=e,n}function Yj(t){return WS(t)&&Fo(t.url)}function WS(t){return!!t&&t[qS]}var Jj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ge({type:e,selectors:[["ng-component"]],standalone:!0,features:[We],decls:1,vars:0,template:function(i,s){i&1&&Fe(0,"router-outlet")},dependencies:[gv],encapsulation:2});let t=e;return t})();function Xj(t,e){return t.providers&&!t._injector&&(t._injector=Kd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function yv(t){let e=t.children&&t.children.map(yv),n=e?Ce(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ce&&(n.component=Jj),n}function Wn(t){return t.outlet||ce}function Zj(t,e){let n=t.filter(r=>Wn(r)===e);return n.push(...t.filter(r=>Wn(r)!==e)),n}function Gc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var e2=(t,e,n,r)=>Z(i=>(new cv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),cv=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),jy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=xo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=xo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new nv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ev(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(jy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),jy(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Gc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Sh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Oo=class{constructor(e,n){this.component=e,this.route=n}};function t2(t,e,n){let r=t._root,i=e?e._root:null;return Rc(r,i,n,[r.value])}function n2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Uo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!jb(t)?t:e.get(t):r}function Rc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=xo(e);return t.children.forEach(o=>{r2(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Pc(a,n.getContext(o),i)),i}function r2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=i2(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Sh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Rc(t,e,a?a.children:null,r,i):Rc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Oo(a.outlet.component,o))}else o&&Pc(e,a,i),i.canActivateChecks.push(new Sh(r)),s.component?Rc(t,null,a?a.children:null,r,i):Rc(t,null,n,r,i);return i}function i2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!rs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rs(t.url,e.url)||!Gn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ov(t,e)||!Gn(t.queryParams,e.queryParams);case"paramsChange":default:return!ov(t,e)}}function Pc(t,e,n){let r=xo(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Pc(o,e.children.getContext(s),n):Pc(o,null,n):Pc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Oo(e.outlet.component,i)):n.canDeactivateChecks.push(new Oo(null,i)):n.canDeactivateChecks.push(new Oo(null,i))}function Wc(t){return typeof t=="function"}function s2(t){return typeof t=="boolean"}function o2(t){return t&&Wc(t.canLoad)}function a2(t){return t&&Wc(t.canActivate)}function c2(t){return t&&Wc(t.canActivateChild)}function u2(t){return t&&Wc(t.canDeactivate)}function l2(t){return t&&Wc(t.canMatch)}function KS(t){return t instanceof pr||t?.name==="EmptyError"}var mh=Symbol("INITIAL_VALUE");function Vo(){return qt(t=>sc(t.map(e=>e.pipe(gr(1),Nm(mh)))).pipe(Z(e=>{for(let n of e)if(n!==!0){if(n===mh)return mh;if(n===!1||n instanceof ai)return n}return!0}),Ht(e=>e!==mh),gr(1)))}function d2(t,e){return et(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?J(Ce(V({},n),{guardsResult:!0})):h2(o,r,i,t).pipe(et(a=>a&&s2(a)?f2(r,s,t,e):J(a)),Z(a=>Ce(V({},n),{guardsResult:a})))})}function h2(t,e,n,r){return be(t).pipe(et(i=>v2(i.component,i.route,n,e,r)),Ln(i=>i!==!0,!0))}function f2(t,e,n,r){return be(e).pipe(mr(i=>io(m2(i.route.parent,r),p2(i.route,r),y2(t,i.path,n),g2(t,i.route,n))),Ln(i=>i!==!0,!0))}function p2(t,e){return t!==null&&e&&e(new tv(t)),J(!0)}function m2(t,e){return t!==null&&e&&e(new Zy(t)),J(!0)}function g2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(s=>Ql(()=>{let o=Gc(e)??n,a=Uo(s,o),c=a2(a)?a.canActivate(e,t):bn(o,()=>a(e,t));return li(c).pipe(Ln())}));return J(i).pipe(Vo())}function y2(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>n2(o)).filter(o=>o!==null).map(o=>Ql(()=>{let a=o.guards.map(c=>{let l=Gc(o.node)??n,h=Uo(c,l),p=c2(h)?h.canActivateChild(r,t):bn(l,()=>h(r,t));return li(p).pipe(Ln())});return J(a).pipe(Vo())}));return J(s).pipe(Vo())}function v2(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(a=>{let c=Gc(e)??i,l=Uo(a,c),h=u2(l)?l.canDeactivate(t,e,n,r):bn(c,()=>l(t,e,n,r));return li(h).pipe(Ln())});return J(o).pipe(Vo())}function _2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let s=i.map(o=>{let a=Uo(o,t),c=o2(a)?a.canLoad(e,n):bn(t,()=>a(e,n));return li(c)});return J(s).pipe(Vo(),QS(r))}function QS(t){return ym(tt(e=>{if(Fo(e))throw zS(t,e)}),Z(e=>e===!0))}function w2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let s=i.map(o=>{let a=Uo(o,t),c=l2(a)?a.canMatch(e,n):bn(t,()=>a(e,n));return li(c)});return J(s).pipe(Vo(),QS(r))}var Bc=class{constructor(e){this.segmentGroup=e||null}},Ah=class extends Error{constructor(e){super(),this.urlTree=e}};function Mo(t){return no(new Bc(t))}function I2(t){return no(new W(4e3,!1))}function E2(t){return no(GS(!1,tn.GuardRejected))}var uv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[ce])return I2(e.redirectTo);i=i.children[ce]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ah(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ai(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ae(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},lv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function C2(t,e,n,r,i){let s=vv(t,e,n);return s.matched?(r=Xj(e,r),w2(r,e,n,i).pipe(Z(o=>o===!0?s:V({},lv)))):J(s)}function vv(t,e,n){if(e.path==="**")return T2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},lv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wj)(n,t,e);if(!i)return V({},lv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function T2(t){return{matched:!0,parameters:t.length>0?AS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function TS(t,e,n,r){return n.length>0&&S2(t,n,r)?{segmentGroup:new Ae(e,D2(r,new Ae(n,t.children))),slicedSegments:[]}:n.length===0&&A2(t,n,r)?{segmentGroup:new Ae(t.segments,b2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ae(t.segments,t.children),slicedSegments:n}}function b2(t,e,n,r){let i={};for(let s of n)if(Mh(t,e,s)&&!r[Wn(s)]){let o=new Ae([],{});i[Wn(s)]=o}return V(V({},r),i)}function D2(t,e){let n={};n[ce]=e;for(let r of t)if(r.path===""&&Wn(r)!==ce){let i=new Ae([],{});n[Wn(r)]=i}return n}function S2(t,e,n){return n.some(r=>Mh(t,e,r)&&Wn(r)!==ce)}function A2(t,e,n){return n.some(r=>Mh(t,e,r))}function Mh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function R2(t,e,n,r){return Wn(t)!==r&&(r===ce||!Mh(e,n,t))?!1:vv(e,t,n).matched}function N2(t,e,n){return e.length===0&&!t.children[n]}var dv=class{};function M2(t,e,n,r,i,s,o="emptyOnly"){return new hv(t,e,n,r,i,o,s).recognize()}var x2=31,hv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new uv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=TS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(n=>{let r=new Uc([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,{},ce,this.rootComponentType,null,{}),i=new en(r,n),s=new Dh("",i),o=Uj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ce).pipe(Kr(r=>{if(r instanceof Ah)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=pv(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Z(s=>s instanceof en?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return be(i).pipe(mr(s=>{let o=r.children[s],a=Zj(n,s);return this.processSegmentGroup(e,a,o,s)}),Rm((s,o)=>(s.push(...o),s)),Qr(null),Am(),et(s=>{if(s===null)return Mo(r);let o=YS(s);return P2(o),J(o)}))}processSegment(e,n,r,i,s,o){return be(n).pipe(mr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Kr(c=>{if(c instanceof Bc)return J(null);throw c}))),Ln(a=>!!a),Kr(a=>{if(KS(a))return N2(r,i,s)?J(new dv):Mo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return R2(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Mo(i):Mo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:h}=vv(n,i,s);if(!a)return Mo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>x2&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(et(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=C2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(qt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(qt(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,v=new Uc(h,m,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,k2(r),Wn(r),r.component??r._loadedComponent??null,r,F2(r)),{segmentGroup:D,slicedSegments:N}=TS(n,h,p,c);if(N.length===0&&D.hasChildren())return this.processChildren(l,c,D).pipe(Z(x=>x===null?null:new en(v,x)));if(c.length===0&&N.length===0)return J(new en(v,[]));let R=Wn(r)===s;return this.processSegment(l,c,D,N,R?ce:s,!0).pipe(Z(x=>new en(v,x instanceof en?[x]:[])))}))):Mo(n)))}getChildConfig(e,n,r){return n.children?J({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):_2(e,n,r,this.urlSerializer).pipe(et(i=>i?this.configLoader.loadChildren(e,n).pipe(tt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):E2(n))):J({routes:[],injector:e})}};function P2(t){t.sort((e,n)=>e.value.outlet===ce?-1:n.value.outlet===ce?1:e.value.outlet.localeCompare(n.value.outlet))}function O2(t){let e=t.value.routeConfig;return e&&e.path===""}function YS(t){let e=[],n=new Set;for(let r of t){if(!O2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=YS(r.children);e.push(new en(r.value,i))}return e.filter(r=>!n.has(r))}function k2(t){return t.data||{}}function F2(t){return t.resolve||{}}function L2(t,e,n,r,i,s){return et(o=>M2(t,e,n,r,o.extractedUrl,i,s).pipe(Z(({state:a,tree:c})=>Ce(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function V2(t,e){return et(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return J(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of JS(c))o.add(l);let a=0;return be(o).pipe(mr(c=>s.has(c)?U2(c,r,t,e):(c.data=pv(c,c.parent,t).resolve,J(void 0))),tt(()=>a++),so(1),et(c=>a===o.size?J(n):Jt))})}function JS(t){let e=t.children.map(n=>JS(n)).flat();return[t,...e]}function U2(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!HS(i)&&(s[Hc]=i.title),j2(s,t,e,r).pipe(Z(o=>(t._resolvedData=o,t.data=pv(t,t.parent,n).resolve,null)))}function j2(t,e,n,r){let i=Hy(t);if(i.length===0)return J({});let s={};return be(i).pipe(et(o=>B2(t[o],e,n,r).pipe(Ln(),tt(a=>{s[o]=a}))),so(1),Sm(s),Kr(o=>KS(o)?Jt:no(o)))}function B2(t,e,n,r){let i=Gc(e)??r,s=Uo(t,i),o=s.resolve?s.resolve(e,n):bn(i,()=>s(e,n));return li(o)}function By(t){return qt(e=>{let n=t(e);return n?be(n).pipe(Z(()=>e)):J(e)})}var XS=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ce);return i}getResolvedTitleForRoute(r){return r.data[Hc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>P($2),providedIn:"root"});let t=e;return t})(),$2=(()=>{let e=class e extends XS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Q(vS))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kc=new $("",{providedIn:"root",factory:()=>({})}),$c=new $(""),_v=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(th)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return J(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=li(r.loadComponent()).pipe(Z(ZS),tt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Yr(()=>{this.componentLoaders.delete(r)})),s=new Xs(i,()=>new Ft).pipe(Js());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return J({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=H2(i,this.compiler,r,this.onLoadEndListener).pipe(Yr(()=>{this.childrenLoaders.delete(i)})),a=new Xs(o,()=>new Ft).pipe(Js());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H2(t,e,n,r){return li(t.loadChildren()).pipe(Z(ZS),et(i=>i instanceof mc||Array.isArray(i)?J(i):be(e.compileModuleAsync(i))),Z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get($c,[],{optional:!0,self:!0}).flat()),{routes:o.map(yv),injector:s}}))}function q2(t){return t&&typeof t=="object"&&"default"in t}function ZS(t){return q2(t)?t.default:t}var wv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>P(z2),providedIn:"root"});let t=e;return t})(),z2=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eA=new $(""),tA=new $("");function G2(t,e,n){let r=t.get(tA),i=t.get(At);return t.get(ve).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),W2(t))),{onViewTransitionCreated:c}=r;return c&&bn(t,()=>c({transition:a,from:e,to:n})),o})}function W2(t){return new Promise(e=>{Wd(e,{injector:t})})}var Iv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ft,this.transitionAbortSubject=new Ft,this.configLoader=P(_v),this.environmentInjector=P(bt),this.urlSerializer=P(qc),this.rootContexts=P(zc),this.location=P(Ro),this.inputBindingEnabled=P(Nh,{optional:!0})!==null,this.titleStrategy=P(XS),this.options=P(Kc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(wv),this.createViewTransition=P(eA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Jy(s)),i=s=>this.events.next(new Xy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ce(V(V({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ot({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:xc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ht(o=>o.id!==0),Z(o=>Ce(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),qt(o=>{let a=!1,c=!1;return J(o).pipe(qt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),Jt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ce(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new ui(l.id,this.urlSerializer.serialize(l.rawUrl),m,Ih.IgnoredSameUrlNavigation)),l.resolve(null),Jt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return J(l).pipe(qt(m=>{let v=this.transitions?.getValue();return this.events.next(new Lo(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?Jt:Promise.resolve(m)}),L2(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Ce(V({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new Eh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:v,source:D,restoredState:N,extras:R}=l,x=new Lo(m,this.urlSerializer.serialize(v),D,N);this.events.next(x);let q=BS(this.rootComponentType).snapshot;return this.currentTransition=o=Ce(V({},l),{targetSnapshot:q,urlAfterRedirects:v,extras:Ce(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,J(o)}else{let m="";return this.events.next(new ui(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Ih.IgnoredByUrlHandlingStrategy)),l.resolve(null),Jt}}),tt(l=>{let h=new Wy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Z(l=>(this.currentTransition=o=Ce(V({},l),{guards:t2(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),d2(this.environmentInjector,l=>this.events.next(l)),tt(l=>{if(o.guardsResult=l.guardsResult,Fo(l.guardsResult))throw zS(this.urlSerializer,l.guardsResult);let h=new Ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Ht(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",tn.GuardRejected),!1)),By(l=>{if(l.guards.canActivateChecks.length)return J(l).pipe(tt(h=>{let p=new Qy(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),qt(h=>{let p=!1;return J(h).pipe(V2(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",tn.NoDataFromResolver)}}))}),tt(h=>{let p=new Yy(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),By(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(tt(v=>{p.component=v}),Z(()=>{})));for(let v of p.children)m.push(...h(v));return m};return sc(h(l.targetSnapshot.root)).pipe(Qr(null),gr(1))}),By(()=>this.afterPreactivation()),qt(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?be(p).pipe(Z(()=>o)):J(o)}),Z(l=>{let h=Wj(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ce(V({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),tt(()=>{this.events.next(new Lc)}),e2(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),gr(1),tt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new br(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Mm(this.transitionAbortSubject.pipe(tt(l=>{throw l}))),Yr(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kr(l=>{if(c=!0,WS(l))this.events.next(new ci(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Yj(l)?this.events.next(new Vc(l.url)):o.resolve(!1);else{this.events.next(new Fc(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Jt}))}))}cancelNavigationTransition(r,i,s){let o=new ci(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function K2(t){return t!==xc}var Q2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>P(Y2),providedIn:"root"});let t=e;return t})(),fv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Y2=(()=>{let e=class e extends fv{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>P(J2),providedIn:"root"});let t=e;return t})(),J2=(()=>{let e=class e extends nA{constructor(){super(...arguments),this.location=P(Ro),this.urlSerializer=P(qc),this.options=P(Kc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(wv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ai,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=BS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Lo)this.stateMemento=this.createStateMemento();else if(r instanceof ui)this.rawUrlTree=i.initialUrl;else if(r instanceof Eh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Lc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ci&&(r.code===tn.GuardRejected||r.code===tn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Fc?this.restoreHistory(i,!0):r instanceof br&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=V(V({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=V(V({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Nc||{});function rA(t,e){t.events.pipe(Ht(n=>n instanceof br||n instanceof ci||n instanceof Fc||n instanceof ui),Z(n=>n instanceof br||n instanceof ui?Nc.COMPLETE:(n instanceof ci?n.code===tn.Redirect||n.code===tn.SupersededByNewNavigation:!1)?Nc.REDIRECTING:Nc.FAILED),Ht(n=>n!==Nc.REDIRECTING),gr(1)).subscribe(()=>{e()})}function X2(t){throw t}var Z2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ct=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=P(Zd),this.stateManager=P(nA),this.options=P(Kc,{optional:!0})||{},this.pendingTasks=P(Ki),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(Iv),this.urlSerializer=P(qc),this.location=P(Ro),this.urlHandlingStrategy=P(wv),this._events=new Ft,this.errorHandler=this.options.errorHandler||X2,this.navigated=!1,this.routeReuseStrategy=P(Q2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P($c,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Nh,{optional:!0}),this.eventsSubscription=new Ye,this.isNgZoneEnabled=P(ve)instanceof ve&&ve.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ci&&i.code!==tn.Redirect&&i.code!==tn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof br)this.navigated=!0;else if(i instanceof Vc){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||K2(s.source)};this.scheduleNavigation(a,xc,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}nB(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=V({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(yv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(c){case"merge":p=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=s?s.snapshot:this.routerState.snapshot.root;m=LS(v)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return VS(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Fo(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,xc,null,i)}navigate(r,i={skipLocationChange:!1}){return tB(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=V({},Z2):i===!1?s=V({},eB):s=i,Fo(r))return _S(this.currentUrlTree,r,s);let o=this.parseUrl(r);return _S(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,h;a?(c=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,v)=>{c=m,l=v});let p=this.pendingTasks.add();return rA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function nB(t){return!(t instanceof Lc)&&!(t instanceof Vc)}var Rh=class{};var rB=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ht(r=>r instanceof br),mr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Kd(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return be(s).pipe(ro())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=J(null);let o=s.pipe(et(a=>a===null?J(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return be([o,a]).pipe(ro())}else return o})}};e.\u0275fac=function(i){return new(i||e)(Q(ct),Q(th),Q(bt),Q(Rh),Q(_v))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iA=new $(""),iB=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=P(bt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Lo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof br?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof ui&&r.code===Ih.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ch&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>I(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Wd(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Ch(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){u0()},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function sA(t,...e){return zt([{provide:$c,multi:!0,useValue:t},[],{provide:is,useFactory:oA,deps:[ct]},{provide:wc,multi:!0,useFactory:aA},e.map(n=>n.\u0275providers)])}function oA(t){return t.routerState.root}function Qc(t,e){return{\u0275kind:t,\u0275providers:e}}function aA(){let t=P(gt);return e=>{let n=t.get(So);if(e!==n.components[0])return;let r=t.get(ct),i=t.get(cA);t.get(Ev)===1&&r.initialNavigation(),t.get(uA,null,ue.Optional)?.setUpPreloading(),t.get(iA,null,ue.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cA=new $("",{factory:()=>new Ft}),Ev=new $("",{providedIn:"root",factory:()=>1});function sB(){return Qc(2,[{provide:Ev,useValue:0},{provide:eh,multi:!0,deps:[gt],useFactory:e=>{let n=e.get(Y0,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ct),s=e.get(cA);rA(i,()=>{r(!0)}),e.get(Iv).afterPreactivation=()=>(r(!0),s.closed?J(void 0):s),i.initialNavigation()}))}}])}function oB(){return Qc(3,[{provide:eh,multi:!0,useFactory:()=>{let e=P(ct);return()=>{e.setUpLocationChangeListener()}}},{provide:Ev,useValue:2}])}var uA=new $("");function aB(t){return Qc(0,[{provide:uA,useExisting:rB},{provide:Rh,useExisting:t}])}function cB(){return Qc(8,[CS,{provide:Nh,useExisting:CS}])}function uB(t){let e=[{provide:eA,useValue:G2},{provide:tA,useValue:V({skipNextTransition:!!t?.skipInitialTransition},t)}];return Qc(9,e)}var bS=new $("ROUTER_FORROOT_GUARD"),lB=[Ro,{provide:qc,useClass:Oc},ct,zc,{provide:is,useFactory:oA,deps:[ct]},_v,[]],lA=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[lB,[],{provide:$c,multi:!0,useValue:r},{provide:bS,useFactory:pB,deps:[[ct,new Je,new kg]]},{provide:Kc,useValue:i||{}},i?.useHash?hB():fB(),dB(),i?.preloadingStrategy?aB(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?mB(i):[],i?.bindToComponentInputs?cB().\u0275providers:[],i?.enableViewTransitions?uB().\u0275providers:[],gB()]}}static forChild(r){return{ngModule:e,providers:[{provide:$c,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(Q(bS,8))},e.\u0275mod=Tn({type:e}),e.\u0275inj=Cn({});let t=e;return t})();function dB(){return{provide:iA,useFactory:()=>{let t=P(Z0),e=P(ve),n=P(Kc),r=P(Iv),i=P(qc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new iB(i,r,t,e,n)}}}function hB(){return{provide:Zi,useClass:X0}}function fB(){return{provide:Zi,useClass:Cy}}function pB(t){return"guarded"}function mB(t){return[t.initialNavigation==="disabled"?oB().\u0275providers:[],t.initialNavigation==="enabledBlocking"?sB().\u0275providers:[]]}var DS=new $("");function gB(){return[{provide:DS,useFactory:aA},{provide:wc,multi:!0,useExisting:DS}]}var Tv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var F=function(t,e){if(!t)throw os(e)},os=function(t){return new Error("Firebase Database ("+Tv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var hA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yB=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Oh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;c||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new bv;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},bv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Sv=function(t){let e=hA(t);return Oh.encodeByteArray(e,!0)},Yc=function(t){return Sv(t).replace(/\./g,"")},Jc=function(t){try{return Oh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fA(t){return pA(void 0,t)}function pA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!vB(n)||(t[n]=pA(t[n],e[n]));return t}function vB(t){return t!=="__proto__"}function _B(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wB=()=>_B().__FIREBASE_DEFAULTS__,IB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Jc(t[1]);return e&&JSON.parse(e)},kh=()=>{try{return wB()||IB()||EB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Av=t=>{var e,n;return(n=(e=kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Fh=t=>{let e=Av(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rv=()=>{var t;return(t=kh())===null||t===void 0?void 0:t.config},Nv=t=>{var e;return(e=kh())===null||e===void 0?void 0:e[`_${t}`]};var ss=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Lh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yc(JSON.stringify(n)),Yc(JSON.stringify(o)),""].join(".")}function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function CB(){var t;let e=(t=kh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gA(){let t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Kn(){return Tv.NODE_CLIENT===!0||Tv.NODE_ADMIN===!0}function yA(){return!CB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mv(){try{return typeof indexedDB=="object"}catch{return!1}}function vA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var TB="FirebaseError",nn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TB,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dr.prototype.create)}},Dr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bB(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new nn(i,a,r)}};function bB(t,e){return t.replace(DB,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var DB=/\{\$([^}]+)}/g;function jo(t){return JSON.parse(t)}function lt(t){return JSON.stringify(t)}var _A=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=jo(Jc(s[0])||""),n=jo(Jc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var wA=function(t){let e=_A(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},IA=function(t){let e=_A(t).claims;return typeof e=="object"&&e.admin===!0};function Qn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function as(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Zc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function eu(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function cs(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(dA(s)&&dA(o)){if(!cs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function dA(t){return t!==null&&typeof t=="object"}function us(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function $o(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Ph=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,h;for(let p=0;p<80;p++){p<40?p<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):p<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);let m=(i<<5|i>>>27)+l+c+h+r[p]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function EA(t,e){let n=new Dv(t,e);return n.subscribe.bind(n)}var Dv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cv),i.error===void 0&&(i.error=Cv),i.complete===void 0&&(i.complete=Cv);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function SB(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cv(){}function CA(t,e){return`${t} failed: ${e} argument `}var TA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,F(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tu=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var LJ=4*60*60*1e3;function dt(t){return t&&t._delegate?t._delegate:t}var Wt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ls="[DEFAULT]";var Uh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ss;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RB(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AB(t){return t===ls?void 0:t}function RB(t){return t.instantiationMode==="EAGER"}var nu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Uh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var NB=[],de=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(de||{}),MB={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},xB=de.INFO,PB={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},OB=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=PB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yn=class{constructor(e){this.name=e,this._logLevel=xB,this._logHandler=OB,this._userLogHandler=null,NB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var kB=(t,e)=>e.some(n=>t instanceof n),bA,DA;function FB(){return bA||(bA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LB(){return DA||(DA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var SA=new WeakMap,Pv=new WeakMap,AA=new WeakMap,xv=new WeakMap,kv=new WeakMap;function VB(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Jn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SA.set(n,t)}).catch(()=>{}),kv.set(e,t),e}function UB(t){if(Pv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Pv.set(t,e)}var Ov={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RA(t){Ov=t(Ov)}function jB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(jh(this),e,...n);return AA.set(r,e.sort?e.sort():[e]),Jn(r)}:LB().includes(t)?function(...e){return t.apply(jh(this),e),Jn(SA.get(this))}:function(...e){return Jn(t.apply(jh(this),e))}}function BB(t){return typeof t=="function"?jB(t):(t instanceof IDBTransaction&&UB(t),kB(t,FB())?new Proxy(t,Ov):t)}function Jn(t){if(t instanceof IDBRequest)return VB(t);if(xv.has(t))return xv.get(t);let e=BB(t);return e!==t&&(xv.set(t,e),kv.set(e,t)),e}var jh=t=>kv.get(t);function MA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Jn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Jn(o.result),c.oldVersion,c.newVersion,Jn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var $B=["get","getKey","getAll","getAllKeys","count"],HB=["put","add","delete","clear"],Fv=new Map;function NA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fv.get(e))return Fv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=HB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$B.includes(n)))return;let s=function(o,...a){return I(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Fv.set(e,s),s}RA(t=>Ce(V({},t),{get:(e,n,r)=>NA(e,n)||t.get(e,n,r),has:(e,n)=>!!NA(e,n)||t.has(e,n)}));var Vv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function qB(t){let e=t.getComponent();return e?.type==="VERSION"}var Uv="@firebase/app",xA="0.10.4";var ds=new Yn("@firebase/app"),zB="@firebase/app-compat",GB="@firebase/analytics-compat",WB="@firebase/analytics",KB="@firebase/app-check-compat",QB="@firebase/app-check",YB="@firebase/auth",JB="@firebase/auth-compat",XB="@firebase/database",ZB="@firebase/database-compat",e$="@firebase/functions",t$="@firebase/functions-compat",n$="@firebase/installations",r$="@firebase/installations-compat",i$="@firebase/messaging",s$="@firebase/messaging-compat",o$="@firebase/performance",a$="@firebase/performance-compat",c$="@firebase/remote-config",u$="@firebase/remote-config-compat",l$="@firebase/storage",d$="@firebase/storage-compat",h$="@firebase/firestore",f$="@firebase/vertexai-preview",p$="@firebase/firestore-compat",m$="firebase",g$="10.12.1";var jv="[DEFAULT]",y$={[Uv]:"fire-core",[zB]:"fire-core-compat",[WB]:"fire-analytics",[GB]:"fire-analytics-compat",[QB]:"fire-app-check",[KB]:"fire-app-check-compat",[YB]:"fire-auth",[JB]:"fire-auth-compat",[XB]:"fire-rtdb",[ZB]:"fire-rtdb-compat",[e$]:"fire-fn",[t$]:"fire-fn-compat",[n$]:"fire-iid",[r$]:"fire-iid-compat",[i$]:"fire-fcm",[s$]:"fire-fcm-compat",[o$]:"fire-perf",[a$]:"fire-perf-compat",[c$]:"fire-rc",[u$]:"fire-rc-compat",[l$]:"fire-gcs",[d$]:"fire-gcs-compat",[h$]:"fire-fst",[p$]:"fire-fst-compat",[f$]:"fire-vertex","fire-js":"fire-js",[m$]:"fire-js-all"};var ru=new Map,v$=new Map,Bv=new Map;function PA(t,e){try{t.container.addComponent(e)}catch(n){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xn(t){let e=t.name;if(Bv.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Bv.set(e,t);for(let n of ru.values())PA(n,t);for(let n of v$.values())PA(n,t);return!0}function hs(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}var _$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new Dr("app","Firebase",_$);var $v=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}};var er=g$;function zv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:jv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(n||(n=Rv()),!n)throw di.create("no-options");let s=ru.get(i);if(s){if(cs(n,s.options)&&cs(r,s.config))return s;throw di.create("duplicate-app",{appName:i})}let o=new nu(i);for(let c of Bv.values())o.addComponent(c);let a=new $v(n,r,o);return ru.set(i,a),a}function hi(t=jv){let e=ru.get(t);if(!e&&t===jv&&Rv())return zv();if(!e)throw di.create("no-app",{appName:t});return e}function Bh(){return Array.from(ru.values())}function Be(t,e,n){var r;let i=(r=y$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(a.join(" "));return}Xn(new Wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var w$="firebase-heartbeat-database",I$=1,iu="firebase-heartbeat-store",Lv=null;function LA(){return Lv||(Lv=MA(w$,I$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(iu)}catch(n){console.warn(n)}}}}).catch(t=>{throw di.create("idb-open",{originalErrorMessage:t.message})})),Lv}function E$(t){return I(this,null,function*(){try{let n=(yield LA()).transaction(iu),r=yield n.objectStore(iu).get(VA(t));return yield n.done,r}catch(e){if(e instanceof nn)ds.warn(e.message);else{let n=di.create("idb-get",{originalErrorMessage:e?.message});ds.warn(n.message)}}})}function OA(t,e){return I(this,null,function*(){try{let r=(yield LA()).transaction(iu,"readwrite");yield r.objectStore(iu).put(e,VA(t)),yield r.done}catch(n){if(n instanceof nn)ds.warn(n.message);else{let r=di.create("idb-set",{originalErrorMessage:n?.message});ds.warn(r.message)}}})}function VA(t){return`${t.name}!${t.options.appId}`}var C$=1024,T$=30*24*60*60*1e3,Hv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new qv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kA();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=T$}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return I(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=kA(),{heartbeatsToSend:r,unsentEntries:i}=b$(this._heartbeatsCache.heartbeats),s=Yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function kA(){return new Date().toISOString().substring(0,10)}function b$(t,e=C$){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),FA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),FA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var qv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Mv()?vA().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield E$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function FA(t){return Yc(JSON.stringify({version:2,heartbeats:t})).length}function D$(t){Xn(new Wt("platform-logger",e=>new Vv(e),"PRIVATE")),Xn(new Wt("heartbeat",e=>new Hv(e),"PRIVATE")),Be(Uv,xA,t),Be(Uv,xA,"esm2017"),Be("fire-js","")}D$("");var S$="firebase",A$="10.12.1";Be(S$,A$,"app");var Sr=new vr("ANGULARFIRE2_VERSION");function qo(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ps=(t,e)=>{let n=e?[e]:Bh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},fi=class{constructor(){return ps(R$)}},R$="app-check";function Ho(){}var $h=class{zone;delegate;constructor(e,n=Cm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Gv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ho,{},Ho,Ho)),n.pipe(tt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},pi=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new $h(Zone.current)),this.insideAngular=n.run(()=>new $h(Zone.current,Em)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Q(ve))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Hh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function N$(t){return Hh().ngZone.runOutsideAngular(()=>t())}function fs(t){return Hh().ngZone.run(()=>t())}function M$(t){return x$(Hh())(t)}function x$(t){return function(n){return n=n.lift(new Gv(t.ngZone)),n.pipe(Wr(t.outsideAngular),Gr(t.insideAngular))}}var P$=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),fs(()=>t.apply(void 0,r))},Rn=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=fs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ho,{},Ho,Ho))),r[s]=P$(r[s],n));let i=N$(()=>t.apply(this,r));if(!e)if(i instanceof he){let s=Hh();return i.pipe(Wr(s.outsideAngular),Gr(s.insideAngular))}else return fs(()=>i);return i instanceof he?i.pipe(M$):i instanceof Promise?fs(()=>new Promise((s,o)=>i.then(a=>fs(()=>s(a)),a=>fs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:fs(()=>i)};var Nn=class{constructor(e){return e}},Ar=class{constructor(){return Bh()}};function O$(t){return t&&t.length===1?t[0]:new Nn(hi())}var Wv=new $("angularfire2._apps"),k$={provide:Nn,useFactory:O$,deps:[[new Je,Wv]]},F$={provide:Ar,deps:[[new Je,Wv]]};function L$(t){return(e,n)=>{let r=n.get(ln);Be("angularfire",Sr.full,"core"),Be("angularfire",Sr.full,"app"),Be("angular",L0.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Nn(i)}}function Kv(t,...e){return zt([k$,F$,{provide:Wv,useFactory:L$(t),multi:!0,deps:[ve,gt,pi,...e]}])}var Qv=Rn(zv,!0);function nR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rR=nR,iR=new Dr("auth","Firebase",nR());var Qh=new Yn("@firebase/auth");function V$(t,...e){Qh.logLevel<=de.WARN&&Qh.warn(`Auth (${er}): ${t}`,...e)}function zh(t,...e){Qh.logLevel<=de.ERROR&&Qh.error(`Auth (${er}): ${t}`,...e)}function nr(t,...e){throw y_(t,...e)}function ms(t,...e){return y_(t,...e)}function sR(t,e,n){let r=Object.assign(Object.assign({},rR()),{[e]:n});return new Dr("auth","Firebase",r).create(e,{appName:t.name})}function gi(t){return sR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iR.create(t,...e)}function ee(t,e,...n){if(!t)throw y_(e,...n)}function Rr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw zh(e),new Error(e)}function yi(t,e){t||Rr(e)}function Zv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function U$(){return UA()==="http:"||UA()==="https:"}function UA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function j$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U$()||mA()||"connection"in navigator)?navigator.onLine:!0}function B$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var gs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,yi(n>e,"Short delay should be less than long delay!"),this.isMobile=Xc()||Vh()}get(){return j$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function v_(t,e){yi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Yh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var H$=new gs(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function vi(s,o,a,c){return I(this,arguments,function*(t,e,n,r,i={}){return oR(t,i,()=>I(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=us(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),Yh.fetch()(aR(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function oR(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},$$),e);try{let i=new e_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw qh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qh(t,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sR(t,h,l);nr(t,h)}}catch(i){if(i instanceof nn)throw i;nr(t,"network-request-failed",{message:String(i)})}})}function af(s,o,a,c){return I(this,arguments,function*(t,e,n,r,i={}){let l=yield vi(t,e,n,r,i);return"mfaPendingCredential"in l&&nr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function aR(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?v_(t.config,i):`${t.config.apiScheme}://${i}`}function q$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var e_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ms(this.auth,"network-request-failed")),H$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function qh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ms(t,e,r);return i.customData._tokenResponse=n,i}function jA(t){return t!==void 0&&t.enterprise!==void 0}var t_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return q$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function z$(t,e){return I(this,null,function*(){return vi(t,"GET","/v2/recaptchaConfig",vs(t,e))})}function G$(t,e){return I(this,null,function*(){return vi(t,"POST","/v1/accounts:delete",e)})}function cR(t,e){return I(this,null,function*(){return vi(t,"POST","/v1/accounts:lookup",e)})}function su(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function __(t,e=!1){return I(this,null,function*(){let n=dt(t),r=yield n.getIdToken(e),i=w_(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:su(Yv(i.auth_time)),issuedAtTime:su(Yv(i.iat)),expirationTime:su(Yv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Yv(t){return Number(t)*1e3}function w_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Jc(n);return i?JSON.parse(i):(zh("Failed to decode base64 JWT payload"),null)}catch(i){return zh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function BA(t){let e=w_(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function au(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof nn&&W$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function W$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var n_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var cu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Jh(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield au(t,cR(n,{idToken:r}));ee(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uR(s.providerUserInfo):[],a=K$(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cu(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function I_(t){return I(this,null,function*(){let e=dt(t);yield Jh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function K$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uR(t){return t.map(e=>{var{providerId:n}=e,r=Tm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Q$(t,e){return I(this,null,function*(){let n=yield oR(t,{},()=>I(this,null,function*(){let r=us({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aR(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Yh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Y$(t,e){return I(this,null,function*(){return vi(t,"POST","/v2/accounts:revokeToken",vs(t,e))})}var ou=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=BA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Q$(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Rr("not implemented")}};function mi(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var zo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Tm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield au(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return __(this,e)}reload(){return I_(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Jh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(Zn(this.auth.app))return Promise.reject(gi(this.auth));let e=yield this.getIdToken();return yield au(this,G$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,q=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:K,isAnonymous:ke,providerData:ie,stsTokenManager:C}=n;ee(z&&C,e,"internal-error");let y=ou.fromJSON(this.name,C);ee(typeof z=="string",e,"internal-error"),mi(p,e.name),mi(m,e.name),ee(typeof K=="boolean",e,"internal-error"),ee(typeof ke=="boolean",e,"internal-error"),mi(v,e.name),mi(D,e.name),mi(N,e.name),mi(R,e.name),mi(x,e.name),mi(q,e.name);let _=new t({uid:z,auth:e,email:m,emailVerified:K,displayName:p,isAnonymous:ke,photoURL:D,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:x,lastLoginAt:q});return ie&&Array.isArray(ie)&&(_.providerData=ie.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new ou;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Jh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?uR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ou;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var $A=new Map;function Nr(t){yi(t instanceof Function,"Expected a class definition");let e=$A.get(t);return e?(yi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$A.set(t,e),e)}var J$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),r_=J$;function Gh(t,e,n){return`firebase:${t}:${e}:${n}`}var Xh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Gh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?zo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(Nr(r_),e,r);let i=(yield Promise.all(n.map(l=>I(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Nr(r_),o=Gh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=zo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>I(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function HA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pR(e))return"Blackberry";if(mR(e))return"Webos";if(E_(e))return"Safari";if((e.includes("chrome/")||dR(e))&&!e.includes("edge/"))return"Chrome";if(fR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function lR(t=at()){return/firefox\//i.test(t)}function E_(t=at()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dR(t=at()){return/crios\//i.test(t)}function hR(t=at()){return/iemobile/i.test(t)}function fR(t=at()){return/android/i.test(t)}function pR(t=at()){return/blackberry/i.test(t)}function mR(t=at()){return/webos/i.test(t)}function cf(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function X$(t=at()){var e;return cf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Z$(){return gA()&&document.documentMode===10}function gR(t=at()){return cf(t)||fR(t)||mR(t)||pR(t)||/windows phone/i.test(t)||hR(t)}function eH(){try{return!!(window&&window!==window.top)}catch{return!1}}function yR(t,e=[]){let n;switch(t){case"Browser":n=HA(at());break;case"Worker":n=`${HA(at())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${er}/${r}`}var i_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function tH(n){return I(this,arguments,function*(t,e={}){return vi(t,"GET","/v2/passwordPolicy",vs(t,e))})}var nH=6,s_=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var o_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zh(this),this.idTokenSubscription=new Zh(this),this.beforeStateQueue=new i_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nr(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Xh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield cR(this,{idToken:e}),r=yield zo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(Zn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Jh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=B$()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(Zn(this.app))return Promise.reject(gi(this));let n=e?dt(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return Zn(this.app)?Promise.reject(gi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zn(this.app)?Promise.reject(gi(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(Nr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield tH(this),n=new s_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Y$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Nr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=yield Xh.create(this,[Nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&V$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Go(t){return dt(t)}var Zh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=EA(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uf={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rH(t){uf=t}function vR(t){return uf.loadJS(t)}function iH(){return uf.recaptchaEnterpriseScript}function sH(){return uf.gapiScript}function _R(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var oH="recaptcha-enterprise",aH="NO_RECAPTCHA",a_=class{constructor(e){this.type=oH,this.auth=Go(e)}verify(e="verify",n=!1){return I(this,null,function*(){function r(s){return I(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>I(this,null,function*(){z$(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new t_(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;jA(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(aH)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&jA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=iH();c.length!==0&&(c+=a),vR(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function qA(t,e,n,r=!1){return I(this,null,function*(){let i=new a_(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function zA(t,e,n,r){return I(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield qA(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>I(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield qA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function C_(t,e){let n=hs(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(cs(s,e??{}))return i;nr(i,"already-initialized")}return n.initialize({options:e})}function cH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Nr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function T_(t,e,n){let r=Go(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=wR(e),{host:o,port:a}=uH(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||lH()}function wR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uH(t){let e=wR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:GA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:GA(o)}}}function GA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function lH(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var uu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,n){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}};function dH(t,e){return I(this,null,function*(){return vi(t,"POST","/v1/accounts:signUp",e)})}function hH(t,e){return I(this,null,function*(){return af(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))})}function fH(t,e){return I(this,null,function*(){return af(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))})}function pH(t,e){return I(this,null,function*(){return af(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))})}var lu=class t extends uu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return I(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zA(e,n,"signInWithPassword",hH);case"emailLink":return fH(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}})}_linkToIdToken(e,n){return I(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zA(e,r,"signUpPassword",dH);case"emailLink":return pH(e,{idToken:n,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Jv(t,e){return I(this,null,function*(){return af(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))})}function mH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gH(t){let e=Bo($o(t)).link,n=e?Bo($o(e)).deep_link_id:null,r=Bo($o(t)).deep_link_id;return(r?Bo($o(r)).link:null)||r||n||e||t}var ef=class t{constructor(e){var n,r,i,s,o,a;let c=Bo($o(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=mH((i=c.mode)!==null&&i!==void 0?i:null);ee(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=gH(e);try{return new t(n)}catch{return null}}};var IR=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return lu._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=ef.parseLink(r);return ee(i,"argument-error"),lu._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),tf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var c_=class extends tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var du=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return I(this,null,function*(){let s=yield zo._fromIdTokenResponse(e,r,i),o=WA(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=WA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function WA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var u_=class t extends nn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function ER(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?u_._fromErrorAndOperation(t,s,e,r):s})}function yH(t,e,n=!1){return I(this,null,function*(){let r=yield au(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return du._forOperation(t,"link",r)})}function vH(t,e,n=!1){return I(this,null,function*(){let{auth:r}=t;if(Zn(r.app))return Promise.reject(gi(r));let i="reauthenticate";try{let s=yield au(t,ER(r,i,e,t),n);ee(s.idToken,r,"internal-error");let o=w_(s.idToken);ee(o,r,"internal-error");let{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),du._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&nr(r,"user-mismatch"),s}})}function CR(t,e,n=!1){return I(this,null,function*(){if(Zn(t.app))return Promise.reject(gi(t));let r="signIn",i=yield ER(t,r,e),s=yield du._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function b_(t,e){return I(this,null,function*(){return CR(Go(t),e)})}function _H(t){return I(this,null,function*(){let e=Go(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function D_(t,e,n){return Zn(t.app)?Promise.reject(gi(t)):b_(dt(t),IR.credential(e,n)).catch(r=>I(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&_H(t),r}))}function S_(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function A_(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}var nf="__sak";var rf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function wH(){let t=at();return E_(t)||cf(t)}var IH=1e3,EH=10,CH=(()=>{class t extends rf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=wH()&&eH(),this.fallbackToPolling=gR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Z$()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,EH):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},IH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return I(this,null,function*(){yield qr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return I(this,null,function*(){let r=yield qr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return I(this,null,function*(){yield qr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),TR=CH;var TH=(()=>{class t extends rf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),R_=TH;function bH(t){return Promise.all(t.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var DH=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return I(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>I(this,null,function*(){return h(r.origin,o)})),l=yield bH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function bR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var l_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=bR("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function tr(){return window}function SH(t){tr().location.href=t}function DR(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}function AH(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function RH(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NH(){return DR()?self:null}var SR="firebaseLocalStorageDb",MH=1,sf="firebaseLocalStorage",AR="fbase_key",ys=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function lf(t,e){return t.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function xH(){let t=indexedDB.deleteDatabase(SR);return new ys(t).toPromise()}function d_(){let t=indexedDB.open(SR,MH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(sf,{keyPath:AR})}catch(i){n(i)}}),t.addEventListener("success",()=>I(this,null,function*(){let r=t.result;r.objectStoreNames.contains(sf)?e(r):(r.close(),yield xH(),e(yield d_()))}))})}function KA(t,e,n){return I(this,null,function*(){let r=lf(t,!0).put({[AR]:e,value:n});return new ys(r).toPromise()})}function PH(t,e){return I(this,null,function*(){let n=lf(t,!1).get(e),r=yield new ys(n).toPromise();return r===void 0?null:r.value})}function QA(t,e){let n=lf(t,!0).delete(e);return new ys(n).toPromise()}var OH=800,kH=3,FH=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield d_(),this.db)})}_withRetries(n){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>kH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return DR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=DH._getInstance(NH()),this.receiver._subscribe("keyChanged",(n,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var n,r;if(this.activeServiceWorker=yield AH(),!this.activeServiceWorker)return;this.sender=new l_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||RH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let n=yield d_();return yield KA(n,nf,"1"),yield QA(n,nf),!0}catch{}return!1})}_withPendingWrite(n){return I(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>KA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return I(this,null,function*(){let r=yield this._withRetries(i=>PH(i,n));return this.localCache[n]=r,r})}_remove(n){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>QA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return I(this,null,function*(){let n=yield this._withRetries(s=>{let o=lf(s,!1).getAll();return new ys(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),OH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),RR=FH;var RX=_R("rcb"),NX=new gs(3e4,6e4);function LH(t,e){return e?Nr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var hu=class extends uu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function VH(t){return CR(t.auth,new hu(t),t.bypassAuthState)}function UH(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),vH(n,new hu(t),t.bypassAuthState)}function jH(t){return I(this,null,function*(){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),yH(n,new hu(t),t.bypassAuthState)})}var h_=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VH;case"linkViaPopup":case"linkViaRedirect":return jH;case"reauthViaPopup":case"reauthViaRedirect":return UH;default:nr(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var MX=new gs(2e3,1e4);var BH="pendingRedirect",Wh=new Map,f_=class t extends h_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=Wh.get(this.auth._key());if(!e){try{let r=(yield $H(this.resolver,this.auth))?yield qr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return qr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,qr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function $H(t,e){return I(this,null,function*(){let n=zH(e),r=qH(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function HH(t,e){Wh.set(t._key(),e)}function qH(t){return Nr(t._redirectPersistence)}function zH(t){return Gh(BH,t.config.apiKey,t.name)}function GH(t,e,n=!1){return I(this,null,function*(){if(Zn(t.app))return Promise.reject(gi(t));let r=Go(t),i=LH(r,e),o=yield new f_(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var WH=10*60*1e3,p_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ms(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WH&&this.cachedEventUids.clear(),this.cachedEventUids.has(YA(e))}saveEventToCache(e){this.cachedEventUids.add(YA(e)),this.lastProcessedEventTime=Date.now()}};function YA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function KH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NR(t);default:return!1}}function QH(n){return I(this,arguments,function*(t,e={}){return vi(t,"GET","/v1/projects",e)})}var YH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JH=/^https?/;function XH(t){return I(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield QH(t);for(let n of e)try{if(ZH(n))return}catch{}nr(t,"unauthorized-domain")})}function ZH(t){let e=Zv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!JH.test(n))return!1;if(YH.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var eq=new gs(3e4,6e4);function JA(){let t=tr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tq(t){return new Promise((e,n)=>{var r,i,s;function o(){JA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JA(),n(ms(t,"network-request-failed"))},timeout:eq.get()})}if(!((i=(r=tr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tr().gapi)===null||s===void 0)&&s.load)o();else{let a=_R("iframefcb");return tr()[a]=()=>{gapi.load?o():n(ms(t,"network-request-failed"))},vR(`${sH()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Kh=null,e})}var Kh=null;function nq(t){return Kh=Kh||tq(t),Kh}var rq=new gs(5e3,15e3),iq="__/auth/iframe",sq="emulator/auth/iframe",oq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cq(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?v_(e,sq):`https://${t.config.authDomain}/${iq}`,r={apiKey:e.apiKey,appName:t.name,v:er},i=aq.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${us(r).slice(1)}`}function uq(t){return I(this,null,function*(){let e=yield nq(t),n=tr().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:cq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oq,dontclear:!0},r=>new Promise((i,s)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ms(t,"network-request-failed"),a=tr().setTimeout(()=>{s(o)},rq.get());function c(){tr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var lq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dq=500,hq=600,fq="_blank",pq="http://localhost",of=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function mq(t,e,n,r=dq,i=hq){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},lq),{width:r.toString(),height:i.toString(),top:s,left:o}),l=at().toLowerCase();n&&(a=dR(l)?fq:n),lR(l)&&(e=e||pq,c.scrollbars="yes");let h=Object.entries(c).reduce((m,[v,D])=>`${m}${v}=${D},`,"");if(X$(l)&&a!=="_self")return gq(e||"",a),new of(null);let p=window.open(e||"",a,h);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new of(p)}function gq(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var yq="__/auth/handler",vq="emulator/auth/handler",_q=encodeURIComponent("fac");function XA(t,e,n,r,i,s){return I(this,null,function*(){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:er,eventId:i};if(e instanceof tf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Zc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof c_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield t._getAppCheckToken(),l=c?`#${_q}=${encodeURIComponent(c)}`:"";return`${wq(t)}?${us(a).slice(1)}${l}`})}function wq({config:t}){return t.emulator?v_(t,vq):`https://${t.authDomain}/${yq}`}var Xv="webStorageSupport",m_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=GH,this._overrideRedirectResult=HH}_openPopup(e,n,r,i){return I(this,null,function*(){var s;yi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield XA(e,n,r,Zv(),i);return mq(e,o,bR())})}_openRedirect(e,n,r,i){return I(this,null,function*(){yield this._originValidation(e);let s=yield XA(e,n,r,Zv(),i);return SH(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(yi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return I(this,null,function*(){let n=yield uq(e),r=new p_(e);return n.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xv,{type:Xv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Xv];o!==void 0&&n(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gR()||E_()||cf()}},MR=m_;var ZA="@firebase/auth",eR="1.7.3";var g_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Iq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Eq(t){Xn(new Wt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yR(t)},l=new o_(r,i,s,c);return cH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xn(new Wt("auth-internal",e=>{let n=Go(e.getProvider("auth").getImmediate());return(r=>new g_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(ZA,eR,Iq(t)),Be(ZA,eR,"esm2017")}var Cq=5*60,Tq=Nv("authIdTokenMaxAge")||Cq,tR=null,bq=t=>e=>I(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Tq)return;let i=n?.token;tR!==i&&(tR=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function N_(t=hi()){let e=hs(t,"auth");if(e.isInitialized())return e.getImmediate();let n=C_(t,{popupRedirectResolver:MR,persistence:[RR,TR,R_]}),r=Nv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=bq(s.toString());A_(n,o,()=>o(n.currentUser)),S_(n,a=>o(a))}}let i=Av("auth");return i&&T_(n,`http://${i}`),n}function Dq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ms("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Dq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Eq("Browser");var xR="auth",Mr=class{constructor(e){return e}},_s=class{constructor(){return ps(xR)}};var M_=new $("angularfire2.auth-instances");function v4(t,e){let n=qo(xR,t,e);return n&&new Mr(n)}function _4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Mr(r)}}var w4={provide:_s,deps:[[new Je,M_]]},I4={provide:Mr,useFactory:v4,deps:[[new Je,M_],Nn]};function x_(t,...e){return Be("angularfire",Sr.full,"auth"),zt([I4,w4,{provide:M_,useFactory:_4(t),multi:!0,deps:[ve,gt,pi,Ar,[new Je,fi],...e]}])}var P_=Rn(N_,!0);var O_=Rn(D_,!0);var HR=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(j(ii),j(Ir))},e.\u0275dir=je({type:e});let t=e;return t})(),yu=(()=>{let e=class e extends HR{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275dir=je({type:e,features:[Ut]});let t=e;return t})(),Is=new $(""),E4={provide:Is,useExisting:Xt(()=>V_),multi:!0},V_=(()=>{let e=class e extends yu{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&Pe("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[An([E4]),Ut]});let t=e;return t})(),C4={provide:Is,useExisting:Xt(()=>Yo),multi:!0};function T4(){let t=Cr()?Cr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var b4=new $(""),Yo=(()=>{let e=class e extends HR{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!T4())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(j(ii),j(Ir),j(b4,8))},e.\u0275dir=je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Pe("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[An([C4]),Ut]});let t=e;return t})();function _i(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function qR(t){return t!=null&&typeof t.length=="number"}var vu=new $(""),_f=new $(""),D4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rr=class{static min(e){return S4(e)}static max(e){return A4(e)}static required(e){return zR(e)}static requiredTrue(e){return R4(e)}static email(e){return N4(e)}static minLength(e){return M4(e)}static maxLength(e){return x4(e)}static pattern(e){return P4(e)}static nullValidator(e){return hf(e)}static compose(e){return JR(e)}static composeAsync(e){return XR(e)}};function S4(t){return e=>{if(_i(e.value)||_i(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function A4(t){return e=>{if(_i(e.value)||_i(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function zR(t){return _i(t.value)?{required:!0}:null}function R4(t){return t.value===!0?null:{required:!0}}function N4(t){return _i(t.value)||D4.test(t.value)?null:{email:!0}}function M4(t){return e=>_i(e.value)||!qR(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function x4(t){return e=>qR(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function P4(t){if(!t)return hf;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(_i(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function hf(t){return null}function GR(t){return t!=null}function WR(t){return Ji(t)?be(t):t}function KR(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function QR(t,e){return e.map(n=>n(t))}function O4(t){return!t.validate}function YR(t){return t.map(e=>O4(e)?e:n=>e.validate(n))}function JR(t){if(!t)return null;let e=t.filter(GR);return e.length==0?null:function(n){return KR(QR(n,e))}}function U_(t){return t!=null?JR(YR(t)):null}function XR(t){if(!t)return null;let e=t.filter(GR);return e.length==0?null:function(n){let r=QR(n,e).map(WR);return Dm(r).pipe(Z(KR))}}function j_(t){return t!=null?XR(YR(t)):null}function OR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ZR(t){return t._rawValidators}function eN(t){return t._rawAsyncValidators}function k_(t){return t?Array.isArray(t)?t:[t]:[]}function ff(t,e){return Array.isArray(t)?t.includes(e):t===e}function kR(t,e){let n=k_(e);return k_(t).forEach(i=>{ff(n,i)||n.push(i)}),n}function FR(t,e){return k_(e).filter(n=>!ff(t,n))}var pf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=U_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=j_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},xr=class extends pf{get formDirective(){return null}get path(){return null}},ws=class extends pf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},mf=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},k4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},NZ=Ce(V({},k4),{"[class.ng-submitted]":"isSubmitted"}),wf=(()=>{let e=class e extends mf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(j(ws,2))},e.\u0275dir=je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Yd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ut]});let t=e;return t})(),If=(()=>{let e=class e extends mf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(j(xr,10))},e.\u0275dir=je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Yd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ut]});let t=e;return t})();var fu="VALID",df="INVALID",Wo="PENDING",pu="DISABLED";function B_(t){return(Ef(t)?t.validators:t)||null}function F4(t){return Array.isArray(t)?U_(t):t||null}function $_(t,e){return(Ef(e)?e.asyncValidators:t)||null}function L4(t){return Array.isArray(t)?j_(t):t||null}function Ef(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function tN(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new W(1e3,"");if(!r[n])throw new W(1001,"")}function nN(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new W(1002,"")})}var Ko=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===fu}get invalid(){return this.status===df}get pending(){return this.status==Wo}get disabled(){return this.status===pu}get enabled(){return this.status!==pu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FR(e,this._rawAsyncValidators))}hasValidator(e){return ff(this._rawValidators,e)}hasAsyncValidator(e){return ff(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=pu,this.errors=null,this._forEachChild(r=>{r.disable(Ce(V({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ce(V({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=fu,this._forEachChild(r=>{r.enable(Ce(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ce(V({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fu||this.status===Wo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pu:fu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wo,this._hasOwnPendingAsyncValidator=!0;let n=WR(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?pu:this.errors?df:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wo)?Wo:this._anyControlsHaveStatus(df)?df:fu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ef(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=F4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=L4(this._rawAsyncValidators)}},Qo=class extends Ko{constructor(e,n,r){super(B_(n),$_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){nN(this,!0,e),Object.keys(e).forEach(r=>{tN(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var F_=class extends Qo{};var _u=new $("CallSetDisabledState",{providedIn:"root",factory:()=>Cf}),Cf="always";function rN(t,e){return[...e.path,t]}function gf(t,e,n=Cf){H_(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),U4(t,e),B4(t,e),j4(t,e),V4(t,e)}function LR(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vf(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function yf(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function V4(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function H_(t,e){let n=ZR(t);e.validator!==null?t.setValidators(OR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=eN(t);e.asyncValidator!==null?t.setAsyncValidators(OR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();yf(e._rawValidators,i),yf(e._rawAsyncValidators,i)}function vf(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=ZR(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=eN(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return yf(e._rawValidators,r),yf(e._rawAsyncValidators,r),n}function U4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&iN(t,e)})}function j4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&iN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function iN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function B4(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function sN(t,e){t==null,H_(t,e)}function $4(t,e){return vf(t,e)}function oN(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function H4(t){return Object.getPrototypeOf(t.constructor)===yu}function aN(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function cN(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Yo?n=s:H4(s)?r=s:i=s}),i||r||n||null}function q4(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var z4={provide:xr,useExisting:Xt(()=>q_)},mu=Promise.resolve(),q_=(()=>{let e=class e extends xr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ze,this.form=new Qo({},U_(r),j_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){mu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),gf(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){mu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){mu.then(()=>{let i=this._findContainer(r.path),s=new Qo({});sN(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){mu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){mu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,aN(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(j(vu,10),j(_f,10),j(_u,8))},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Pe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[mt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[An([z4]),Ut]});let t=e;return t})();function VR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function UR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var gu=class extends Ko{constructor(e=null,n,r){super(B_(n),$_(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ef(n)&&(n.nonNullable||n.initialValueIsDefault)&&(UR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){UR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G4=t=>t instanceof gu;var W4={provide:ws,useExisting:Xt(()=>wu)},jR=Promise.resolve(),wu=(()=>{let e=class e extends ws{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new gu,this._registered=!1,this.name="",this.update=new ze,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=cN(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),oN(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){gf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){jR.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Ic(i);jR.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?rN(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(j(xr,9),j(vu,10),j(_f,10),j(Is,10),j(Xi,8),j(_u,8))},e.\u0275dir=je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[mt.None,"disabled","isDisabled"],model:[mt.None,"ngModel","model"],options:[mt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[An([W4]),Ut,Sn]});let t=e;return t})(),Tf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),K4={provide:Is,useExisting:Xt(()=>z_),multi:!0},z_=(()=>{let e=class e extends yu{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Pe("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[An([K4]),Ut]});let t=e;return t})();var uN=new $("");var Q4={provide:xr,useExisting:Xt(()=>G_)},G_=(()=>{let e=class e extends xr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ze,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return gf(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){LR(r.control||null,r,!1),q4(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,aN(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(LR(i||null,r),G4(s)&&(gf(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);sN(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&$4(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){H_(this.form,this),this._oldForm&&vf(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(j(vu,10),j(_f,10),j(_u,8))},e.\u0275dir=je({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Pe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[mt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[An([Q4]),Ut,Sn]});let t=e;return t})();var Y4={provide:ws,useExisting:Xt(()=>W_)},W_=(()=>{let e=class e extends ws{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ze,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=cN(this,o)}ngOnChanges(r){this._added||this._setUpControl(),oN(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return rN(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(j(xr,13),j(vu,10),j(_f,10),j(Is,10),j(uN,8))},e.\u0275dir=je({type:e,selectors:[["","formControlName",""]],inputs:{name:[mt.None,"formControlName","name"],isDisabled:[mt.None,"disabled","isDisabled"],model:[mt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[An([Y4]),Ut,Sn]});let t=e;return t})(),J4={provide:Is,useExisting:Xt(()=>bf),multi:!0};function lN(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function X4(t){return t.split(":")[0]}var bf=(()=>{let e=class e extends yu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=lN(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=X4(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Pe("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[An([J4]),Ut]});let t=e;return t})(),dN=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(lN(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(j(Ir),j(ii),j(bf,9))},e.\u0275dir=je({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Z4={provide:Is,useExisting:Xt(()=>hN),multi:!0};function BR(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function ez(t){return t.split(":")[0]}var hN=(()=>{let e=class e extends yu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],h=this._getOptionValue(l.value);s.push(h)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let h=this._getOptionValue(l.value);s.push(h)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=ez(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Pe("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[An([Z4]),Ut]});let t=e;return t})(),fN=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(BR(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(BR(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(j(Ir),j(ii),j(hN,9))},e.\u0275dir=je({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var tz=(()=>{let e=class e{constructor(){this._validator=hf}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):hf,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,features:[Sn]});let t=e;return t})();var nz={provide:vu,useExisting:Xt(()=>K_),multi:!0};var K_=(()=>{let e=class e extends tz{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ic,this.createValidator=r=>zR}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qn(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Qd("required",s._enabled?"":null)},inputs:{required:"required"},features:[An([nz]),Ut]});let t=e;return t})();var pN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tn({type:e}),e.\u0275inj=Cn({});let t=e;return t})(),L_=class extends Ko{constructor(e,n,r){super(B_(n),$_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){nN(this,!1,e),e.forEach((r,i)=>{tN(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function $R(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var mN=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return $R(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Qo(s,o)}record(r,i=null){let s=this._reduceControls(r);return new F_(s,i)}control(r,i,s){let o={};return this.useNonNullable?($R(i)?o=i:(o.validators=i,o.asyncValidators=s),new gu(r,Ce(V({},o),{nonNullable:!0}))):new gu(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new L_(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof gu)return r;if(r instanceof Ko)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Df=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:_u,useValue:r.callSetDisabledState??Cf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tn({type:e}),e.\u0275inj=Cn({imports:[pN]});let t=e;return t})(),gN=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:uN,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:_u,useValue:r.callSetDisabledState??Cf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tn({type:e}),e.\u0275inj=Cn({imports:[pN]});let t=e;return t})();var vN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_N={};var wi,Q_;(function(){var t;function e(C,y){function _(){}_.prototype=y.prototype,C.D=y.prototype,C.prototype=new _,C.prototype.constructor=C,C.C=function(E,T,S){for(var w=Array(arguments.length-2),dr=2;dr<arguments.length;dr++)w[dr-2]=arguments[dr];return y.prototype[T].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)E[T]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(T=0;16>T;++T)E[T]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=C.g[0],_=C.g[1],T=C.g[2];var S=C.g[3],w=y+(S^_&(T^S))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[3]+3250441966&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(S^_&(T^S))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[7]+4249261313&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(S^_&(T^S))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[11]+2304563134&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(S^_&(T^S))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[15]+1236535329&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(T^S&(_^T))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[0]+3921069994&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(T^S&(_^T))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[4]+3889429448&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(T^S&(_^T))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[8]+1163531501&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(T^S&(_^T))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[12]+2368359562&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(_^T^S)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[14]+4259657740&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(_^T^S)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[10]+3200236656&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(_^T^S)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[6]+76029189&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(_^T^S)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[2]+3299628645&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(T^(_|~S))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[5]+4237533241&4294967295,_=T+(w<<21&4294967295|w>>>11),w=y+(T^(_|~S))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[1]+2240044497&4294967295,_=T+(w<<21&4294967295|w>>>11),w=y+(T^(_|~S))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[13]+1309151649&4294967295,_=T+(w<<21&4294967295|w>>>11),w=y+(T^(_|~S))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+y&4294967295,C.g[1]=C.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,y){y===void 0&&(y=C.length);for(var _=y-this.blockSize,E=this.B,T=this.h,S=0;S<y;){if(T==0)for(;S<=_;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<y;)if(E[T++]=C.charCodeAt(S++),T==this.blockSize){i(this,E),T=0;break}}else for(;S<y;)if(E[T++]=C[S++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var y=1;y<C.length-8;++y)C[y]=0;var _=8*this.o;for(y=C.length-8;y<C.length;++y)C[y]=_&255,_/=256;for(this.u(C),C=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)C[_++]=this.g[y]>>>E&255;return C};function s(C,y){var _=a;return Object.prototype.hasOwnProperty.call(_,C)?_[C]:_[C]=y(C)}function o(C,y){this.h=y;for(var _=[],E=!0,T=C.length-1;0<=T;T--){var S=C[T]|0;E&&S==y||(_[T]=S,E=!1)}this.g=_}var a={};function c(C){return-128<=C&&128>C?s(C,function(y){return new o([y|0],0>y?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return R(l(-C));for(var y=[],_=1,E=0;C>=_;E++)y[E]=C/_|0,_*=4294967296;return new o(y,0)}function h(C,y){if(C.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(C.charAt(0)=="-")return R(h(C.substring(1),y));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,T=0;T<C.length;T+=8){var S=Math.min(8,C.length-T),w=parseInt(C.substring(T,T+S),y);8>S?(S=l(Math.pow(y,S)),E=E.j(S).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var C=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);C+=(0<=E?E:4294967296+E)*y,y*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(N(this))return"-"+R(this).toString(C);for(var y=l(Math.pow(C,6)),_=this,E="";;){var T=K(_,y).g;_=x(_,T.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(C);if(_=T,D(_))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var y=0;y<C.g.length;y++)if(C.g[y]!=0)return!1;return!0}function N(C){return C.h==-1}t.l=function(C){return C=x(this,C),N(C)?-1:D(C)?0:1};function R(C){for(var y=C.g.length,_=[],E=0;E<y;E++)_[E]=~C.g[E];return new o(_,~C.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0,T=0;T<=y;T++){var S=E+(this.i(T)&65535)+(C.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);E=w>>>16,S&=65535,w&=65535,_[T]=w<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function x(C,y){return C.add(R(y))}t.j=function(C){if(D(this)||D(C))return p;if(N(this))return N(C)?R(this).j(R(C)):R(R(this).j(C));if(N(C))return R(this.j(R(C)));if(0>this.l(v)&&0>C.l(v))return l(this.m()*C.m());for(var y=this.g.length+C.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<C.g.length;T++){var S=this.i(E)>>>16,w=this.i(E)&65535,dr=C.i(T)>>>16,Va=C.i(T)&65535;_[2*E+2*T]+=w*Va,q(_,2*E+2*T),_[2*E+2*T+1]+=S*Va,q(_,2*E+2*T+1),_[2*E+2*T+1]+=w*dr,q(_,2*E+2*T+1),_[2*E+2*T+2]+=S*dr,q(_,2*E+2*T+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function q(C,y){for(;(C[y]&65535)!=C[y];)C[y+1]+=C[y]>>>16,C[y]&=65535,y++}function z(C,y){this.g=C,this.h=y}function K(C,y){if(D(y))throw Error("division by zero");if(D(C))return new z(p,p);if(N(C))return y=K(R(C),y),new z(R(y.g),R(y.h));if(N(y))return y=K(C,R(y)),new z(R(y.g),y.h);if(30<C.g.length){if(N(C)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(C);)_=ke(_),E=ke(E);var T=ie(_,1),S=ie(E,1);for(E=ie(E,2),_=ie(_,2);!D(E);){var w=S.add(E);0>=w.l(C)&&(T=T.add(_),S=w),E=ie(E,1),_=ie(_,1)}return y=x(C,T.j(y)),new z(T,y)}for(T=p;0<=C.l(y);){for(_=Math.max(1,Math.floor(C.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(_),w=S.j(y);N(w)||0<w.l(C);)_-=E,S=l(_),w=S.j(y);D(S)&&(S=m),T=T.add(S),C=x(C,w)}return new z(T,C)}t.A=function(C){return K(this,C).h},t.and=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&C.i(E);return new o(_,this.h&C.h)},t.or=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|C.i(E);return new o(_,this.h|C.h)},t.xor=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^C.i(E);return new o(_,this.h^C.h)};function ke(C){for(var y=C.g.length+1,_=[],E=0;E<y;E++)_[E]=C.i(E)<<1|C.i(E-1)>>>31;return new o(_,C.h)}function ie(C,y){var _=y>>5;y%=32;for(var E=C.g.length-_,T=[],S=0;S<E;S++)T[S]=0<y?C.i(S+_)>>>y|C.i(S+_+1)<<32-y:C.i(S+_);return new o(T,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Q_=_N.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,wi=_N.Integer=o}).apply(typeof vN<"u"?vN:typeof self<"u"?self:typeof window<"u"?window:{});var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pr={};var Y_,J_,Jo,X_,Iu,Af,Z_,ew,tw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sf=="object"&&Sf];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var b=u[g];if(!(b in f))break e;f=f[b]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,g=!1,b={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),u.apply(d,b)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function D(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,b,A){for(var k=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)k[Me-2]=arguments[Me];return d.prototype[b].apply(g,k)}}function N(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function R(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let b=u.length||0,A=g.length||0;u.length=b+A;for(let k=0;k<A;k++)u[b+k]=g[k]}else u.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(u){return/^[\s\xa0]*$/.test(u)}function z(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var ke=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ie(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function C(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)u[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function T(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Fp;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class dr{constructor(){this.h=this.g=null}add(d,f){let g=Va.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Va=new x(()=>new cO,u=>u.reset());class cO{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ua,ja=!1,Fp=new dr,IC=()=>{let u=a.Promise.resolve(void 0);Ua=()=>{u.then(uO)}};var uO=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){S(f)}var d=Va;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}ja=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function It(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var lO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Ba(u,d){if(It.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ke){e:{try{K(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:dO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ba.aa.h.call(this)}}D(Ba,It);var dO={2:"touch",3:"pen",4:"mouse"};Ba.prototype.h=function(){Ba.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $a="closure_listenable_"+(1e6*Math.random()|0),hO=0;function fO(u,d,f,g,b){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++hO,this.da=this.fa=!1}function ul(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ll(u){this.src=u,this.g={},this.h=0}ll.prototype.add=function(u,d,f,g,b){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var k=Vp(u,d,g,b);return-1<k?(d=u[k],f||(d.fa=!1)):(d=new fO(d,this.src,A,!!g,b),d.fa=f,u.push(d)),d};function Lp(u,d){var f=d.type;if(f in u.g){var g=u.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(ul(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Vp(u,d,f,g){for(var b=0;b<u.length;++b){var A=u[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Up="closure_lm_"+(1e6*Math.random()|0),jp={};function EC(u,d,f,g,b){if(g&&g.once)return TC(u,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)EC(u,d[A],f,g,b);return null}return f=qp(f),u&&u[$a]?u.K(d,f,l(g)?!!g.capture:!!g,b):CC(u,d,f,!1,g,b)}function CC(u,d,f,g,b,A){if(!d)throw Error("Invalid event type");var k=l(b)?!!b.capture:!!b,Me=$p(u);if(Me||(u[Up]=Me=new ll(u)),f=Me.add(d,f,g,k,A),f.proxy)return f;if(g=pO(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)lO||(b=k),b===void 0&&(b=!1),u.addEventListener(d.toString(),g,b);else if(u.attachEvent)u.attachEvent(DC(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function pO(){function u(f){return d.call(u.src,u.listener,f)}let d=mO;return u}function TC(u,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)TC(u,d[A],f,g,b);return null}return f=qp(f),u&&u[$a]?u.L(d,f,l(g)?!!g.capture:!!g,b):CC(u,d,f,!0,g,b)}function bC(u,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)bC(u,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=qp(f),u&&u[$a]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=Vp(A,f,g,b),-1<f&&(ul(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=$p(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Vp(d,f,g,b)),(f=-1<u?d[u]:null)&&Bp(f))}function Bp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[$a])Lp(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(DC(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=$p(d))?(Lp(f,u),f.h==0&&(f.src=null,d[Up]=null)):ul(u)}}}function DC(u){return u in jp?jp[u]:jp[u]="on"+u}function mO(u,d){if(u.da)u=!0;else{d=new Ba(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Bp(u),u=f.call(g,d)}return u}function $p(u){return u=u[Up],u instanceof ll?u:null}var Hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function qp(u){return typeof u=="function"?u:(u[Hp]||(u[Hp]=function(d){return u.handleEvent(d)}),u[Hp])}function Et(){jr.call(this),this.i=new ll(this),this.M=this,this.F=null}D(Et,jr),Et.prototype[$a]=!0,Et.prototype.removeEventListener=function(u,d,f,g){bC(this,u,d,f,g)};function Ot(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new It(d,u);else if(d instanceof It)d.target=d.target||u;else{var b=d;d=new It(g,u),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];b=dl(k,g,!0,d)&&b}if(k=d.g=u,b=dl(k,g,!0,d)&&b,b=dl(k,g,!1,d)&&b,f)for(A=0;A<f.length;A++)k=d.g=f[A],b=dl(k,g,!1,d)&&b}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)ul(f[g]);delete u.g[d],u.h--}}this.F=null},Et.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},Et.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function dl(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Me=k.listener,pt=k.ha||k.src;k.fa&&Lp(u.i,k),b=Me.call(pt,g)!==!1&&b}}return b&&!g.defaultPrevented}function SC(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function AC(u){u.g=SC(()=>{u.g=null,u.i&&(u.i=!1,AC(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class gO extends jr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:AC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ha(u){jr.call(this),this.h=u,this.g={}}D(Ha,jr);var RC=[];function NC(u){ie(u.g,function(d,f){this.g.hasOwnProperty(f)&&Bp(d)},u),u.g={}}Ha.prototype.N=function(){Ha.aa.N.call(this),NC(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zp=a.JSON.stringify,yO=a.JSON.parse,vO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gp(){}Gp.prototype.h=null;function MC(u){return u.h||(u.h=u.i())}function xC(){}var qa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wp(){It.call(this,"d")}D(Wp,It);function Kp(){It.call(this,"c")}D(Kp,It);var Si={},PC=null;function hl(){return PC=PC||new Et}Si.La="serverreachability";function OC(u){It.call(this,Si.La,u)}D(OC,It);function za(u){let d=hl();Ot(d,new OC(d))}Si.STAT_EVENT="statevent";function kC(u,d){It.call(this,Si.STAT_EVENT,u),this.stat=d}D(kC,It);function kt(u){let d=hl();Ot(d,new kC(d,u))}Si.Ma="timingevent";function FC(u,d){It.call(this,Si.Ma,u),this.size=d}D(FC,It);function Ga(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Wa(){this.g=!0}Wa.prototype.xa=function(){this.g=!1};function _O(u,d,f,g,b,A){u.info(function(){if(u.g)if(A)for(var k="",Me=A.split("&"),pt=0;pt<Me.length;pt++){var Ee=Me[pt].split("=");if(1<Ee.length){var Ct=Ee[0];Ee=Ee[1];var Tt=Ct.split("_");k=2<=Tt.length&&Tt[1]=="type"?k+(Ct+"="+Ee+"&"):k+(Ct+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+k})}function wO(u,d,f,g,b,A,k){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+k})}function $s(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+EO(u,f)+(g?" "+g:"")})}function IO(u,d){u.info(function(){return"TIMEOUT: "+d})}Wa.prototype.info=function(){};function EO(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<b.length;k++)b[k]=""}}}}return zp(f)}catch{return d}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},LC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qp;function pl(){}D(pl,Gp),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},Qp=new pl;function Br(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new VC}function VC(){this.i=null,this.g="",this.h=!1}var UC={},Yp={};function Jp(u,d,f){u.L=1,u.v=vl(hr(d)),u.m=f,u.P=!0,jC(u,null)}function jC(u,d){u.F=Date.now(),ml(u),u.A=hr(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),eT(f.i,"t",g),u.C=0,f=u.j.J,u.h=new VC,u.g=vT(u.j,f?d:null,!u.m),0<u.O&&(u.M=new gO(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(RC[0]=b.toString()),b=RC);for(var A=0;A<b.length;A++){var k=EC(f,b[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),za(),_O(u.i,u.u,u.A,u.l,u.R,u.m)}Br.prototype.ca=function(u){u=u.target;let d=this.M;d&&fr(u)==3?d.j():this.Y(u)},Br.prototype.Y=function(u){try{if(u==this.g)e:{let Tt=fr(this.g);var d=this.g.Ba();let zs=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||aT(this.g)))){this.J||Tt!=4||d==7||(d==8||0>=zs?za(3):za(2)),Xp(this);var f=this.g.Z();this.X=f;t:if(BC(this)){var g=aT(this.g);u="";var b=g.length,A=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),Ka(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=u,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,wO(this.i,this.u,this.A,this.l,this.R,Tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,pt=this.g;if((Me=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Me)){var Ee=Me;break t}}Ee=null}if(f=Ee)$s(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zp(this,f);else{this.o=!1,this.s=3,kt(12),Ai(this),Ka(this);break e}}if(this.P){f=!0;let yn;for(;!this.J&&this.C<k.length;)if(yn=CO(this,k),yn==Yp){Tt==4&&(this.s=4,kt(14),f=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==UC){this.s=4,kt(15),$s(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else $s(this.i,this.l,yn,null),Zp(this,yn);if(BC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||k.length!=0||this.h.h||(this.s=1,kt(16),f=!1),this.o=this.o&&f,!f)$s(this.i,this.l,k,"[Invalid Chunked Response]"),Ai(this),Ka(this);else if(0<k.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),sm(Ct),Ct.M=!0,kt(11))}}else $s(this.i,this.l,k,null),Zp(this,k);Tt==4&&Ai(this),this.o&&!this.J&&(Tt==4?pT(this.j,this):(this.o=!1,ml(this)))}else jO(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Ai(this),Ka(this)}}}catch{}finally{}};function BC(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function CO(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Yp:(f=Number(d.substring(f,g)),isNaN(f)?UC:(g+=1,g+f>d.length?Yp:(d=d.slice(g,g+f),u.C=g+f,d)))}Br.prototype.cancel=function(){this.J=!0,Ai(this)};function ml(u){u.S=Date.now()+u.I,$C(u,u.I)}function $C(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ga(m(u.ba,u),d)}function Xp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Br.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(IO(this.i,this.A),this.L!=2&&(za(),kt(17)),Ai(this),this.s=2,Ka(this)):$C(this,this.S-u)};function Ka(u){u.j.G==0||u.J||pT(u.j,u)}function Ai(u){Xp(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,NC(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Zp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||em(f.h,u))){if(!u.K&&em(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Cl(f),Il(f);else break e;im(f),kt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ga(m(f.Za,f),6e3));if(1>=zC(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ni(f,11)}else if((u.K||f.g==u)&&Cl(f),!q(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let Ee=b[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let Ct=Ee[3];Ct!=null&&(f.la=Ct,f.j.info("VER="+f.la));let Tt=Ee[4];Tt!=null&&(f.Aa=Tt,f.j.info("SVER="+f.Aa));let zs=Ee[5];zs!=null&&typeof zs=="number"&&0<zs&&(g=1.5*zs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let yn=u.g;if(yn){let bl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bl){var A=g.h;A.g||bl.indexOf("spdy")==-1&&bl.indexOf("quic")==-1&&bl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(tm(A,A.h),A.h=null))}if(g.D){let om=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(g.ya=om,Ve(g.I,g.D,om))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=u;if(g.qa=yT(g,g.J?g.ia:null,g.W),k.K){GC(g.h,k);var Me=k,pt=g.L;pt&&(Me.I=pt),Me.B&&(Xp(Me),ml(Me)),g.g=k}else hT(g);0<f.i.length&&El(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Ni(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Ni(f,7):rm(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}za(4)}catch{}}var TO=class{constructor(u,d){this.g=u,this.map=d}};function HC(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qC(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zC(u){return u.h?1:u.g?u.g.size:0}function em(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function tm(u,d){u.g?u.g.add(d):u.h=d}function GC(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}HC.prototype.cancel=function(){if(this.i=WC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function WC(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return N(u.i)}function bO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function DO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function KC(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=DO(u),g=bO(u),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],u)}var QC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SO(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),b=null;if(0<=g){var A=u[f].substring(0,g);b=u[f].substring(g+1)}else A=u[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ri(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ri){this.h=u.h,gl(this,u.j),this.o=u.o,this.g=u.g,yl(this,u.s),this.l=u.l;var d=u.i,f=new Ja;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),YC(this,f),this.m=u.m}else u&&(d=String(u).match(QC))?(this.h=!1,gl(this,d[1]||"",!0),this.o=Qa(d[2]||""),this.g=Qa(d[3]||"",!0),yl(this,d[4]),this.l=Qa(d[5]||"",!0),YC(this,d[6]||"",!0),this.m=Qa(d[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}Ri.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ya(d,JC,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ya(d,JC,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ya(f,f.charAt(0)=="/"?NO:RO,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ya(f,xO)),u.join("")};function hr(u){return new Ri(u)}function gl(u,d,f){u.j=f?Qa(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function yl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function YC(u,d,f){d instanceof Ja?(u.i=d,PO(u.i,u.h)):(f||(d=Ya(d,MO)),u.i=new Ja(d,u.h))}function Ve(u,d,f){u.i.set(d,f)}function vl(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Qa(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ya(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,AO),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function AO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var JC=/[#\/\?@]/g,RO=/[#\?:]/g,NO=/[#\?]/g,MO=/[#\?@]/g,xO=/#/g;function Ja(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function $r(u){u.g||(u.g=new Map,u.h=0,u.i&&SO(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ja.prototype,t.add=function(u,d){$r(this),this.i=null,u=Hs(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function XC(u,d){$r(u),d=Hs(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function ZC(u,d){return $r(u),d=Hs(u,d),u.g.has(d)}t.forEach=function(u,d){$r(this),this.g.forEach(function(f,g){f.forEach(function(b){u.call(d,b,g,this)},this)},this)},t.na=function(){$r(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=u[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(u){$r(this);let d=[];if(typeof u=="string")ZC(this,u)&&(d=d.concat(this.g.get(Hs(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},t.set=function(u,d){return $r(this),this.i=null,u=Hs(this,u),ZC(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function eT(u,d,f){XC(u,d),0<f.length&&(u.i=null,u.g.set(Hs(u,d),N(f)),u.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var b=A;k[g]!==""&&(b+="="+encodeURIComponent(String(k[g]))),u.push(b)}}return this.i=u.join("&")};function Hs(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function PO(u,d){d&&!u.j&&($r(u),u.i=null,u.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(XC(this,g),eT(this,b,f))},u)),u.j=d}function OO(u,d){let f=new Wa;if(a.Image){let g=new Image;g.onload=v(Hr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Hr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Hr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Hr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function kO(u,d){let f=new Wa,g=new AbortController,b=setTimeout(()=>{g.abort(),Hr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Hr(f,"TestPingServer: ok",!0,d):Hr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Hr(f,"TestPingServer: error",!1,d)})}function Hr(u,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function FO(){this.g=new vO}function LO(u,d,f){let g=f||"";try{KC(u,function(b,A){let k=b;l(b)&&(k=zp(b)),d.push(g+A+"="+encodeURIComponent(k))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Xa(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Xa,Gp),Xa.prototype.g=function(){return new _l(this.l,this.j)},Xa.prototype.i=function(u){return function(){return u}}({});function _l(u,d){Et.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(_l,Et),t=_l.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ec(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Za(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ec(this)),this.g&&(this.readyState=3,ec(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function tT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Za(this):ec(this),this.readyState==3&&tT(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Za(this))},t.Qa=function(u){this.g&&(this.response=u,Za(this))},t.ga=function(){this.g&&Za(this)};function Za(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ec(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ec(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function nT(u){let d="";return ie(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function nm(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=nT(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Ve(u,d,f))}function qe(u){Et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(qe,Et);var VO=/^https?$/i,UO=["POST","PUT"];t=qe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qp.g(),this.v=this.o?MC(this.o):MC(Qp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){rT(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UO,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oT(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){rT(this,A)}};function rT(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,iT(u),wl(u)}function iT(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sT(this):this.bb())},t.bb=function(){sT(this)};function sT(u){if(u.h&&typeof o<"u"&&(!u.v[1]||fr(u)!=4||u.Z()!=2)){if(u.u&&fr(u)==4)SC(u.Ea,0,u);else if(Ot(u,"readystatechange"),fr(u)==4){u.h=!1;try{let k=u.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var b=String(u.D).match(QC)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!VO.test(b?b.toLowerCase():"")}f=g}if(f)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var A=2<fr(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",iT(u)}}finally{wl(u)}}}}function wl(u,d){if(u.g){oT(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Ot(u,"ready");try{f.onreadystatechange=g}catch{}}}function oT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function fr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),yO(d)}};function aT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function jO(u){let d={};u=(u.g&&2<=fr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var f=T(u[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}C(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tc(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function cT(u){this.Aa=0,this.i=[],this.j=new Wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tc("baseRetryDelayMs",5e3,u),this.cb=tc("retryDelaySeedMs",1e4,u),this.Wa=tc("forwardChannelMaxRetries",2,u),this.wa=tc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new HC(u&&u.concurrentRequestLimit),this.Da=new FO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cT.prototype,t.la=8,t.G=1,t.connect=function(u,d,f,g){kt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=yT(this,null,this.W),El(this)};function rm(u){if(uT(u),u.G==3){var d=u.U++,f=hr(u.I);if(Ve(f,"SID",u.K),Ve(f,"RID",d),Ve(f,"TYPE","terminate"),nc(u,f),d=new Br(u,u.j,d),d.L=2,d.v=vl(hr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=vT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ml(d)}gT(u)}function Il(u){u.g&&(sm(u),u.g.cancel(),u.g=null)}function uT(u){Il(u),u.u&&(a.clearTimeout(u.u),u.u=null),Cl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function El(u){if(!qC(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ua||IC(),ja||(Ua(),ja=!0),Fp.add(d,u),u.B=0}}function BO(u,d){return zC(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ga(m(u.Ga,u,d),mT(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let b=new Br(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=dT(this,b,d),f=hr(this.I),Ve(f,"RID",u),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),nc(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(nT(A)))+"&"+d:this.m&&nm(f,this.m,A)),tm(this.h,b),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",d),Ve(f,"SID","null"),b.T=!0,Jp(b,f,null)):Jp(b,f,d),this.G=2}}else this.G==3&&(u?lT(this,u):this.i.length==0||qC(this.h)||lT(this))};function lT(u,d){var f;d?f=d.l:f=u.U++;let g=hr(u.I);Ve(g,"SID",u.K),Ve(g,"RID",f),Ve(g,"AID",u.T),nc(u,g),u.m&&u.o&&nm(g,u.m,u.o),f=new Br(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=dT(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),tm(u.h,f),Jp(f,g,d)}function nc(u,d){u.H&&ie(u.H,function(f,g){Ve(d,g,f)}),u.l&&KC({},function(f,g){Ve(d,g,f)})}function dT(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var b=u.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=b[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Me=!0;for(let pt=0;pt<f;pt++){let Ee=b[pt].g,Ct=b[pt].map;if(Ee-=A,0>Ee)A=Math.max(0,b[pt].g-100),Me=!1;else try{LO(Ct,k,"req"+Ee+"_")}catch{g&&g(Ct)}}if(Me){g=k.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function hT(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ua||IC(),ja||(Ua(),ja=!0),Fp.add(d,u),u.v=0}}function im(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ga(m(u.Fa,u),mT(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,fT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ga(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Il(this),fT(this))};function sm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function fT(u){u.g=new Br(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=hr(u.qa);Ve(d,"RID","rpc"),Ve(d,"SID",u.K),Ve(d,"AID",u.T),Ve(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(d,"TO",u.ja),Ve(d,"TYPE","xmlhttp"),nc(u,d),u.m&&u.o&&nm(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=vl(hr(d)),f.m=null,f.P=!0,jC(f,u)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),im(this),kt(19))};function Cl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function pT(u,d){var f=null;if(u.g==d){Cl(u),sm(u),u.g=null;var g=2}else if(em(u.h,d))f=d.D,GC(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=u.B;g=hl(),Ot(g,new FC(g,f)),El(u)}else hT(u);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&BO(u,d)||g==2&&im(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),b){case 1:Ni(u,5);break;case 4:Ni(u,10);break;case 3:Ni(u,6);break;default:Ni(u,2)}}}function mT(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Ni(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let b=!g;g=new Ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gl(g,"https"),vl(g),b?OO(g.toString(),f):kO(g.toString(),f)}else kt(2);u.G=0,u.l&&u.l.sa(d),gT(u),uT(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function gT(u){if(u.G=0,u.ka=[],u.l){let d=WC(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function yT(u,d,f){var g=f instanceof Ri?hr(f):new Ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),yl(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Ri(null);g&&gl(A,g),d&&(A.g=d),b&&yl(A,b),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Ve(g,f,d),Ve(g,"VER",u.la),nc(u,g),g}function vT(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new qe(new Xa({eb:f})):new qe(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _T(){}t=_T.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(u,d){return new Qt(u,d)};function Qt(u,d){Et.call(this),this.g=new cT(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!q(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new qs(this)}D(Qt,Et),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){rm(this.g)},Qt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=zp(u),u=f);d.i.push(new TO(d.Ya++,u)),d.G==3&&El(d)},Qt.prototype.N=function(){this.g.l=null,delete this.j,rm(this.g),delete this.g,Qt.aa.N.call(this)};function wT(u){Wp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}D(wT,Wp);function IT(){Kp.call(this),this.status=1}D(IT,Kp);function qs(u){this.g=u}D(qs,_T),qs.prototype.ua=function(){Ot(this.g,"a")},qs.prototype.ta=function(u){Ot(this.g,new wT(u))},qs.prototype.sa=function(u){Ot(this.g,new IT)},qs.prototype.ra=function(){Ot(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,tw=Pr.createWebChannelTransport=function(){return new Tl},ew=Pr.getStatEventTarget=function(){return hl()},Z_=Pr.Event=Si,Af=Pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,Iu=Pr.ErrorCode=fl,LC.COMPLETE="complete",X_=Pr.EventType=LC,xC.EventType=qa,qa.OPEN="a",qa.CLOSE="b",qa.ERROR="c",qa.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Jo=Pr.WebChannel=xC,J_=Pr.FetchXmlHttpFactory=Xa,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Y_=Pr.XhrIo=qe}).apply(typeof Sf<"u"?Sf:typeof self<"u"?self:typeof window<"u"?window:{});var wN="@firebase/firestore";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var va="10.12.1";var bs=new Yn("@firebase/firestore");function Eu(){return bs.logLevel}function H(t,...e){if(bs.logLevel<=de.DEBUG){let n=e.map($I);bs.debug(`Firestore (${va}): ${t}`,...n)}}function Or(t,...e){if(bs.logLevel<=de.ERROR){let n=e.map($I);bs.error(`Firestore (${va}): ${t}`,...n)}}function sa(t,...e){if(bs.logLevel<=de.WARN){let n=e.map($I);bs.warn(`Firestore (${va}): ${t}`,...n)}}function $I(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function te(t="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+t;throw Or(e),new Error(e)}function Le(t,e){t||te()}function oe(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var or=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Pf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ow=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}},aw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},cw=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new or,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>I(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new or)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new Pf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new ht(e)}},uw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new uw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new dw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function rz(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=rz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Se(t,e){return t<e?-1:t>e?1:0}function oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var wt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new wt(0,0))}static max(){return new t(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var kf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},$e=class t extends kf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},iz=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rn=class t extends kf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return iz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t($e.fromString(e))}static fromName(e){return new t($e.fromString(e).popFirst(5))}static empty(){return new t($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new $e(e.slice()))}};var fw=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};fw.UNKNOWN_ID=-1;function sz(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Ds(i,Y.empty(),e)}function oz(t){return new Ds(t.readTime,t.key,-1)}var Ds=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ae.min(),Y.empty(),-1)}static max(){return new t(ae.max(),Y.empty(),-1)}};function az(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}var cz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ju(t){return I(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==cz)throw t;H("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function uz(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bu(t){return t.name==="IndexedDbTransactionError"}var JN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function up(t){return t==null}function Au(t){return t===0&&1/t==-1/0}function lz(t){return typeof t=="number"&&Number.isInteger(t)&&!Au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var dz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qZ=[...dz,"documentOverlays"],hz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fz=hz,zZ=[...fz,"indexConfiguration","indexState","indexEntries"];function IN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _a(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Qe=class t{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ta(this.root,e,this.comparator,!0)}},ta=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ar=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nt=class t{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ff(this.data.getIterator())}getIteratorFrom(e){return new Ff(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ff=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var sr=class t{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Nt(rn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Lf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jt.EMPTY_BYTE_STRING=new jt("");var pz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(Le(!!t),typeof t=="string"){let e=0,n=pz.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ei(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}function HI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qI(t){let e=t.mapValue.fields.__previous_value__;return HI(e)?qI(e):e}function Ru(t){let e=kr(t.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}var mw=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Vf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Rf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?HI(t)?4:ZN(t)?9007199254740991:10:te()}function lr(t,e){if(t===e)return!0;let n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ru(t).isEqual(Ru(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=kr(i.timestampValue),a=kr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ei(i.bytesValue).isEqual(Ei(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?Au(o)===Au(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oa(t.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IN(o)!==IN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!lr(o[c],a[c])))return!1;return!0}(t,e);default:return te()}}function Nu(t,e){return(t.values||[]).find(n=>lr(n,e))!==void 0}function aa(t,e){if(t===e)return 0;let n=Ss(t),r=Ss(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ke(s.integerValue||s.doubleValue),c=Ke(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return EN(t.timestampValue,e.timestampValue);case 4:return EN(Ru(t),Ru(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Ei(s),c=Ei(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Se(a[l],c[l]);if(h!==0)return h}return Se(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Se(Ke(s.latitude),Ke(o.latitude));return a!==0?a:Se(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let h=aa(a[l],c[l]);if(h)return h}return Se(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Rf.mapValue&&o===Rf.mapValue)return 0;if(s===Rf.mapValue)return 1;if(o===Rf.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=Se(c[p],h[p]);if(m!==0)return m;let v=aa(a[c[p]],l[h[p]]);if(v!==0)return v}return Se(c.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function EN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);let n=kr(t),r=kr(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function ca(t){return gw(t)}function gw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=gw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${gw(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function CN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yw(t){return!!t&&"integerValue"in t}function zI(t){return!!t&&"arrayValue"in t}function TN(t){return!!t&&"nullValue"in t}function bN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mf(t){return!!t&&"mapValue"in t}function Tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return _a(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Mn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(n)}setAll(e){let n=rn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Tu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_a(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Tu(this.value))}};function eM(t){let e=[];return _a(t.fields,(n,r)=>{let i=new rn([n]);if(Mf(r)){let s=eM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new sr(e)}var xn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ae.min(),ae.min(),ae.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ae.min(),ae.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ae.min(),ae.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ua=class{constructor(e,n){this.position=e,this.inclusive=n}};function DN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=aa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function SN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lr(t.position[n],e.position[n]))return!1;return!0}var la=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function mz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Uf=class{},st=class t extends Uf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _w(e,n,r):n==="array-contains"?new Ew(e,r):n==="in"?new Cw(e,r):n==="not-in"?new Tw(e,r):n==="array-contains-any"?new bw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ww(e,r):new Iw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(aa(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Pn=class t extends Uf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return tM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function tM(t){return t.op==="and"}function nM(t){return gz(t)&&tM(t)}function gz(t){for(let e of t.filters)if(e instanceof Pn)return!1;return!0}function vw(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(nM(t))return t.filters.map(e=>vw(e)).join(",");{let e=t.filters.map(n=>vw(n)).join(",");return`${t.op}(${e})`}}function rM(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&lr(r.value,i.value)}(t,e):t instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&rM(o,i.filters[a]),!0):!1}(t,e):void te()}function iM(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map(iM).join(" ,")+"}"}(t):"Filter"}var _w=class extends st{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},ww=class extends st{constructor(e,n){super(e,"in",n),this.keys=sM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Iw=class extends st{constructor(e,n){super(e,"not-in",n),this.keys=sM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function sM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var Ew=class extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return zI(n)&&Nu(n.arrayValue,this.value)}},Cw=class extends st{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}},Tw=class extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Nu(this.value.arrayValue,n)}},bw=class extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!zI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nu(this.value.arrayValue,r))}};var Dw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function AN(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Dw(t,e,n,r,i,s,o)}function GI(t){let e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),up(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.ue=n}return e.ue}function WI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SN(t.startAt,e.startAt)&&SN(t.endAt,e.endAt)}function Sw(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var As=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function yz(t,e,n,r,i,s,o,a){return new As(t,e,n,r,i,s,o,a)}function oM(t){return new As(t)}function RN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aM(t){return t.collectionGroup!==null}function bu(t){let e=oe(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(rn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new la(s,r))}),n.has(rn.keyField().canonicalString())||e.ce.push(new la(rn.keyField(),r))}return e.ce}function cr(t){let e=oe(t);return e.le||(e.le=vz(e,bu(t))),e.le}function vz(t,e){if(t.limitType==="F")return AN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new la(i.field,s)});let n=t.endAt?new ua(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ua(t.startAt.position,t.startAt.inclusive):null;return AN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Aw(t,e){let n=t.filters.concat([e]);return new As(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rw(t,e,n){return new As(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lp(t,e){return WI(cr(t),cr(e))&&t.limitType===e.limitType}function cM(t){return`${GI(cr(t))}|lt:${t.limitType}`}function Xo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>iM(i)).join(", ")}]`),up(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ca(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ca(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of bu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=DN(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,bu(r),i)||r.endAt&&!function(o,a,c){let l=DN(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,bu(r),i))}(t,e)}function _z(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uM(t){return(e,n)=>{let r=!1;for(let i of bu(t)){let s=wz(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wz(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?aa(c,l):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}var Ci=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return XN(this.inner)}size(){return this.innerSize}};var Iz=new Qe(Y.comparator);function Fr(){return Iz}var lM=new Qe(Y.comparator);function Cu(...t){let e=lM;for(let n of t)e=e.insert(n.key,n);return e}function dM(t){let e=lM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Es(){return Du()}function hM(){return Du()}function Du(){return new Ci(t=>t.toString(),(t,e)=>t.isEqual(e))}var Ez=new Qe(Y.comparator),Cz=new Nt(Y.comparator);function pe(...t){let e=Cz;for(let n of t)e=e.add(n);return e}var Tz=new Nt(Se);function bz(){return Tz}function fM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function pM(t){return{integerValue:""+t}}function Dz(t,e){return lz(e)?pM(e):fM(t,e)}var da=class{constructor(){this._=void 0}};function Sz(t,e,n){return t instanceof ha?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&HI(s)&&(s=qI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Rs?gM(t,e):t instanceof Ns?yM(t,e):function(i,s){let o=mM(i,s),a=NN(o)+NN(i.Pe);return yw(o)&&yw(i.Pe)?pM(a):fM(i.serializer,a)}(t,e)}function Az(t,e,n){return t instanceof Rs?gM(t,e):t instanceof Ns?yM(t,e):n}function mM(t,e){return t instanceof fa?function(r){return yw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ha=class extends da{},Rs=class extends da{constructor(e){super(),this.elements=e}};function gM(t,e){let n=vM(e);for(let r of t.elements)n.some(i=>lr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ns=class extends da{constructor(e){super(),this.elements=e}};function yM(t,e){let n=vM(e);for(let r of t.elements)n=n.filter(i=>!lr(i,r));return{arrayValue:{values:n}}}var fa=class extends da{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function NN(t){return Ke(t.integerValue||t.doubleValue)}function vM(t){return zI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Rz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rs&&i instanceof Rs||r instanceof Ns&&i instanceof Ns?oa(r.elements,i.elements,lr):r instanceof fa&&i instanceof fa?lr(r.Pe,i.Pe):r instanceof ha&&i instanceof ha}(t.transform,e.transform)}var Nw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ts=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var pa=class{};function _M(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jf(t.key,Ts.none()):new Ms(t.key,t.data,Ts.none());{let n=t.data,r=Mn.empty(),i=new Nt(rn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lr(t.key,r,new sr(i.toArray()),Ts.none())}}function Nz(t,e,n){t instanceof Ms?function(i,s,o){let a=i.value.clone(),c=xN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(i,s,o){if(!xf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=xN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(wM(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Su(t,e,n,r){return t instanceof Ms?function(s,o,a,c){if(!xf(s.precondition,o))return a;let l=s.value.clone(),h=PN(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(s,o,a,c){if(!xf(s.precondition,o))return a;let l=PN(s.fieldTransforms,c,o),h=o.data;return h.setAll(wM(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return xf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Mz(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=mM(r.transform,i||null);s!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,s))}return n||null}function MN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oa(r,i,(s,o)=>Rz(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ms=class extends pa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lr=class extends pa{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function wM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function xN(t,e,n){let r=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Az(o,a,n[i]))}return r}function PN(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Sz(s,o,e))}return r}var jf=class extends pa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Mw=class extends pa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Nz(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Su(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=hM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=_M(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(n,r)=>MN(n,r))&&oa(this.baseMutations,e.baseMutations,(n,r)=>MN(n,r))}},Pw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Le(e.mutations.length===r.length);let i=function(){return Ez}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Ow=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var kw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var rt,_e;function xz(t){switch(t){default:return te();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function IM(t){if(t===void 0)return Or("GRPC error has no .code"),M.UNKNOWN;switch(t){case rt.OK:return M.OK;case rt.CANCELLED:return M.CANCELLED;case rt.UNKNOWN:return M.UNKNOWN;case rt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case rt.INTERNAL:return M.INTERNAL;case rt.UNAVAILABLE:return M.UNAVAILABLE;case rt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case rt.NOT_FOUND:return M.NOT_FOUND;case rt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case rt.ABORTED:return M.ABORTED;case rt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case rt.DATA_LOSS:return M.DATA_LOSS;default:return te()}}(_e=rt||(rt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var ON=null;function Pz(){return new TextEncoder}var Oz=new wi([4294967295,4294967295],0);function kN(t){let e=Pz().encode(t),n=new Q_;return n.update(e),new Uint8Array(n.digest())}function FN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wi([n,r],0),new wi([i,s],0)]}var Fw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cs(`Invalid padding: ${n}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wi.fromNumber(r)));return i.compare(Oz)===1&&(i=new wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=kN(e),[r,i]=FN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=kN(e),[r,i]=FN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Cs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bf=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ae.min(),i,new Qe(Se),Fr(),pe())}},Mu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,pe(),pe(),pe())}};var ra=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},$f=class{constructor(e,n){this.targetId=e,this.me=n}},Hf=class{constructor(e,n,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},qf=class{constructor(){this.fe=0,this.ge=VN(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new Mu(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=VN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Lw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=LN(),this.Qe=new Qe(Se)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Sw(s))if(r===0){let o=new Y(s.path);this.Ue(n,o,xn.newNoDocument(o,ae.min()))}else Le(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}ON?.et(function(h,p,m,v,D){var N,R,x,q,z,K;let ke={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ie=p.unchangedNames;return ie&&(ke.bloomFilter={applied:D===0,hashCount:(N=ie?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(q=(x=(R=ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&q!==void 0?q:0,padding:(K=(z=ie?.bits)===null||z===void 0?void 0:z.padding)!==null&&K!==void 0?K:0,mightContain:C=>{var y;return(y=v?.mightContain(C))!==null&&y!==void 0&&y}}),ke}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Ei(r).toUint8Array()}catch(c){if(c instanceof Lf)return sa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Fw(o,i,s)}catch(c){return sa(c instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Sw(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,xn.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Bf(e,n,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=LN(),this.Qe=new Qe(Se),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new qf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function LN(){return new Qe(Y.comparator)}function VN(){return new Qe(Y.comparator)}var kz={asc:"ASCENDING",desc:"DESCENDING"},Fz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lz={and:"AND",or:"OR"},Vw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Uw(t,e){return t.useProto3Json||up(e)?e:{value:e}}function zf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Vz(t,e){return zf(t,e.toTimestamp())}function ur(t){return Le(!!t),ae.fromTimestamp(function(n){let r=kr(n);return new wt(r.seconds,r.nanos)}(t))}function KI(t,e){return jw(t,e).canonicalString()}function jw(t,e){let n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CM(t){let e=$e.fromString(t);return Le(AM(e)),e}function Bw(t,e){return KI(t.databaseId,e.path)}function nw(t,e){let n=CM(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(bM(n))}function TM(t,e){return KI(t.databaseId,e)}function Uz(t){let e=CM(t);return e.length===4?$e.emptyPath():bM(e)}function $w(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bM(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function UN(t,e,n){return{name:Bw(t,e),fields:n.value.mapValue.fields}}function jz(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Le(h===void 0||typeof h=="string"),jt.fromBase64String(h||"")):(Le(h===void 0||h instanceof Buffer||h instanceof Uint8Array),jt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:IM(l.code);return new B(h,l.message||"")}(o);n=new Hf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nw(t,r.document.name),s=ur(r.document.updateTime),o=r.document.createTime?ur(r.document.createTime):ae.min(),a=new Mn({mapValue:{fields:r.document.fields}}),c=xn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ra(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nw(t,r.document),s=r.readTime?ur(r.readTime):ae.min(),o=xn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ra([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nw(t,r.document),s=r.removedTargetIds||[];n=new ra([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new kw(i,s),a=r.targetId;n=new $f(a,o)}}return n}function Bz(t,e){let n;if(e instanceof Ms)n={update:UN(t,e.key,e.value)};else if(e instanceof jf)n={delete:Bw(t,e.key)};else if(e instanceof Lr)n={update:UN(t,e.key,e.data),updateMask:Yz(e.fieldMask)};else{if(!(e instanceof Mw))return te();n={verify:Bw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ha)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ns)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Vz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function $z(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ur(i.updateTime):ur(s);return o.isEqual(ae.min())&&(o=ur(s)),new Nw(o,i.transformResults||[])}(n,e))):[]}function Hz(t,e){return{documents:[TM(t,e.path)]}}function qz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TM(t,i);let s=function(l){if(l.length!==0)return SM(Pn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Zo(m.field),direction:Wz(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Uw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function zz(t){let e=Uz(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Le(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=DM(p);return m instanceof Pn&&nM(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(D){return new la(ea(D.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,up(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new ua(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new ua(v,m)}(n.endAt)),yz(e,i,o,s,a,"F",c,l)}function Gz(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ea(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ea(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ea(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ea(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return st.create(ea(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>DM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function Wz(t){return kz[t]}function Kz(t){return Fz[t]}function Qz(t){return Lz[t]}function Zo(t){return{fieldPath:t.canonicalString()}}function ea(t){return rn.fromServerFormat(t.fieldPath)}function SM(t){return t instanceof st?function(n){if(n.op==="=="){if(bN(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NAN"}};if(TN(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bN(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NAN"}};if(TN(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(n.field),op:Kz(n.op),value:n.value}}}(t):t instanceof Pn?function(n){let r=n.getFilters().map(i=>SM(i));return r.length===1?r[0]:{compositeFilter:{op:Qz(n.op),filters:r}}}(t):te()}function Yz(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var xu=class t{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=jt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Hw=class{constructor(e){this.ct=e}};function Jz(t){let e=zz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rw(e,e.limit,"L"):e}var Gf=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ke(e.integerValue));else if("doubleValue"in e){let r=Ke(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Au(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=kr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ei(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?ZN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):te()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Y.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Gf.bt=new Gf;var qw=class{constructor(){this._n=new zw}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Ds.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},zw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt($e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt($e.comparator)).toArray()}};var WZ=new Uint8Array(0);var ir=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(41943040,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);var Pu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Gw=class{constructor(){this.changes=new Ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ww=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Kw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Su(r.mutation,i,sr.empty(),wt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){let i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Cu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Fr(),o=Du(),a=function(){return Du()}();return n.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Lr)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Su(h.mutation,l,h.mutation.getFieldMask(),wt.now())):o.set(l.key,sr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Ww(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Du(),i=new Qe((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let h=r.get(c)||sr.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||pe()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=hM();h.forEach(m=>{if(!s.has(m)){let v=_M(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Es()),a=-1,c=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,pe())).next(h=>({batchId:a,changes:dM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Cu();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=function(p,m){return new As(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,xn.newInvalidDocument(h)))});let a=Cu();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Su(h.mutation,l,sr.empty(),wt.now()),dp(n,l)&&(a=a.insert(c,l))}),a})}};var Qw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ur(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Jz(i.bundledQuery),readTime:ur(i.readTime)}}(n)),O.resolve()}};var Yw=class{constructor(){this.overlays=new Qe(Y.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Es();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Es(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Qe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Es(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Es(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ow(n,r));let s=this.hr.get(n);s===void 0&&(s=pe(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Ou=class{constructor(){this.Pr=new Nt(it.Ir),this.Tr=new Nt(it.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new it(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new it(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new Y(new $e([])),r=new it(n,e),i=new it(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new Y(new $e([])),r=new it(n,e),i=new it(n,e+1),s=pe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new it(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},it=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Y.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||Y.comparator(e.key,n.key)}};var Jw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Nt(it.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new xw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Se);return n.forEach(i=>{let s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new it(new Y(s),0),a=new Nt(Se);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{let s=new it(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new it(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Xw=class{constructor(e){this.vr=e,this.docs=function(){return new Qe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fr(),o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||az(oz(h),r)<=0||(i.has(h.key)||dp(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Zw(this)}getSize(e){return O.resolve(this.size)}},Zw=class extends Gw{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var eI=class{constructor(e){this.persistence=e,this.Mr=new Ci(n=>GI(n),WI),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ou,this.targetCount=0,this.Lr=Pu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Pu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}};var tI=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new JN(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new eI(this),this.indexManager=new qw,this.remoteDocumentCache=function(i){return new Xw(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Hw(n),this.$r=new Qw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Jw(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);let i=new nI(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},nI=class extends pw{constructor(e){super(),this.currentSequenceNumber=e}},rI=class t{constructor(e){this.persistence=e,this.zr=new Ou,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw te()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{let i=Y.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var iI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=pe(),i=pe();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var sI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var oI=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return yA()?8:uz(at())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new sI;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Eu()<=de.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(Eu()<=de.DEBUG&&H("QueryEngine","Query:",Xo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Eu()<=de.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):O.resolve())}ji(e,n){if(RN(n))return O.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Rw(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=pe(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Rw(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return RN(n)||i.isEqual(ae.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?O.resolve(null):(Eu()<=de.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xo(n)),this.es(e,o,n,sz(i,-1)).next(a=>a))})}Zi(e,n){let r=new Nt(uM(e));return n.forEach((i,s)=>{dp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Eu()<=de.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.zi.getDocumentsMatchingQuery(e,n,Ds.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var aI=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Qe(Se),this.rs=new Ci(s=>GI(s),WI),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kw(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function Xz(t,e,n,r){return new aI(t,e,n,r)}function RM(t,e){return I(this,null,function*(){let n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=pe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Zz(t,e){let n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=O.resolve();return m.forEach(D=>{v=v.next(()=>h.getEntry(c,D)).next(N=>{let R=l.docVersions.get(D);Le(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NM(t){let e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function eG(t,e){let n=oe(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(jt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,v,h)&&a.push(n.Qr.updateTargetData(s,v))});let c=Fr(),l=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(tG(s,o,e.documentUpdates).next(h=>{c=h.cs,l=h.ls})),!r.isEqual(ae.min())){let h=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function tG(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function nG(t,e){let n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rG(t,e){let n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new xu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function cI(t,e,n){return I(this,null,function*(){let r=oe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Bu(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function jN(t,e,n){let r=oe(t),i=ae.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=oe(c),m=p.rs.get(h);return m!==void 0?O.resolve(p.ns.get(m)):p.Qr.getTargetData(l,h)}(r,o,cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:pe())).next(a=>(iG(r,_z(e),a),{documents:a,hs:s})))}function iG(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Wf=class{constructor(){this.activeTargetIds=bz()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uI=class{constructor(){this.no=new Wf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Wf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lI=class{io(e){}shutdown(){}};var Kf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nf=null;function rw(){return Nf===null?Nf=function(){return 268435456+Math.round(2147483648*Math.random())}():Nf++,"0x"+Nf.toString(16)}var sG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Rt="WebChannelConnection",hI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=rw(),c=this.vo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,c,l,i).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw sa("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=sG[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=rw();return new Promise((o,a)=>{let c=new Y_;c.setWithCredentials(!0),c.listenOnce(X_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Iu.NO_ERROR:let h=c.getResponseJson();H(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Iu.TIMEOUT:H(Rt,`RPC '${e}' ${s} timed out`),a(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:let p=c.getStatus();if(H(Rt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let D=function(R){let x=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(x)>=0?x:M.UNKNOWN}(v.status);a(new B(D,v.message))}else a(new B(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(M.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{H(Rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);H(Rt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=rw(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tw(),a=ew(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new J_({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=s.join("");H(Rt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),m=!1,v=!1,D=new dI({lo:R=>{v?H(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(H(Rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),H(Rt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},ho:()=>p.close()}),N=(R,x,q)=>{R.listen(x,z=>{try{q(z)}catch(K){setTimeout(()=>{throw K},0)}})};return N(p,Jo.EventType.OPEN,()=>{v||(H(Rt,`RPC '${e}' stream ${i} transport opened.`),D.mo())}),N(p,Jo.EventType.CLOSE,()=>{v||(v=!0,H(Rt,`RPC '${e}' stream ${i} transport closed`),D.po())}),N(p,Jo.EventType.ERROR,R=>{v||(v=!0,sa(Rt,`RPC '${e}' stream ${i} transport errored:`,R),D.po(new B(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Jo.EventType.MESSAGE,R=>{var x;if(!v){let q=R.data[0];Le(!!q);let z=q,K=z.error||((x=z[0])===null||x===void 0?void 0:x.error);if(K){H(Rt,`RPC '${e}' stream ${i} received error:`,K);let ke=K.status,ie=function(_){let E=rt[_];if(E!==void 0)return IM(E)}(ke),C=K.message;ie===void 0&&(ie=M.INTERNAL,C="Unknown error status: "+ke+" with message "+K.message),v=!0,D.po(new B(ie,C)),p.close()}else H(Rt,`RPC '${e}' stream ${i} received:`,q),D.yo(q)}}),N(a,Z_.STAT_EVENT,R=>{R.stat===Af.PROXY?H(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Af.NOPROXY&&H(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.fo()},0),D}};function iw(){return typeof document<"u"?document:null}function hp(t){return new Vw(t,!0)}var Qf=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Yf=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Qf(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return I(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return I(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return I(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>I(this,null,function*(){this.state=0,this.start()}))}c_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fI=class extends Yf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=jz(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?ur(o.readTime):ae.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=$w(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Sw(c)?{documents:Hz(s,c)}:{query:qz(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=EM(s,o.resumeToken);let l=Uw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=zf(s,o.snapshotVersion.toTimestamp());let l=Uw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Gz(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=$w(this.serializer),n.removeTarget=e,this.i_(n)}},pI=class extends Yf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=$z(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.A_(r,n)}return Le(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=$w(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Bz(this.serializer,r))};this.i_(n)}};var mI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,jw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(M.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,jw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},gI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Or(n),this.y_=!1):H("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var yI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>I(this,null,function*(){xs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(c){return I(this,null,function*(){let l=oe(c);l.M_.add(4),yield $u(l),l.N_.set("Unknown"),l.M_.delete(4),yield fp(l)})}(this))}))}),this.N_=new gI(r,i)}};function fp(t){return I(this,null,function*(){if(xs(t))for(let e of t.x_)yield e(!0)})}function $u(t){return I(this,null,function*(){for(let e of t.x_)yield e(!1)})}function MM(t,e){let n=oe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),XI(n)?JI(n):wa(n).Xo()&&YI(n,e))}function QI(t,e){let n=oe(t),r=wa(n);n.F_.delete(e),r.Xo()&&xM(n,e),n.F_.size===0&&(r.Xo()?r.n_():xs(n)&&n.N_.set("Unknown"))}function YI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wa(t).P_(e)}function xM(t,e){t.L_.xe(e),wa(t).I_(e)}function JI(t){t.L_=new Lw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wa(t).start(),t.N_.w_()}function XI(t){return xs(t)&&!wa(t).Zo()&&t.F_.size>0}function xs(t){return oe(t).M_.size===0}function PM(t){t.L_=void 0}function oG(t){return I(this,null,function*(){t.N_.set("Online")})}function aG(t){return I(this,null,function*(){t.F_.forEach((e,n)=>{YI(t,e)})})}function cG(t,e){return I(this,null,function*(){PM(t),XI(t)?(t.N_.D_(e),JI(t)):t.N_.set("Unknown")})}function uG(t,e,n){return I(this,null,function*(){if(t.N_.set("Online"),e instanceof Hf&&e.state===2&&e.cause)try{yield function(i,s){return I(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jf(t,r)}else if(e instanceof ra?t.L_.Ke(e):e instanceof $f?t.L_.He(e):t.L_.We(e),!n.isEqual(ae.min()))try{let r=yield NM(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.F_.get(l);h&&s.F_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.F_.get(c);if(!h)return;s.F_.set(c,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),xM(s,c);let p=new xu(h.target,c,l,h.sequenceNumber);YI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield Jf(t,r)}})}function Jf(t,e,n){return I(this,null,function*(){if(!Bu(e))throw e;t.M_.add(1),yield $u(t),t.N_.set("Offline"),n||(n=()=>NM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield fp(t)}))})}function OM(t,e){return e().catch(n=>Jf(t,n,e))}function pp(t){return I(this,null,function*(){let e=oe(t),n=Ti(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;lG(e);)try{let i=yield nG(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,dG(e,i)}catch(i){yield Jf(e,i)}kM(e)&&FM(e)})}function lG(t){return xs(t)&&t.v_.length<10}function dG(t,e){t.v_.push(e);let n=Ti(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function kM(t){return xs(t)&&!Ti(t).Zo()&&t.v_.length>0}function FM(t){Ti(t).start()}function hG(t){return I(this,null,function*(){Ti(t).V_()})}function fG(t){return I(this,null,function*(){let e=Ti(t);for(let n of t.v_)e.d_(n.mutations)})}function pG(t,e,n){return I(this,null,function*(){let r=t.v_.shift(),i=Pw.from(r,e,n);yield OM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield pp(t)})}function mG(t,e){return I(this,null,function*(){e&&Ti(t).E_&&(yield function(r,i){return I(this,null,function*(){if(function(o){return xz(o)&&o!==M.ABORTED}(i.code)){let s=r.v_.shift();Ti(r).t_(),yield OM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield pp(r)}})}(t,e)),kM(t)&&FM(t)})}function BN(t,e){return I(this,null,function*(){let n=oe(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=xs(n);n.M_.add(3),yield $u(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield fp(n)})}function gG(t,e){return I(this,null,function*(){let n=oe(t);e?(n.M_.delete(2),yield fp(n)):e||(n.M_.add(2),yield $u(n),n.N_.set("Unknown"))})}function wa(t){return t.B_||(t.B_=function(n,r,i){let s=oe(n);return s.f_(),new fI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:oG.bind(null,t),To:aG.bind(null,t),Ao:cG.bind(null,t),h_:uG.bind(null,t)}),t.x_.push(e=>I(this,null,function*(){e?(t.B_.t_(),XI(t)?JI(t):t.N_.set("Unknown")):(yield t.B_.stop(),PM(t))}))),t.B_}function Ti(t){return t.k_||(t.k_=function(n,r,i){let s=oe(n);return s.f_(),new pI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:hG.bind(null,t),Ao:mG.bind(null,t),R_:fG.bind(null,t),A_:pG.bind(null,t)}),t.x_.push(e=>I(this,null,function*(){e?(t.k_.t_(),yield pp(t)):(yield t.k_.stop(),t.v_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var vI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZI(t,e){if(Or("AsyncQueue",`${e}: ${t}`),Bu(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Xf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Cu(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Zf=class{constructor(){this.q_=new Qe(Y.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):te():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},ma=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Xf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var _I=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},wI=class{constructor(){this.queries=new Ci(e=>cM(e),lp),this.onlineState="Unknown",this.z_=new Set}};function yG(t,e){return I(this,null,function*(){let n=oe(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new _I,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=ZI(o,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&eE(n)})}function vG(t,e){return I(this,null,function*(){let n=oe(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function _G(t,e){let n=oe(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&eE(n)}function wG(t,e,n){let r=oe(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function eE(t){t.z_.forEach(e=>{e.next()})}var II,$N;($N=II||(II={})).J_="default",$N.Cache="cache";var EI=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==II.Cache}};var ep=class{constructor(e){this.key=e}},tp=class{constructor(e){this.key=e}},CI=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=pe(),this.mutatedKeys=pe(),this.Ia=uM(e),this.Ta=new Xf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Zf,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=dp(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?D!==N&&(r.track({type:3,doc:v}),R=!0):this.Ra(m,v)||(r.track({type:2,doc:v}),R=!0,(c&&this.Ia(v,c)>0||l&&this.Ia(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((h,p)=>function(v,D){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return N(v)-N(D)}(h.type,p.type)||this.Ia(h.doc,p.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new ma(this.query,e.Ta,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Zf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=pe(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new tp(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new ep(r))}),n}pa(e){this.la=e.hs,this.Pa=pe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ma.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},TI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},bI=class{constructor(e){this.key=e,this.wa=!1}},DI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ci(a=>cM(a),lp),this.Da=new Map,this.Ca=new Set,this.va=new Qe(Y.comparator),this.Fa=new Map,this.Ma=new Ou,this.xa={},this.Oa=new Map,this.Na=Pu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function IG(t,e,n=!0){return I(this,null,function*(){let r=$M(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield LM(r,e,n,!0),i})}function EG(t,e){return I(this,null,function*(){let n=$M(t);yield LM(n,e,!0,!1)})}function LM(t,e,n,r){return I(this,null,function*(){let i=yield rG(t.localStore,cr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield CG(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&MM(t.remoteStore,i),a})}function CG(t,e,n,r,i){return I(this,null,function*(){t.Ba=(p,m,v)=>function(N,R,x,q){return I(this,null,function*(){let z=R.view.da(x);z.Xi&&(z=yield jN(N.localStore,R.query,!1).then(({documents:C})=>R.view.da(C,z)));let K=q&&q.targetChanges.get(R.targetId),ke=q&&q.targetMismatches.get(R.targetId)!=null,ie=R.view.applyChanges(z,N.isPrimaryClient,K,ke);return qN(N,R.targetId,ie.fa),ie.snapshot})}(t,p,m,v);let s=yield jN(t.localStore,e,!0),o=new CI(e,s.hs),a=o.da(s.documents),c=Mu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);qN(t,n,l.fa);let h=new TI(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function TG(t,e,n){return I(this,null,function*(){let r=oe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!lp(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&QI(r.remoteStore,i.targetId),SI(r,i.targetId)}).catch(ju))):(SI(r,i.targetId),yield cI(r.localStore,i.targetId,!0))})}function bG(t,e){return I(this,null,function*(){let n=oe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),QI(n.remoteStore,r.targetId))})}function DG(t,e,n){return I(this,null,function*(){let r=PG(t);try{let i=yield function(o,a){let c=oe(o),l=wt.now(),h=a.reduce((v,D)=>v.add(D.key),pe()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let D=Fr(),N=pe();return c.os.getEntries(v,h).next(R=>{D=R,D.forEach((x,q)=>{q.isValidDocument()||(N=N.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,D)).next(R=>{p=R;let x=[];for(let q of a){let z=Mz(q,p.get(q.key).overlayedDocument);z!=null&&x.push(new Lr(q.key,z,eM(z.value.mapValue),Ts.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,x,a)}).next(R=>{m=R;let x=R.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(v,R.batchId,x)})}).then(()=>({batchId:m.batchId,changes:dM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new Qe(Se)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Hu(r,i.changes),yield pp(r.remoteStore)}catch(i){let s=ZI(i,"Failed to persist write");n.reject(s)}})}function VM(t,e){return I(this,null,function*(){let n=oe(t);try{let r=yield eG(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Le(o.wa):i.removedDocuments.size>0&&(Le(o.wa),o.wa=!1))}),yield Hu(n,r,e)}catch(r){yield ju(r)}})}function HN(t,e,n){let r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=oe(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.U_)m.j_(a)&&(l=!0)}),l&&eE(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SG(t,e,n){return I(this,null,function*(){let r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Qe(Y.comparator);o=o.insert(s,xn.newNoDocument(s,ae.min()));let a=pe().add(s),c=new Bf(ae.min(),new Map,new Qe(Se),o,a);yield VM(r,c),r.va=r.va.remove(s),r.Fa.delete(e),tE(r)}else yield cI(r.localStore,e,!1).then(()=>SI(r,e,n)).catch(ju)})}function AG(t,e){return I(this,null,function*(){let n=oe(t),r=e.batch.batchId;try{let i=yield Zz(n.localStore,e);jM(n,r,null),UM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Hu(n,i)}catch(i){yield ju(i)}})}function RG(t,e,n){return I(this,null,function*(){let r=oe(t);try{let i=yield function(o,a){let c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Le(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);jM(r,e,n),UM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Hu(r,i)}catch(i){yield ju(i)}})}function UM(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function jM(t,e,n){let r=oe(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function SI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||BM(t,r)})}function BM(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(QI(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),tE(t))}function qN(t,e,n){for(let r of n)r instanceof ep?(t.Ma.addReference(r.key,e),NG(t,r)):r instanceof tp?(H("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||BM(t,r.key)):te()}function NG(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(H("SyncEngine","New document in limbo: "+n),t.Ca.add(r),tE(t))}function tE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new Y($e.fromString(e)),r=t.Na.next();t.Fa.set(r,new bI(n)),t.va=t.va.insert(n,r),MM(t.remoteStore,new xu(cr(oM(n.path)),r,"TargetPurposeLimboResolution",JN.oe))}}function Hu(t,e,n){return I(this,null,function*(){let r=oe(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=iI.Ki(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(c,l){return I(this,null,function*(){let h=oe(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.qi,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>O.forEach(m.Qi,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Bu(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.ns.get(m),D=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(D);h.ns=h.ns.insert(m,N)}}})}(r.localStore,s))})}function MG(t,e){return I(this,null,function*(){let n=oe(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield RM(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new B(M.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hu(n,r.us)}})}function xG(t,e){let n=oe(t),r=n.Fa.get(e);if(r&&r.wa)return pe().add(r.key);{let i=pe(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function $M(t){let e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SG.bind(null,e),e.Sa.h_=_G.bind(null,e.eventManager),e.Sa.ka=wG.bind(null,e.eventManager),e}function PG(t){let e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RG.bind(null,e),e}var np=class{constructor(){this.synchronizeTabs=!1}initialize(e){return I(this,null,function*(){this.serializer=hp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Xz(this.persistence,new oI,e.initialUser,this.serializer)}createPersistence(e){return new tI(rI.Hr,this.serializer)}createSharedClientState(e){return new uI}terminate(){return I(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var AI=class{initialize(e,n){return I(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MG.bind(null,this.syncEngine),yield gG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new wI}()}createDatastore(e){let n=hp(e.databaseInfo.databaseId),r=function(s){return new hI(s)}(e.databaseInfo);return function(s,o,a,c){return new mI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new yI(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>HN(this.syncEngine,n,0),function(){return Kf.D()?new Kf:new lI}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,h){let p=new DI(i,s,o,a,c,l);return h&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return I(this,null,function*(){var e;yield function(r){return I(this,null,function*(){let i=oe(r);H("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield $u(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var RI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var NI=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>I(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ZI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function sw(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield RM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function zN(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield kG(t);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>BN(e.remoteStore,i)),t._onlineComponents=e})}function OG(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function kG(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!OG(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),yield sw(t,new np)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield sw(t,new np);return t._offlineComponents})}function HM(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield zN(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield zN(t,new AI))),t._onlineComponents})}function FG(t){return HM(t).then(e=>e.syncEngine)}function LG(t){return I(this,null,function*(){let e=yield HM(t),n=e.eventManager;return n.onListen=IG.bind(null,e.syncEngine),n.onUnlisten=TG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bG.bind(null,e.syncEngine),n})}function VG(t,e,n={}){let r=new or;return t.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(s,o,a,c,l){let h=new RI({next:m=>{o.enqueueAndForget(()=>vG(s,p)),m.fromCache&&c.source==="server"?l.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new EI(a,h,{includeMetadataChanges:!0,ra:!0});return yG(s,p)}(yield LG(t),t.asyncQueue,e,n,r)})),r.promise}function qM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var GN=new Map;function zM(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UG(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WN(t){if(!Y.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KN(t){if(Y.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function rp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=mp(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ip=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ga=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ip({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ip(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ow;switch(r.type){case"firstParty":return new lw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=GN.get(n);r&&(H("ComponentProvider","Removing Datastore"),GN.delete(n),r.terminate())}(this),Promise.resolve()}};function GM(t,e,n,r={}){var i;let s=(t=rp(t,ga))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ht.MOCK_USER;else{a=Lh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ht(l)}t._authCredentials=new aw(new Pf(a,c))}}var ya=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},fn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ii=class t extends ya{constructor(e,n,r){super(e,n,oM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ps(t,e,...n){if(t=dt(t),zM("collection","path",e),t instanceof ga){let r=$e.fromString(e,...n);return KN(r),new Ii(t,null,r)}{if(!(t instanceof fn||t instanceof Ii))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child($e.fromString(e,...n));return KN(r),new Ii(t.firestore,null,r)}}function WM(t,e,...n){if(t=dt(t),arguments.length===1&&(e=Of.newId()),zM("doc","path",e),t instanceof ga){let r=$e.fromString(e,...n);return WN(r),new fn(t,null,new Y(r))}{if(!(t instanceof fn||t instanceof Ii))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child($e.fromString(e,...n));return WN(r),new fn(t.firestore,t instanceof Ii?t.converter:null,new Y(r))}}var MI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Qf(this,"async_queue_retry"),this.hu=()=>{let n=iw();n&&H("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=iw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=iw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new or;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return I(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Bu(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Or("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=vI.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&te()}verifyOperationInProgress(){}du(){return I(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var ku=class extends ga{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new MI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||YM(this),this._firestoreClient.terminate()}};function KM(t,e){let n=typeof t=="object"?t:hi(),r=typeof t=="string"?t:e||"(default)",i=hs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Fh("firestore");s&&GM(i,...s)}return i}function QM(t){return t._firestoreClient||YM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function YM(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,h){return new mw(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qM(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new NI(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Fu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(jt.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Lu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var sp=class{constructor(e){this._methodName=e}};var Vu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}};var jG=/^__.*__$/,xI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ms(e,this.data,n,this.fieldTransforms)}};function JM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var PI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return op(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(JM(this.fu)&&jG.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},OI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hp(e)}Fu(e,n,r,i=!1){return new PI({fu:e,methodName:n,vu:r,path:rn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function XM(t){let e=t._freezeSettings(),n=hp(t._databaseId);return new OI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BG(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);tx("Data must be an object, but it was:",o,r);let a=ZM(r,o),c,l;if(s.merge)c=new sr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=HG(e,p,n);if(!o.contains(m))throw new B(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zG(h,m)||h.push(m)}c=new sr(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new xI(new Mn(a),c,l)}function $G(t,e,n,r=!1){return nE(n,t.Fu(r?4:3,e))}function nE(t,e){if(ex(t=dt(t)))return tx("Unsupported field value:",e,t),ZM(t,e);if(t instanceof sp)return function(r,i){if(!JM(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=nE(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Dz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=wt.fromDate(r);return{timestampValue:zf(i.serializer,s)}}if(r instanceof wt){let s=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zf(i.serializer,s)}}if(r instanceof Vu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fu)return{bytesValue:EM(i.serializer,r._byteString)};if(r instanceof fn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:KI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${mp(r)}`)}(t,e)}function ZM(t,e){let n={};return XN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(t,(r,i)=>{let s=nE(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ex(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof Vu||t instanceof Fu||t instanceof fn||t instanceof sp)}function tx(t,e,n){if(!ex(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=mp(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function HG(t,e,n){if((e=dt(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return nx(t,e);throw op("Field path arguments must be of type string or ",t,!1,void 0,n)}var qG=new RegExp("[~\\*/\\[\\]]");function nx(t,e,n){if(e.search(qG)>=0)throw op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lu(...e.split("."))._internalPath}catch{throw op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function op(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new B(M.INVALID_ARGUMENT,a+t+c)}function zG(t,e){return t.some(n=>n.isEqual(e))}var ap=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new kI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(rE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},kI=class extends ap{data(){return super.data()}};function rE(t,e){return typeof e=="string"?nx(t,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}function GG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uu=class{},FI=class extends Uu{};function Ia(t,e,...n){let r=[];e instanceof Uu&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof LI).length,a=s.filter(c=>c instanceof cp).length;if(o>1||o>0&&a>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var cp=class t extends FI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return rx(e._query,n),new ya(e.firestore,e.converter,Aw(e._query,n))}_parse(e){let n=XM(e.firestore);return function(s,o,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){YN(p,h);let v=[];for(let D of p)v.push(QN(c,s,D));m={arrayValue:{values:v}}}else m=QN(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||YN(p,h),m=$G(a,o,p,h==="in"||h==="not-in");return st.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Ea(t,e,n){let r=e,i=rE("where",t);return cp._create(i,r,n)}var LI=class t extends Uu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)rx(o,c),o=Aw(o,c)}(e._query,n),new ya(e.firestore,e.converter,Aw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function QN(t,e,n){if(typeof(n=dt(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aM(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child($e.fromString(n));if(!Y.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CN(t,new Y(r))}if(n instanceof fn)return CN(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mp(n)}.`)}function YN(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rx(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var VI=class{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return _a(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Vu(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=qI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){let n=kr(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=$e.fromString(e);Le(AM(r));let i=new Vf(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||Or(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function WG(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var na=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},UI=class extends ap{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(rE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ia=class extends UI{data(e={}){return super.data(e)}},jI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new na(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ia(this._firestore,this._userDataWriter,r.key,r,new na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ia(i._firestore,i._userDataWriter,a.doc.key,a.doc,new na(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ia(i._firestore,i._userDataWriter,a.doc.key,a.doc,new na(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:KG(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function KG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}var BI=class extends VI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,n)}};function Os(t){t=rp(t,ya);let e=rp(t.firestore,ku),n=QM(e),r=new BI(e);return GG(t._query),VG(n,t._query).then(i=>new jI(e,r,t,i))}function iE(t,e){let n=rp(t.firestore,ku),r=WM(t),i=WG(t.converter,e);return QG(n,[BG(XM(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ts.exists(!1))]).then(()=>r)}function QG(t,e){return function(r,i){let s=new or;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return DG(yield FG(r),i,s)})),s.promise}(QM(t),e)}(function(e,n=!0){(function(i){va=i})(er),Xn(new Wt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ku(new cw(r.getProvider("auth-internal")),new hw(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vf(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Be(wN,"4.6.3",e),Be(wN,"4.6.3","esm2017")})();var Bt=class{constructor(e){return e}},ix="firestore",sE=class{constructor(){return ps(ix)}};var oE=new $("angularfire2.firestore-instances");function YG(t,e){let n=qo(ix,t,e);return n&&new Bt(n)}function JG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bt(r)}}var XG={provide:sE,deps:[[new Je,oE]]},ZG={provide:Bt,useFactory:YG,deps:[[new Je,oE],Nn]};function sx(t,...e){return Be("angularfire",Sr.full,"fst"),zt([ZG,XG,{provide:oE,useFactory:JG(t),multi:!0,deps:[ve,gt,pi,Ar,[new Je,_s],[new Je,fi],...e]}])}var gp=Rn(Ps,!0);var yp=Rn(Os,!0);var ox=Rn(KM,!0);function eW(t,e){if(t&1&&(U(0,"div",21),X(1),L()),t&2){let n=Xe();re(),vt(" ",n.errorMessage," ")}}var aE=(()=>{let e=class e{constructor(r,i,s){this.firestore=r,this.Auth=i,this.router=s,this.email="",this.password="",this.emailLogeado="",this.errorMessage="",this.userDataSubject=new ot(null),this.userData$=this.userDataSubject.asObservable(),this.userType=null,localStorage.removeItem("userLogin"),localStorage.removeItem("userTipo")}ngOnInit(){this.userData$.subscribe(r=>{r&&(this.userType=r.tipo,localStorage.setItem("userLogin",this.email),localStorage.setItem("userTipo",this.userType?this.userType:""),this.router.navigateByUrl("/bienvenido"))})}LoginRapido(){this.email="prueba@prueba.com",this.password="prueba",this.userType=="admin"?(this.email="gusrot2@gmail.com",this.password="prueba"):(this.email="prueba@prueba.com",this.password="prueba"),O_(this.Auth,this.email,this.password).then(r=>{if(r.user.email!=null){let i=Ps(this.firestore,"usuarios"),s=Ia(i,Ea("email","==",this.email));Os(s).then(o=>{o.forEach(a=>{let c=a.data();this.userDataSubject.next(c)})}).catch(o=>this.errorMessage="Error al recuperar datos del usuario.")}}).catch(r=>this.errorMessage="El usuario y/o la contrase\xF1a son incorrectas.")}Login(){console.log(this.email),O_(this.Auth,String(this.email),String(this.password)).then(r=>{if(r.user.email!=null){localStorage.setItem("userLogin",r.user.email);let i=Ps(this.firestore,"usuarios"),s=Ia(i,Ea("email","==",this.email));Os(s).then(o=>{o.forEach(a=>{let c=a.data();this.userDataSubject.next(c)})}).catch(o=>this.errorMessage="Error al recuperar datos del usuario.")}}).catch(r=>this.errorMessage="El usuario y/o la contrase\xF1a son incorrectas.")}};e.\u0275fac=function(i){return new(i||e)(j(Bt),j(Mr),j(ct))},e.\u0275cmp=Ge({type:e,selectors:[["app-login"]],standalone:!0,features:[We],decls:35,vars:4,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["href",XD`https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css`,"rel","stylesheet"],[1,"min-h-screen","bg-gray-200","flex","items-center","justify-center"],[1,"bg-white","p-8","rounded-lg","shadow-lg","max-w-md","w-full"],[1,"text-2xl","font-bold","mb-6","text-center"],[1,"mb-4"],["for","email",1,"block","text-gray-700"],["name","email","type","email","id","email","required","",1,"w-full","px-3","py-2","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","password",1,"block","text-gray-700"],["name","password","type","password","id","password","required","",1,"w-full","px-3","py-2","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-lg",3,"click"],[1,"flex","items-center","justify-center"],[1,"w-64"],["for","userType",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","userType","name","userType",1,"w-full","border-gray-300","rounded-md","shadow-sm","focus:border-indigo-300","focus:ring","focus:ring-indigo-200","focus:ring-opacity-50",3,"ngModelChange","ngModel"],["value","admin"],["value","empleado"],[1,"mt-4","bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],["class","mt-4 p-4 text-red-700 bg-red-200 rounded-lg",4,"ngIf"],[1,"mt-4","p-4","text-red-700","bg-red-200","rounded-lg"]],template:function(i,s){i&1&&(U(0,"html",0)(1,"head"),Fe(2,"meta",1)(3,"meta",2),U(4,"title"),X(5,"Login Page"),L(),Fe(6,"link",3),L(),U(7,"body",4)(8,"div",5)(9,"h2",6),X(10,"Iniciar Sesi\xF3n"),L(),U(11,"form")(12,"div",7)(13,"label",8),X(14,"email"),L(),U(15,"input",9),Yi("ngModelChange",function(a){return Do(s.email,a)||(s.email=a),a}),L()(),U(16,"div",7)(17,"label",10),X(18,"Contrase\xF1a"),L(),U(19,"input",11),Yi("ngModelChange",function(a){return Do(s.password,a)||(s.password=a),a}),L()(),U(20,"div",7)(21,"button",12),Pe("click",function(){return s.Login()}),X(22,"Iniciar Sesi\xF3n"),L()(),U(23,"div",13)(24,"div",14)(25,"label",15),X(26,"Tipo de Usuario"),L(),U(27,"select",16),Yi("ngModelChange",function(a){return Do(s.userType,a)||(s.userType=a),a}),U(28,"option",17),X(29,"Admin"),L(),U(30,"option",18),X(31,"Empleado"),L()(),U(32,"button",19),Pe("click",function(){return s.LoginRapido()}),X(33,"Iniciar Sesi\xF3n R\xE1pida"),L()()(),yt(34,eW,2,1,"div",20),L()()()()),i&2&&(re(15),Qi("ngModel",s.email),re(4),Qi("ngModel",s.password),re(8),Qi("ngModel",s.userType),re(7),De("ngIf",s.errorMessage))},dependencies:[_t,dn,Df,Tf,dN,fN,Yo,bf,wf,If,K_,wu,q_]});let t=e;return t})();var Ca=(()=>{let e=class e{constructor(r,i){this.auth=r,this.router=i}closeSession(){localStorage.removeItem("userLogin"),this.router.navigateByUrl("/login")}navigateTo(r){this.router.navigateByUrl(r)}};e.\u0275fac=function(i){return new(i||e)(j(Mr),j(ct))},e.\u0275cmp=Ge({type:e,selectors:[["app-menu"]],standalone:!0,features:[We],decls:13,vars:0,consts:[[1,"bg-white","shadow-lg","fixed","top-0","left-0","w-full","z-50"],[1,"max-w-7xl","mx-auto","px-4"],[1,"flex","justify-between"],[1,"py-5","px-3","text-gray-700","hover:text-gray-900","cursor-pointer",3,"click"],[1,"hidden","md:flex","items-center","space-x-4"],[1,"hidden","md:flex","items-center","space-x-1"],[1,"py-2","px-3","bg-blue-500","text-white","rounded","hover:bg-blue-600","transition","duration-300","cursor-pointer",3,"click"]],template:function(i,s){i&1&&(U(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),Pe("click",function(){return s.navigateTo("bienvenido")}),X(4,"Inicio"),L(),U(5,"div",4)(6,"a",3),Pe("click",function(){return s.navigateTo("altarepartidor")}),X(7,"Alta repartidor"),L(),U(8,"a",3),Pe("click",function(){return s.navigateTo("listarepartidor")}),X(9,"Lista repartidor"),L()(),U(10,"div",5)(11,"button",6),Pe("click",function(){return s.closeSession()}),X(12,"Cerrar sesi\xF3n"),L()()()()())}});let t=e;return t})();function tW(t,e){if(t&1&&Fe(0,"img",6),t&2){let n=Xe();De("src",n.user.avatar_url,Wi)}}function nW(t,e){if(t&1&&(U(0,"h1",7),X(1),L()),t&2){let n=Xe();re(),bo(n.user.name)}}function rW(t,e){if(t&1&&(U(0,"p",8),X(1),L()),t&2){let n=Xe();re(),bo(n.user.login)}}function iW(t,e){if(t&1&&(U(0,"p",9),X(1),L()),t&2){let n=Xe();re(),vt("Repositorios: ",n.user.public_repos,"")}}function sW(t,e){if(t&1&&(U(0,"a",10),X(1," Ver perfil en GitHub "),L()),t&2){let n=Xe();De("href",n.user.html_url,Wi)}}var ax=(()=>{let e=class e{constructor(r){this.http=r,this.user=null}ngOnInit(){this.http.get("https://api.github.com/users/gustavorotela").subscribe(r=>this.user=r)}};e.\u0275fac=function(i){return new(i||e)(j(ts))},e.\u0275cmp=Ge({type:e,selectors:[["app-bienvenido"]],standalone:!0,features:[We],decls:7,vars:5,consts:[[1,"main-content","flex","flex-col","items-center","p-6","bg-gray-100","rounded-lg","shadow-md"],["alt","Avatar","class","w-24 h-24 rounded-full shadow-lg",3,"src",4,"ngIf"],["class","mt-4 text-xl font-bold text-gray-900",4,"ngIf"],["class","text-gray-700",4,"ngIf"],["class","mt-2 text-gray-600",4,"ngIf"],["target","_blank","class","mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600",3,"href",4,"ngIf"],["alt","Avatar",1,"w-24","h-24","rounded-full","shadow-lg",3,"src"],[1,"mt-4","text-xl","font-bold","text-gray-900"],[1,"text-gray-700"],[1,"mt-2","text-gray-600"],["target","_blank",1,"mt-4","px-4","py-2","bg-blue-500","text-white","rounded-lg","shadow","hover:bg-blue-600",3,"href"]],template:function(i,s){i&1&&(Fe(0,"app-menu"),U(1,"div",0),yt(2,tW,1,1,"img",1)(3,nW,2,1,"h1",2)(4,rW,2,1,"p",3)(5,iW,2,1,"p",4)(6,sW,2,1,"a",5),L()),i&2&&(re(2),De("ngIf",s.user),re(),De("ngIf",s.user),re(),De("ngIf",s.user),re(),De("ngIf",s.user),re(),De("ngIf",s.user))},dependencies:[_t,dn,oi,Ca],styles:[".main-content[_ngcontent-%COMP%]{margin-top:10%}"]});let t=e;return t})();function oW(t,e){if(t&1){let n=Jd();U(0,"li",4),Pe("click",function(){let i=Od(n).$implicit,s=Xe();return kd(s.selectCountry(i))}),Fe(1,"img",5),X(2),L()}if(t&2){let n=e.$implicit;re(),fy("alt",n.name.common),De("src",n.flags.png,Wi),re(),vt(" ",n.name.common," ")}}var cx=(()=>{let e=class e{constructor(r){this.http=r,this.countrySelected=new ze,this.countries=[]}ngOnInit(){this.cargarPaises()}cargarPaises(){return I(this,null,function*(){this.http.get("https://restcountries.com/v3.1/all").subscribe(r=>{this.countries=r.filter(i=>i.region==="Africa"||i.region==="Europe").slice(0,6)})})}selectCountry(r){this.countrySelected.emit(r.name.common)}};e.\u0275fac=function(i){return new(i||e)(j(ts))},e.\u0275cmp=Ge({type:e,selectors:[["app-listapaises"]],outputs:{countrySelected:"countrySelected"},standalone:!0,features:[We],decls:5,vars:1,consts:[[1,"flex","flex-col","items-center"],[1,"text-xl","font-bold","mb-4"],[1,"w-full"],["class","mb-2 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"mb-2","cursor-pointer",3,"click"],[1,"inline-block","w-6","h-6","mr-2",3,"src","alt"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"h3",1),X(2,"Seleccionar Pa\xEDs"),L(),U(3,"ul",2),yt(4,oW,3,3,"li",3),L()()),i&2&&(re(4),De("ngForOf",s.countries))},dependencies:[_t,ih,oi]});let t=e;return t})();var aW=()=>({standalone:!0});function cW(t,e){if(t&1&&(U(0,"div",17),X(1),L()),t&2){let n=Xe();re(),vt(" ",n.errorMessage," ")}}var ux=(()=>{let e=class e{constructor(r,i,s){this.fb=r,this.router=i,this.firestore=s,this.selectedCountry=null,this.errorMessage="",this.pais="",this.repartidorForm=this.fb.group({dni:["",rr.required],nombre:["",rr.required],edad:["",[rr.required,rr.min(18)]],capacidadTransporte:["",[rr.required,rr.min(1)]],unidadPropia:[!1,rr.required]})}ngOnInit(){}setCountry(r){this.selectedCountry=r,this.pais=r}onSubmit(){return I(this,null,function*(){if(this.errorMessage="",this.repartidorForm.valid){let r=Ce(V({},this.repartidorForm.value),{pais:this.selectedCountry}),i=this.repartidorForm.get("dni")?.value;if(i){let s=Ps(this.firestore,"repartidores"),o=Ia(s,Ea("dni","==",i));be(Os(o)).pipe(Z(a=>{a.empty?(iE(s,r),console.log("Repartidor added successfully")):this.errorMessage="El repartidor ya existe"})).subscribe({error:a=>console.error("Error checking document existence: ",a)})}}else this.repartidorForm.get("edad")?.value<18&&(this.errorMessage="La edad no puede ser menor a 18")})}};e.\u0275fac=function(i){return new(i||e)(j(mN),j(ct),j(Bt))},e.\u0275cmp=Ge({type:e,selectors:[["app-repartidoralta"]],standalone:!0,features:[We],decls:38,vars:5,consts:[[1,"main-content","max-w-4xl","mx-auto","bg-white","p-8","rounded","shadow-md","flex"],[1,"w-2/3"],[1,"text-2xl","font-bold","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"block","text-gray-700"],["formControlName","dni","type","text",1,"w-full","p-2","border","rounded"],["formControlName","nombre","type","text",1,"w-full","p-2","border","rounded"],["formControlName","edad","type","number",1,"w-full","p-2","border","rounded"],["formControlName","capacidadTransporte","type","number",1,"w-full","p-2","border","rounded"],["formControlName","unidadPropia","type","checkbox",1,"mr-2"],["type","submit",1,"w-full","p-2","bg-blue-500","text-white","rounded"],["class","mt-4 p-4 text-red-700 bg-red-200 rounded-lg",4,"ngIf"],["type","text","disabled","",1,"w-full","p-2","border","rounded",3,"ngModelChange","ngModel","ngModelOptions"],[1,"w-1/3","ml-4","bg-gray-100","p-4","rounded"],[1,"text-xl","font-bold","mb-4"],[3,"countrySelected"],[1,"mt-4","p-4","text-red-700","bg-red-200","rounded-lg"]],template:function(i,s){i&1&&(Fe(0,"app-menu"),U(1,"div",0)(2,"div",1)(3,"h2",2),X(4,"Alta de Repartidor"),L(),U(5,"form",3),Pe("ngSubmit",function(){return s.onSubmit()}),U(6,"div",4)(7,"label",5),X(8,"DNI"),L(),Fe(9,"input",6),L(),U(10,"div",4)(11,"label",5),X(12,"Nombre"),L(),Fe(13,"input",7),L(),U(14,"div",4)(15,"label",5),X(16,"Edad"),L(),Fe(17,"input",8),L(),U(18,"div",4)(19,"label",5),X(20,"Capacidad de Transporte (unidades de potes de helado)"),L(),Fe(21,"input",9),L(),U(22,"div",4)(23,"label",5),X(24,"Unidad Propia"),L(),Fe(25,"input",10),L(),U(26,"div",4)(27,"button",11),X(28,"Dar de Alta"),L()(),yt(29,cW,2,1,"div",12),U(30,"div",4)(31,"label",5),X(32,"Pa\xEDs seleccionado"),L(),U(33,"input",13),Yi("ngModelChange",function(a){return Do(s.pais,a)||(s.pais=a),a}),L()()()(),U(34,"div",14)(35,"h3",15),X(36,"Listado de Pa\xEDses"),L(),U(37,"app-listapaises",16),Pe("countrySelected",function(a){return s.setCountry(a)}),L()()()),i&2&&(re(5),De("formGroup",s.repartidorForm),re(24),De("ngIf",s.errorMessage),re(4),Qi("ngModel",s.pais),De("ngModelOptions",F0(4,aW)))},dependencies:[_t,dn,cx,gN,Tf,Yo,z_,V_,wf,If,G_,W_,oi,Df,wu,Ca],styles:[".main-content[_ngcontent-%COMP%]{margin-top:10%}"]});let t=e;return t})();var cE=(t,e)=>{let n=P(ct),r=localStorage.getItem("userLogin"),i=localStorage.getItem("userTipo");return r?!0:(n.navigate(["/login"]),!1)};function uW(t,e){if(t&1&&(U(0,"div")(1,"p"),X(2),L(),U(3,"p"),X(4),L(),U(5,"p"),X(6),L(),U(7,"p"),X(8),L(),U(9,"p"),X(10),L(),U(11,"p"),X(12),L()()),t&2){let n=Xe();re(2),vt("DNI: ",n.repartidor.dni,""),re(2),vt("Nombre: ",n.repartidor.nombre,""),re(2),vt("Edad: ",n.repartidor.edad,""),re(2),vt("Capacidad de Transporte: ",n.repartidor.capacidadTransporte," unidades"),re(2),vt("Unidad Propia: ",n.repartidor.unidadPropia?"S\xED":"No",""),re(2),vt("Pa\xEDs: ",n.repartidor.pais,"")}}var lx=(()=>{let e=class e{constructor(){this.repartidor=null}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ge({type:e,selectors:[["app-repartidor-detalle"]],inputs:{repartidor:"repartidor"},standalone:!0,features:[We],decls:4,vars:1,consts:[[1,"container","mx-auto","py-6"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"h1",1),X(2,"Detalle del Repartidor"),L(),yt(3,uW,13,6,"div",2),L()),i&2&&(re(3),De("ngIf",s.repartidor))},dependencies:[_t,dn,oi]});let t=e;return t})();function lW(t,e){if(t&1&&(U(0,"div",2)(1,"h2",3),X(2),L(),Fe(3,"img",4),L()),t&2){let n=Xe();re(2),bo(n.country.name.common),re(),Xd("alt","Flag of ",n.country.name.common,""),De("src",n.country.flags.png,Wi)}}function dW(t,e){t&1&&(U(0,"div",5)(1,"p",6),X(2,"No se pudo cargar la informaci\xF3n del pa\xEDs."),L()())}var dx=(()=>{let e=class e{constructor(r){this.http=r,this.pais=null,this.country=null}ngOnInit(){this.cargarPaises()}ngOnChanges(r){r.pais&&r.pais.currentValue&&this.cargarPaises()}cargarPaises(){this.pais&&this.http.get(`https://restcountries.com/v3.1/name/${this.pais}`).subscribe(r=>{this.country=r[0]},r=>{console.error("Error loading country data:",r),this.country=null})}};e.\u0275fac=function(i){return new(i||e)(j(ts))},e.\u0275cmp=Ge({type:e,selectors:[["app-paisdetalle"]],inputs:{pais:"pais"},standalone:!0,features:[Sn,We],decls:2,vars:2,consts:[["class","country-detail",4,"ngIf"],["class","country-not-found",4,"ngIf"],[1,"country-detail"],[1,"text-2xl","font-bold","mb-4"],[1,"w-32","h-auto","rounded","shadow-md",3,"src","alt"],[1,"country-not-found"],[1,"text-red-500"]],template:function(i,s){i&1&&yt(0,lW,4,4,"div",0)(1,dW,3,0,"div",1),i&2&&(De("ngIf",s.country),re(),De("ngIf",!s.country&&s.pais))},dependencies:[_t,dn]});let t=e;return t})();function hW(t,e){if(t&1){let n=Jd();U(0,"li",3),Pe("click",function(){let i=Od(n).$implicit,s=Xe();return kd(s.selectRepartidor(i))}),X(1),L()}if(t&2){let n=e.$implicit;re(),py(" ",n.nombre," - ",n.dni," ")}}var hx=(()=>{let e=class e{constructor(r,i){this.router=r,this.firestore=i,this.repartidorSelected=new ze,this.repartidores=[]}ngOnInit(){this.fetchRepartidores()}fetchRepartidores(){let r=gp(this.firestore,"repartidores");be(yp(r)).pipe(Z(i=>i.docs.map(s=>s.data()))).subscribe({next:i=>{this.repartidores=i},error:i=>console.error("Error fetching repartidores: ",i)})}selectRepartidor(r){this.repartidorSelected.emit(r)}};e.\u0275fac=function(i){return new(i||e)(j(ct),j(Bt))},e.\u0275cmp=Ge({type:e,selectors:[["app-listarepartidor"]],outputs:{repartidorSelected:"repartidorSelected"},standalone:!0,features:[We],decls:5,vars:1,consts:[[1,"container","mx-auto","py-6"],[1,"text-2xl","font-bold","mb-4"],["class","cursor-pointer mb-2 p-2 border rounded",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer","mb-2","p-2","border","rounded",3,"click"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"h1",1),X(2,"Listado de Repartidores"),L(),U(3,"ul"),yt(4,hW,2,2,"li",2),L()()),i&2&&(re(4),De("ngForOf",s.repartidores))},dependencies:[_t,ih]});let t=e;return t})();function fW(t,e){if(t&1&&(U(0,"div",6),Fe(1,"app-repartidor-detalle",7),L()),t&2){let n=Xe();re(),De("repartidor",n.selectedRepartidor)}}function pW(t,e){if(t&1&&(U(0,"div",8),Fe(1,"app-paisdetalle",9),L()),t&2){let n=Xe();re(),De("pais",n.selectedRepartidor==null?null:n.selectedRepartidor.pais)}}var fx=(()=>{let e=class e{constructor(r){this.firestore=r,this.repartidores=[],this.selectedRepartidor=null}ngOnInit(){this.fetchRepartidores()}fetchRepartidores(){let r=gp(this.firestore,"repartidores");be(yp(r)).pipe(Z(i=>i.docs.map(s=>s.data()))).subscribe({next:i=>{this.repartidores=i},error:i=>console.error("Error fetching repartidores: ",i)})}onSelectRepartidor(r){this.selectedRepartidor=r}};e.\u0275fac=function(i){return new(i||e)(j(Bt))},e.\u0275cmp=Ge({type:e,selectors:[["app-repartidor-main"]],standalone:!0,features:[We],decls:7,vars:2,consts:[[1,"container","mx-auto","p-4"],[1,"list","mb-8","p-4","bg-white","rounded","shadow"],[3,"repartidorSelected"],[1,"details","flex","space-x-8"],["class","detail-repartidor flex-1 p-4 bg-white rounded shadow",4,"ngIf"],["class","detail-pais flex-1 p-4 bg-white rounded shadow",4,"ngIf"],[1,"detail-repartidor","flex-1","p-4","bg-white","rounded","shadow"],[3,"repartidor"],[1,"detail-pais","flex-1","p-4","bg-white","rounded","shadow"],[3,"pais"]],template:function(i,s){i&1&&(Fe(0,"app-menu"),U(1,"div",0)(2,"div",1)(3,"app-listarepartidor",2),Pe("repartidorSelected",function(a){return s.onSelectRepartidor(a)}),L()(),U(4,"div",3),yt(5,fW,2,1,"div",4)(6,pW,2,1,"div",5),L()()),i&2&&(re(5),De("ngIf",s.selectedRepartidor),re(),De("ngIf",s.selectedRepartidor==null?null:s.selectedRepartidor.pais))},dependencies:[_t,dn,lA,hx,lx,dx,Ca],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;background-color:#f0f0f0}.list[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto}.details[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.details[_ngcontent-%COMP%]   .detail-repartidor[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   .detail-pais[_ngcontent-%COMP%]{flex:1;padding:2rem;background-color:#fff;border-radius:.5rem;box-shadow:0 2px 4px #0000001a}.details[_ngcontent-%COMP%]   .detail-pais[_ngcontent-%COMP%]{margin-left:1rem}"]});let t=e;return t})();var px=[{path:"",component:aE},{path:"login",component:aE},{path:"bienvenido",component:ax},{path:"altarepartidor",component:ux,canActivate:[cE]},{path:"listarepartidor",component:fx,canActivate:[cE]}];var mx="@firebase/database",gx="1.0.5";var oC="";function mW(t){oC=t}var gE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),lt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:jo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var yE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Qn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Kx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gE(e)}}catch{}return new yE},Fs=Kx("localStorage"),vE=Kx("sessionStorage");var Sa=new Yn("@firebase/database"),gW=function(){let t=1;return function(){return t++}}(),Qx=function(t){let e=TA(t),n=new Ph;n.update(e);let r=n.digest();return Oh.encodeByteArray(r)},rl=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=rl.apply(null,r):typeof r=="object"?e+=lt(r):e+=r,e+=" "}return e},Ls=null,yx=!0,yW=function(t,e){F(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Sa.logLevel=de.VERBOSE,Ls=Sa.log.bind(Sa),e&&vE.set("logging_enabled",!0)):typeof t=="function"?Ls=t:(Ls=null,vE.remove("logging_enabled"))},Mt=function(...t){if(yx===!0&&(yx=!1,Ls===null&&vE.get("logging_enabled")===!0&&yW(!0)),Ls){let e=rl.apply(null,t);Ls(e)}},il=function(t){return function(...e){Mt(t,...e)}},_E=function(...t){let e="FIREBASE INTERNAL ERROR: "+rl(...t);Sa.error(e)},Ur=function(...t){let e=`FIREBASE FATAL ERROR: ${rl(...t)}`;throw Sa.error(e),new Error(e)},sn=function(...t){let e="FIREBASE WARNING: "+rl(...t);Sa.warn(e)},vW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&sn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Yx=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},_W=function(t){if(Kn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ra="[MIN_NAME]",Vs="[MAX_NAME]",Fa=function(t,e){if(t===e)return 0;if(t===Ra||e===Vs)return-1;if(e===Ra||t===Vs)return 1;{let n=vx(t),r=vx(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},wW=function(t,e){return t===e?0:t<e?-1:1},zu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+lt(e))},aC=function(t){if(typeof t!="object"||t===null)return lt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=lt(e[r]),n+=":",n+=aC(t[e[r]]);return n+="}",n},Jx=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function gn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Xx=function(t){F(!Yx(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let h=l.join(""),p="";for(c=0;c<64;c+=8){let m=parseInt(h.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},IW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},EW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var CW=new RegExp("^-?(0*)\\d{1,10}$"),TW=-2147483648,bW=2147483647,vx=function(t){if(CW.test(t)){let e=Number(t);if(e>=TW&&e<=bW)return e}return null},sl=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw sn("Exception was thrown by user callback.",n),e},Math.floor(0))}},DW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yu=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var wE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){sn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var IE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sn(e)}},Ju=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),_p="5",Zx="v",eP="s",tP="r",nP="f",rP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iP="ls",sP="p",EE="ac",oP="websocket",aP="long_polling";var wp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function SW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cP(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let r;if(e===oP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===aP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);SW(t)&&(n.ns=t.namespace);let i=[];return gn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var CE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Qn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return fA(this.counters_)}};var uE={},lE={};function cC(t){let e=t.toString();return uE[e]||(uE[e]=new CE),uE[e]}function AW(t,e){let n=t.toString();return lE[n]||(lE[n]=e()),lE[n]}var TE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&sl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var _x="start",RW="close",NW="pLPCommand",MW="pRTLPCB",uP="id",lP="pw",dP="ser",xW="cb",PW="seg",OW="ts",kW="d",FW="dframe",hP=1870,fP=30,LW=hP-fP,VW=25e3,UW=3e4,bE=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=il(e),this.stats_=cC(n),this.urlFn=c=>(this.appCheckToken&&(c[EE]=this.appCheckToken),cP(n,aP,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new TE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(UW)),_W(()=>{if(this.isClosed_)return;this.scriptTagHolder=new DE((...s)=>{let[o,a,c,l,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===_x)this.id=a,this.password=c;else if(o===RW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[_x]="t",r[dP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[xW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Zx]=_p,this.transportSessionId&&(r[eP]=this.transportSessionId),this.lastSessionId&&(r[iP]=this.lastSessionId),this.applicationId&&(r[sP]=this.applicationId),this.appCheckToken&&(r[EE]=this.appCheckToken),typeof location<"u"&&location.hostname&&rP.test(location.hostname)&&(r[tP]=nP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Kn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!IW()&&!EW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Sv(n),i=Jx(r,LW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Kn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[FW]="t",r[uP]=e,r[lP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=lt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},DE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Kn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=gW(),window[NW+this.uniqueCallbackIdentifier]=e,window[MW+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Mt("frame writing exception"),a.stack&&Mt(a.stack),Mt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[uP]=this.myID,e[lP]=this.myPW,e[dP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fP+r.length<=hP;){let o=this.pendingSegs.shift();r=r+"&"+PW+i+"="+o.seg+"&"+OW+i+"="+o.ts+"&"+kW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(VW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Kn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var jW=16384,BW=45e3,Ip=null;typeof MozWebSocket<"u"?Ip=MozWebSocket:typeof WebSocket<"u"&&(Ip=WebSocket);var Gu=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=il(this.connId),this.stats_=cC(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Zx]=_p,!Kn()&&typeof location<"u"&&location.hostname&&rP.test(location.hostname)&&(a[tP]=nP),r&&(a[eP]=r),i&&(a[iP]=i),s&&(a[EE]=s),o&&(a[sP]=o),cP(n,oP,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fs.set("previous_websocket_failure",!0);try{let i;if(Kn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${_p}/${oC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ip(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Ip!==null&&!t.forceDisallow_}static previouslyFailed(){return Fs.isInMemoryStorage||Fs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Fs.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=jo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(F(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=lt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Jx(r,jW);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(BW))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),$W=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[bE,Gu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Gu&&Gu.isAvailable(),i=r&&!Gu.previouslyFailed();if(n.webSocketOnly&&(r||sn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Gu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),HW=6e4,qW=5e3,zW=10*1024,GW=100*1024,dE="t",wx="d",WW="s",Ix="r",KW="e",Ex="o",Cx="a",Tx="n",bx="p",QW="h",SE=class{constructor(e,n,r,i,s,o,a,c,l,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=il("c:"+this.id+":"),this.transportManager_=new $W(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>GW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>zW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(dE in e){let n=e[dE];n===Cx?this.upgradeIfSecondaryHealthy_():n===Ix?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ex&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=zu("t",e),r=zu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Cx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Tx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=zu("t",e),r=zu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=zu(dE,e);if(wx in e){let r=e[wx];if(n===QW){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Tx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===WW?this.onConnectionShutdown_(r):n===Ix?this.onReset_(r):n===KW?_E("Server Error: "+r):n===Ex?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_E("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_p!==r&&sn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Yu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(HW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bx,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ep=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Cp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Tp=class t extends Cp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Dx=32,Sx=768,Oe=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ne(){return new Oe("")}function we(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Di(t){return t.pieces_.length-t.pieceNum_}function Ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Oe(t.pieces_,e)}function pP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function YW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mP(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function gP(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Oe(e,0)}function ft(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Oe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Oe(n,0)}function ge(t){return t.pieceNum_>=t.pieces_.length}function pn(t,e){let n=we(t),r=we(e);if(n===null)return e;if(n===r)return pn(Ue(t),Ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yP(t,e){if(Di(t)!==Di(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function kn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Di(t)>Di(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var AE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=mP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=tu(this.parts_[r]);vP(this)}};function JW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=tu(e),vP(t)}function XW(t){let e=t.parts_.pop();t.byteLength_-=tu(e),t.parts_.length>0&&(t.byteLength_-=1)}function vP(t){if(t.byteLength_>Sx)throw new Error(t.errorPrefix_+"has a key path longer than "+Sx+" bytes ("+t.byteLength_+").");if(t.parts_.length>Dx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Dx+") or object contains a cycle "+ks(t))}function ks(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var RE=class t extends Cp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var Wu=1e3,ZW=60*5*1e3,Ax=30*1e3,e3=1.3,t3=3e4,n3="server_kill",Rx=3,uC=(()=>{class t extends Ep{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=il("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wu,this.maxReconnectDelay_=ZW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Kn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Tp.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(lt(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new ss,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,h=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(h,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Qn(n,"w")){let i=as(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();sn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||IA(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ax)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=wA(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+lt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):_E("Unrecognized action received from server: "+lt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Wu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>t3&&(this.reconnectDelay_=Wu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*e3)}this.onConnectStatus_(!1)}establishConnection_(){return I(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},h=function(m){F(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:l,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Mt("getToken() completed but was canceled"):(Mt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new SE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,D=>{sn(D+" ("+this.repoInfo_.toString()+")"),this.interrupt(n3)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&sn(m),l())}}})}interrupt(n){Mt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Mt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Zc(this.interruptReasons_)&&(this.reconnectDelay_=Wu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>aC(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Oe(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Mt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Rx&&(this.reconnectDelay_=Ax,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Mt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Rx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Kn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+oC.replace(/\./g,"-")]=1,Xc()?n["framework.cordova"]=1:Vh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Tp.getInstance().currentlyOnline();return Zc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ie=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Na=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Ie(Ra,e),i=new Ie(Ra,n);return this.compare(r,i)!==0}minPost(){return Ie.MIN}};var vp,bp=class extends Na{static get __EMPTY_NODE(){return vp}static set __EMPTY_NODE(e){vp=e}compare(e,n){return Fa(e.name,n.name)}isDefinedOn(e){throw os("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(Vs,vp)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,vp)}toString(){return".key"}},Aa=new bp;var ba=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},On=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??mn.EMPTY_NODE,this.right=o??mn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return mn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return mn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),NE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new On(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},mn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,On.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,On.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ba(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ba(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ba(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ba(this.root_,null,this.comparator_,!0,e)}};mn.EMPTY_NODE=new NE;function r3(t,e){return Fa(t.name,e.name)}function lC(t,e){return Fa(t,e)}var ME;function i3(t){ME=t}var _P=function(t){return typeof t=="number"?"number:"+Xx(t):"string:"+t},wP=function(t){if(t.isLeafNode()){let e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qn(e,".sv"),"Priority must be a string or number.")}else F(t===ME||t.isEmpty(),"priority of unexpected type.");F(t===ME||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Nx,Ma=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wP(this.priorityNode_)}static set __childrenNodeConstructor(n){Nx=n}static get __childrenNodeConstructor(){return Nx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ge(n)?this:we(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=we(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||Di(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ue(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+_P(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Xx(this.value_):n+=this.value_,this.lazyHash_=Qx(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(F(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+r),F(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),IP,EP;function s3(t){IP=t}function o3(t){EP=t}var xE=class extends Na{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Fa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(Vs,new Ma("[PRIORITY-POST]",EP))}makePost(e,n){let r=IP(e);return new Ie(n,new Ma("[PRIORITY-POST]",r))}toString(){return".priority"}},Pt=new xE;var a3=Math.log(2),PE=class{constructor(e){let n=s=>parseInt(Math.log(s)/a3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Dp=function(t,e,n,r){t.sort(e);let i=function(c,l){let h=l-c,p,m;if(h===0)return null;if(h===1)return p=t[c],m=n?n(p):p,new On(m,p.node,On.BLACK,null,null);{let v=parseInt(h/2,10)+c,D=i(c,v),N=i(v+1,l);return p=t[v],m=n?n(p):p,new On(m,p.node,On.BLACK,D,N)}},s=function(c){let l=null,h=null,p=t.length,m=function(D,N){let R=p-D,x=p;p-=D;let q=i(R+1,x),z=t[R],K=n?n(z):z;v(new On(K,z.node,N,null,q))},v=function(D){l?(l.left=D,l=D):(h=D,l=D)};for(let D=0;D<c.count;++D){let N=c.nextBitIsOne(),R=Math.pow(2,c.count-(D+1));N?m(R,On.BLACK):(m(R,On.BLACK),m(R,On.RED))}return h},o=new PE(t.length),a=s(o);return new mn(r||e,a)};var hE,Ta={},xa=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return F(Ta&&Pt,"ChildrenNode.ts has not been loaded"),hE=hE||new t({".priority":Ta},{".priority":Pt}),hE}get(e){let n=as(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof mn?n:null}hasIndex(e){return Qn(this.indexSet_,e.toString())}addIndex(e,n){F(e!==Aa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Ie.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Dp(r,e.getCompare()):a=Ta;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let h=Object.assign({},this.indexes_);return h[c]=a,new t(h,l)}addToIndexes(e,n){let r=eu(this.indexes_,(i,s)=>{let o=as(this.indexSet_,s);if(F(o,"Missing index implementation for "+s),i===Ta)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Ie.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Dp(a,o.getCompare())}else return Ta;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Ie(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=eu(this.indexes_,i=>{if(i===Ta)return i;{let s=n.get(e.name);return s?i.remove(new Ie(e.name,s)):i}});return new t(r,this.indexSet_)}};var Ku,He=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wP(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ku||(Ku=new t(new mn(lC),null,xa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ku}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ku:r}}getChild(n){let r=we(n);return r===null?this:this.getImmediateChild(r).getChild(Ue(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(F(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Ie(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Ku:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=we(n);if(i===null)return r;{F(we(n)!==".priority"||Di(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ue(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Pt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+_P(this.getPriority().val())+":"),this.forEachChild(Pt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Qx(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Ie(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Ie(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Ie(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ol?-1:0}withIndex(n){if(n===Aa||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Aa||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Pt),s=r.getIterator(Pt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Aa?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),OE=class extends He{constructor(){super(new mn(lC),He.EMPTY_NODE,xa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return He.EMPTY_NODE}isEmpty(){return!1}},ol=new OE;Object.defineProperties(Ie,{MIN:{value:new Ie(Ra,He.EMPTY_NODE)},MAX:{value:new Ie(Vs,ol)}});bp.__EMPTY_NODE=He.EMPTY_NODE;Ma.__childrenNodeConstructor=He;i3(ol);o3(ol);var c3=!0;function xt(t,e=null){if(t===null)return He.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ma(n,xt(e))}if(!(t instanceof Array)&&c3){let n=[],r=!1;if(gn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=xt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ie(o,c)))}}),n.length===0)return He.EMPTY_NODE;let s=Dp(n,r3,o=>o.name,lC);if(r){let o=Dp(n,Pt.getCompare());return new He(s,xt(e),new xa({".priority":o},{".priority":Pt}))}else return new He(s,xt(e),xa.Default)}else{let n=He.EMPTY_NODE;return gn(t,(r,i)=>{if(Qn(t,r)&&r.substring(0,1)!=="."){let s=xt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(xt(e))}}s3(xt);var kE=class extends Na{constructor(e){super(),this.indexPath_=e,F(!ge(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Fa(e.name,n.name):s}makePost(e,n){let r=xt(e),i=He.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ie(n,i)}maxPost(){let e=He.EMPTY_NODE.updateChild(this.indexPath_,ol);return new Ie(Vs,e)}toString(){return mP(this.indexPath_,0).join("/")}};var FE=class extends Na{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Fa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){let r=xt(e);return new Ie(n,r)}toString(){return".value"}},u3=new FE;function l3(t){return{type:"value",snapshotNode:t}}function d3(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function h3(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Mx(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function f3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var LE=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ra}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function xx(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Pt?n="$priority":t.index_===u3?n="$value":t.index_===Aa?n="$key":(F(t.index_ instanceof kE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=lt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=lt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+lt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=lt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+lt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Px(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Pt&&(e.i=t.index_.toString()),e}var VE=class t extends Ep{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=il("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=xx(e._queryParams);this.restRequest_(s+".json",c,(l,h)=>{let p=h;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(s,p,!1,r),as(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=xx(e._queryParams),r=e._path.toString(),i=new ss;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+us(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=jo(a.responseText)}catch{sn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&sn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var UE=class{constructor(){this.rootNode_=He.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Sp(){return{value:null,children:new Map}}function CP(t,e,n){if(ge(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=we(e);t.children.has(r)||t.children.set(r,Sp());let i=t.children.get(r);e=Ue(e),CP(i,e,n)}}function jE(t,e,n){t.value!==null?n(e,t.value):p3(t,(r,i)=>{let s=new Oe(e.toString()+"/"+r);jE(i,s,n)})}function p3(t,e){t.children.forEach((n,r)=>{e(r,n)})}var BE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Ox=10*1e3,m3=30*1e3,g3=5*60*1e3,$E=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new BE(e);let r=Ox+(m3-Ox)*Math.random();Yu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;gn(e,(i,s)=>{s>0&&Qn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Yu(this.reportStats_.bind(this),Math.floor(Math.random()*2*g3))}};var Vr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Vr||{});function TP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function DP(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var HE=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vr.ACK_USER_WRITE,this.source=TP()}operationForChild(e){if(ge(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Oe(e));return new t(Ne(),n,this.revert)}}else return F(we(this.path)===e,"operationForChild called for unrelated child."),new t(Ue(this.path),this.affectedTree,this.revert)}};var Pa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vr.OVERWRITE}operationForChild(e){return ge(this.path)?new t(this.source,Ne(),this.snap.getImmediateChild(e)):new t(this.source,Ue(this.path),this.snap)}};var Ap=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vr.MERGE}operationForChild(e){if(ge(this.path)){let n=this.children.subtree(new Oe(e));return n.isEmpty()?null:n.value?new Pa(this.source,Ne(),n.value):new t(this.source,Ne(),n)}else return F(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var el=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ge(e))return this.isFullyInitialized()&&!this.filtered_;let n=we(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function y3(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(f3(o.childName,o.snapshotNode))}),Qu(t,i,"child_removed",e,r,n),Qu(t,i,"child_added",e,r,n),Qu(t,i,"child_moved",s,r,n),Qu(t,i,"child_changed",e,r,n),Qu(t,i,"value",e,r,n),i}function Qu(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>_3(t,a,c)),o.forEach(a=>{let c=v3(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function v3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function _3(t,e,n){if(e.childName==null||n.childName==null)throw os("Should only compare child_ events.");let r=new Ie(e.childName,e.snapshotNode),i=new Ie(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function SP(t,e){return{eventCache:t,serverCache:e}}function Xu(t,e,n,r){return SP(new el(e,n,r),t.serverCache)}function AP(t,e,n,r){return SP(t.eventCache,new el(e,n,r))}function qE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Us(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var fE,w3=()=>(fE||(fE=new mn(wW)),fE),Kt=class t{constructor(e,n=w3()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return gn(e,(r,i)=>{n=n.set(new Oe(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ne(),value:this.value};if(ge(e))return null;{let r=we(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ue(e),n);return s!=null?{path:ft(new Oe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ge(e))return this;{let n=we(e),r=this.children.get(n);return r!==null?r.subtree(Ue(e)):new t(null)}}set(e,n){if(ge(e))return new t(n,this.children);{let r=we(e),s=(this.children.get(r)||new t(null)).set(Ue(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ge(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=we(e),r=this.children.get(n);if(r){let i=r.remove(Ue(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ge(e))return this.value;{let n=we(e),r=this.children.get(n);return r?r.get(Ue(e)):null}}setTree(e,n){if(ge(e))return n;{let r=we(e),s=(this.children.get(r)||new t(null)).setTree(Ue(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Ne(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ft(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ne(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ge(e))return null;{let s=we(e),o=this.children.get(s);return o?o.findOnPath_(Ue(e),ft(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ne(),n)}foreachOnPath_(e,n,r){if(ge(e))return this;{this.value&&r(n,this.value);let i=we(e),s=this.children.get(i);return s?s.foreachOnPath_(Ue(e),ft(n,i),r):new t(null)}}foreach(e){this.foreach_(Ne(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ft(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Fn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Kt(null))}};function Zu(t,e,n){if(ge(e))return new Fn(new Kt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=pn(i,e);return s=s.updateChild(o,n),new Fn(t.writeTree_.set(i,s))}else{let i=new Kt(n),s=t.writeTree_.setTree(e,i);return new Fn(s)}}}function kx(t,e,n){let r=t;return gn(n,(i,s)=>{r=Zu(r,ft(e,i),s)}),r}function Fx(t,e){if(ge(e))return Fn.empty();{let n=t.writeTree_.setTree(e,new Kt(null));return new Fn(n)}}function zE(t,e){return js(t,e)!=null}function js(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(pn(n.path,e)):null}function Lx(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Pt,(r,i)=>{e.push(new Ie(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ie(r,i.value))}),e}function bi(t,e){if(ge(e))return t;{let n=js(t,e);return n!=null?new Fn(new Kt(n)):new Fn(t.writeTree_.subtree(e))}}function GE(t){return t.writeTree_.isEmpty()}function Oa(t,e){return RP(Ne(),t.writeTree_,e)}function RP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(F(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=RP(ft(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ft(t,".priority"),r)),n}}function NP(t,e){return kP(e,t)}function I3(t,e,n,r,i){F(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zu(t.visibleWrites,e,n)),t.lastWriteId=r}function E3(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function C3(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&T3(a,r.path)?i=!1:kn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return b3(t),!0;if(r.snap)t.visibleWrites=Fx(t.visibleWrites,r.path);else{let a=r.children;gn(a,c=>{t.visibleWrites=Fx(t.visibleWrites,ft(r.path,c))})}return!0}else return!1}function T3(t,e){if(t.snap)return kn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&kn(ft(t.path,n),e))return!0;return!1}function b3(t){t.visibleWrites=MP(t.allWrites,D3,Ne()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function D3(t){return t.visible}function MP(t,e,n){let r=Fn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)kn(n,o)?(a=pn(n,o),r=Zu(r,a,s.snap)):kn(o,n)&&(a=pn(o,n),r=Zu(r,Ne(),s.snap.getChild(a)));else if(s.children){if(kn(n,o))a=pn(n,o),r=kx(r,a,s.children);else if(kn(o,n))if(a=pn(o,n),ge(a))r=kx(r,Ne(),s.children);else{let c=as(s.children,we(a));if(c){let l=c.getChild(Ue(a));r=Zu(r,Ne(),l)}}}else throw os("WriteRecord should have .snap or .children")}}return r}function xP(t,e,n,r,i){if(!r&&!i){let s=js(t.visibleWrites,e);if(s!=null)return s;{let o=bi(t.visibleWrites,e);if(GE(o))return n;if(n==null&&!zE(o,Ne()))return null;{let a=n||He.EMPTY_NODE;return Oa(o,a)}}}else{let s=bi(t.visibleWrites,e);if(!i&&GE(s))return n;if(!i&&n==null&&!zE(s,Ne()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(kn(l.path,e)||kn(e,l.path))},a=MP(t.allWrites,o,e),c=n||He.EMPTY_NODE;return Oa(a,c)}}}function S3(t,e,n){let r=He.EMPTY_NODE,i=js(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=bi(t.visibleWrites,e);return n.forEachChild(Pt,(o,a)=>{let c=Oa(bi(s,new Oe(o)),a);r=r.updateImmediateChild(o,c)}),Lx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=bi(t.visibleWrites,e);return Lx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function A3(t,e,n,r,i){F(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ft(e,n);if(zE(t.visibleWrites,s))return null;{let o=bi(t.visibleWrites,s);return GE(o)?i.getChild(n):Oa(o,i.getChild(n))}}function R3(t,e,n,r){let i=ft(e,n),s=js(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=bi(t.visibleWrites,i);return Oa(o,r.getNode().getImmediateChild(n))}else return null}function N3(t,e){return js(t.visibleWrites,e)}function M3(t,e,n,r,i,s,o){let a,c=bi(t.visibleWrites,e),l=js(c,Ne());if(l!=null)a=l;else if(n!=null)a=Oa(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),v=m.getNext();for(;v&&h.length<i;)p(v,r)!==0&&h.push(v),v=m.getNext();return h}else return[]}function x3(){return{visibleWrites:Fn.empty(),allWrites:[],lastWriteId:-1}}function WE(t,e,n,r){return xP(t.writeTree,t.treePath,e,n,r)}function PP(t,e){return S3(t.writeTree,t.treePath,e)}function Vx(t,e,n,r){return A3(t.writeTree,t.treePath,e,n,r)}function Rp(t,e){return N3(t.writeTree,ft(t.treePath,e))}function P3(t,e,n,r,i,s){return M3(t.writeTree,t.treePath,e,n,r,i,s)}function dC(t,e,n){return R3(t.writeTree,t.treePath,e,n)}function OP(t,e){return kP(ft(t.treePath,e),t.writeTree)}function kP(t,e){return{treePath:t,writeTree:e}}var KE=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Mx(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,h3(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,d3(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Mx(r,e.snapshotNode,i.oldSnap));else throw os("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var QE=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},FP=new QE,tl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new el(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Us(this.viewCache_),s=P3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function O3(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function k3(t,e,n,r,i){let s=new KE,o,a;if(n.type===Vr.OVERWRITE){let l=n;l.source.fromUser?o=YE(t,e,l.path,l.snap,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ge(l.path),o=Np(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Vr.MERGE){let l=n;l.source.fromUser?o=L3(t,e,l.path,l.children,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=JE(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Vr.ACK_USER_WRITE){let l=n;l.revert?o=j3(t,e,l.path,r,i,s):o=V3(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Vr.LISTEN_COMPLETE)o=U3(t,e,n.path,r,s);else throw os("Unknown operation type: "+n.type);let c=s.getChanges();return F3(e,o,c),{viewCache:o,changes:c}}function F3(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=qE(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(l3(qE(e)))}}function LP(t,e,n,r,i,s){let o=e.eventCache;if(Rp(r,n)!=null)return e;{let a,c;if(ge(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Us(e),h=l instanceof He?l:He.EMPTY_NODE,p=PP(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let l=WE(r,Us(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=we(n);if(l===".priority"){F(Di(n)===1,"Can't have a priority with additional path components");let h=o.getNode();c=e.serverCache.getNode();let p=Vx(r,n,h,c);p!=null?a=t.filter.updatePriority(h,p):a=o.getNode()}else{let h=Ue(n),p;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let m=Vx(r,n,o.getNode(),c);m!=null?p=o.getNode().getImmediateChild(l).updateChild(h,m):p=o.getNode().getImmediateChild(l)}else p=dC(r,l,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),l,p,h,i,s):a=o.getNode()}}return Xu(e,a,o.isFullyInitialized()||ge(n),t.filter.filtersNodes())}}function Np(t,e,n,r,i,s,o,a){let c=e.serverCache,l,h=o?t.filter:t.filter.getIndexedFilter();if(ge(n))l=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(n,r);l=h.updateFullNode(c.getNode(),v,null)}else{let v=we(n);if(!c.isCompleteForPath(n)&&Di(n)>1)return e;let D=Ue(n),R=c.getNode().getImmediateChild(v).updateChild(D,r);v===".priority"?l=h.updatePriority(c.getNode(),R):l=h.updateChild(c.getNode(),v,R,D,FP,null)}let p=AP(e,l,c.isFullyInitialized()||ge(n),h.filtersNodes()),m=new tl(i,p,s);return LP(t,p,n,i,m,a)}function YE(t,e,n,r,i,s,o){let a=e.eventCache,c,l,h=new tl(i,e,s);if(ge(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Xu(e,l,!0,t.filter.filtersNodes());else{let p=we(n);if(p===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Xu(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=Ue(n),v=a.getNode().getImmediateChild(p),D;if(ge(m))D=r;else{let N=h.getCompleteChild(p);N!=null?pP(m)===".priority"&&N.getChild(gP(m)).isEmpty()?D=N:D=N.updateChild(m,r):D=He.EMPTY_NODE}if(v.equals(D))c=e;else{let N=t.filter.updateChild(a.getNode(),p,D,m,h,o);c=Xu(e,N,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Ux(t,e){return t.eventCache.isCompleteForChild(e)}function L3(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let h=ft(n,c);Ux(e,we(h))&&(a=YE(t,a,h,l,i,s,o))}),r.foreach((c,l)=>{let h=ft(n,c);Ux(e,we(h))||(a=YE(t,a,h,l,i,s,o))}),a}function jx(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function JE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ge(n)?l=r:l=new Kt(null).setTree(n,r);let h=e.serverCache.getNode();return l.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){let v=e.serverCache.getNode().getImmediateChild(p),D=jx(t,v,m);c=Np(t,c,new Oe(p),D,i,s,o,a)}}),l.children.inorderTraversal((p,m)=>{let v=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!h.hasChild(p)&&!v){let D=e.serverCache.getNode().getImmediateChild(p),N=jx(t,D,m);c=Np(t,c,new Oe(p),N,i,s,o,a)}}),c}function V3(t,e,n,r,i,s,o){if(Rp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ge(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Np(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ge(n)){let l=new Kt(null);return c.getNode().forEachChild(Aa,(h,p)=>{l=l.set(new Oe(h),p)}),JE(t,e,n,l,i,s,a,o)}else return e}else{let l=new Kt(null);return r.foreach((h,p)=>{let m=ft(n,h);c.isCompleteForPath(m)&&(l=l.set(h,c.getNode().getChild(m)))}),JE(t,e,n,l,i,s,a,o)}}function U3(t,e,n,r,i){let s=e.serverCache,o=AP(e,s.getNode(),s.isFullyInitialized()||ge(n),s.isFiltered());return LP(t,o,n,r,FP,i)}function j3(t,e,n,r,i,s){let o;if(Rp(r,n)!=null)return e;{let a=new tl(r,e,i),c=e.eventCache.getNode(),l;if(ge(n)||we(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=WE(r,Us(e));else{let p=e.serverCache.getNode();F(p instanceof He,"serverChildren would be complete if leaf node"),h=PP(r,p)}h=h,l=t.filter.updateFullNode(c,h,s)}else{let h=we(n),p=dC(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=c.getImmediateChild(h)),p!=null?l=t.filter.updateChild(c,h,p,Ue(n),a,s):e.eventCache.getNode().hasChild(h)?l=t.filter.updateChild(c,h,He.EMPTY_NODE,Ue(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=WE(r,Us(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Rp(r,Ne())!=null,Xu(e,l,o,t.filter.filtersNodes())}}function B3(t,e){let n=Us(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ge(e)&&!n.getImmediateChild(we(e)).isEmpty())?n.getChild(e):null}function Bx(t,e,n,r){e.type===Vr.MERGE&&e.source.queryId!==null&&(F(Us(t.viewCache_),"We should always have a full cache before handling merges"),F(qE(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=k3(t.processor_,i,e,n,r);return O3(t.processor_,s.viewCache),F(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,$3(t,s.changes,s.viewCache.eventCache.getNode(),null)}function $3(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return y3(t.eventGenerator_,e,n,i)}var $x;function H3(t){F(!$x,"__referenceConstructor has already been defined"),$x=t}function hC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return F(s!=null,"SyncTree gave us an op for an invalid query."),Bx(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Bx(o,e,n,r));return s}}function fC(t,e){let n=null;for(let r of t.views.values())n=n||B3(r,e);return n}var Hx;function q3(t){F(!Hx,"__referenceConstructor has already been defined"),Hx=t}var Mp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kt(null),this.pendingWriteTree_=x3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function z3(t,e,n,r,i){return I3(t.pendingWriteTree_,e,n,r,i),i?Pp(t,new Pa(TP(),e,n)):[]}function Da(t,e,n=!1){let r=E3(t.pendingWriteTree_,e);if(C3(t.pendingWriteTree_,e)){let s=new Kt(null);return r.snap!=null?s=s.set(Ne(),!0):gn(r.children,o=>{s=s.set(new Oe(o),!0)}),Pp(t,new HE(r.path,s,n))}else return[]}function xp(t,e,n){return Pp(t,new Pa(bP(),e,n))}function G3(t,e,n){let r=Kt.fromObject(n);return Pp(t,new Ap(bP(),e,r))}function W3(t,e,n,r){let i=BP(t,r);if(i!=null){let s=$P(i),o=s.path,a=s.queryId,c=pn(o,e),l=new Pa(DP(a),c,n);return HP(t,o,l)}else return[]}function K3(t,e,n,r){let i=BP(t,r);if(i){let s=$P(i),o=s.path,a=s.queryId,c=pn(o,e),l=Kt.fromObject(n),h=new Ap(DP(a),c,l);return HP(t,o,h)}else return[]}function VP(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=pn(o,e),l=fC(a,c);if(l)return l});return xP(i,e,s,n,!0)}function Pp(t,e){return UP(e,t.syncPointTree_,null,NP(t.pendingWriteTree_,Ne()))}function UP(t,e,n,r){if(ge(t.path))return jP(t,e,n,r);{let i=e.get(Ne());n==null&&i!=null&&(n=fC(i,Ne()));let s=[],o=we(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,h=OP(r,o);s=s.concat(UP(a,c,l,h))}return i&&(s=s.concat(hC(i,t,r,n))),s}}function jP(t,e,n,r){let i=e.get(Ne());n==null&&i!=null&&(n=fC(i,Ne()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=OP(r,o),h=t.operationForChild(o);h&&(s=s.concat(jP(h,a,c,l)))}),i&&(s=s.concat(hC(i,t,r,n))),s}function BP(t,e){return t.tagToQueryMap.get(e)}function $P(t){let e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Oe(t.substr(0,e))}}function HP(t,e,n){let r=t.syncPointTree_.get(e);F(r,"Missing sync point for query tag that we're tracking");let i=NP(t.pendingWriteTree_,e);return hC(r,n,i,null)}var XE=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},ZE=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ft(this.path_,e);return new t(this.syncTree_,n)}node(){return VP(this.syncTree_,this.path_)}},Q3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},qx=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Y3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return J3(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Y3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},J3=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&F(!1,"Unexpected increment value: "+r);let i=e.node();if(F(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},X3=function(t,e,n,r){return pC(e,new ZE(n,t),r)},Z3=function(t,e,n){return pC(t,new XE(e),n)};function pC(t,e,n){let r=t.getPriority().val(),i=qx(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=qx(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ma(a,xt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ma(i))),o.forEachChild(Pt,(a,c)=>{let l=pC(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var nl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function mC(t,e){let n=e instanceof Oe?e:new Oe(e),r=t,i=we(n);for(;i!==null;){let s=as(r.node.children,i)||{children:{},childCount:0};r=new nl(i,r,s),n=Ue(n),i=we(n)}return r}function La(t){return t.node.value}function qP(t,e){t.node.value=e,eC(t)}function zP(t){return t.node.childCount>0}function e9(t){return La(t)===void 0&&!zP(t)}function Op(t,e){gn(t.node.children,(n,r)=>{e(new nl(n,t,r))})}function GP(t,e,n,r){n&&!r&&e(t),Op(t,i=>{GP(i,e,!0,r)}),n&&r&&e(t)}function t9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function al(t){return new Oe(t.parent===null?t.name:al(t.parent)+"/"+t.name)}function eC(t){t.parent!==null&&n9(t.parent,t.name,t)}function n9(t,e,n){let r=e9(n),i=Qn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,eC(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,eC(t))}var r9=/[\[\].#$\/\u0000-\u001F\u007F]/,i9=/[\[\].#$\u0000-\u001F\u007F]/,pE=10*1024*1024,WP=function(t){return typeof t=="string"&&t.length!==0&&!r9.test(t)},s9=function(t){return typeof t=="string"&&t.length!==0&&!i9.test(t)},o9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),s9(t)};var KP=function(t,e,n){let r=n instanceof Oe?new AE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ks(r));if(typeof e=="function")throw new Error(t+"contains a function "+ks(r)+" with contents = "+e.toString());if(Yx(e))throw new Error(t+"contains "+e.toString()+" "+ks(r));if(typeof e=="string"&&e.length>pE/3&&tu(e)>pE)throw new Error(t+"contains a string greater than "+pE+" utf8 bytes "+ks(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(gn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!WP(o)))throw new Error(t+" contains an invalid key ("+o+") "+ks(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);JW(r,o),KP(t,a,r),XW(r)}),i&&s)throw new Error(t+' contains ".value" child '+ks(r)+" in addition to actual children.")}};var a9=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!WP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!o9(n))throw new Error(CA(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var tC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function c9(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!yP(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Bs(t,e,n){c9(t,n),u9(t,r=>kn(r,e)||kn(e,r))}function u9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(l9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function l9(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Ls&&Mt("event: "+n.toString()),sl(r)}}}var d9="repo_interrupt",h9=25,nC=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sp(),this.transactionQueueTree_=new nl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function f9(t,e,n){if(t.stats_=cC(t.repoInfo_),t.forceRestClient_||DW())t.server_=new VE(t.repoInfo_,(r,i,s,o)=>{zx(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Gx(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{lt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new uC(t.repoInfo_,e,(r,i,s,o)=>{zx(t,r,i,s,o)},r=>{Gx(t,r)},r=>{m9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=AW(t.repoInfo_,()=>new $E(t.stats_,t.server_)),t.infoData_=new UE,t.infoSyncTree_=new Mp({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=xp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),gC(t,"connected",!1),t.serverSyncTree_=new Mp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Bs(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function p9(t){let n=t.infoData_.getNode(new Oe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function QP(t){return Q3({timestamp:p9(t)})}function zx(t,e,n,r,i){t.dataUpdateCount++;let s=new Oe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=eu(n,l=>xt(l));o=K3(t.serverSyncTree_,s,c,i)}else{let c=xt(n);o=W3(t.serverSyncTree_,s,c,i)}else if(r){let c=eu(n,l=>xt(l));o=G3(t.serverSyncTree_,s,c)}else{let c=xt(n);o=xp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=vC(t,s)),Bs(t.eventQueue_,a,o)}function Gx(t,e){gC(t,"connected",e),e===!1&&y9(t)}function m9(t,e){gn(e,(n,r)=>{gC(t,n,r)})}function gC(t,e,n){let r=new Oe("/.info/"+e),i=xt(n);t.infoData_.updateSnapshot(r,i);let s=xp(t.infoSyncTree_,r,i);Bs(t.eventQueue_,r,s)}function g9(t){return t.nextWriteId_++}function y9(t){YP(t,"onDisconnectEvents");let e=QP(t),n=Sp();jE(t.onDisconnect_,Ne(),(i,s)=>{let o=X3(i,s,t.serverSyncTree_,e);CP(n,i,o)});let r=[];jE(n,Ne(),(i,s)=>{r=r.concat(xp(t.serverSyncTree_,i,s));let o=I9(t,i);vC(t,o)}),t.onDisconnect_=Sp(),Bs(t.eventQueue_,Ne(),r)}function v9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(d9)}function YP(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Mt(n,...e)}function JP(t,e,n){return VP(t.serverSyncTree_,e,n)||He.EMPTY_NODE}function yC(t,e=t.transactionQueueTree_){if(e||kp(t,e),La(e)){let n=ZP(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&_9(t,al(e),n)}else zP(e)&&Op(e,n=>{yC(t,n)})}function _9(t,e,n){let r=n.map(l=>l.currentWriteId),i=JP(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let h=n[l];F(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=pn(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{YP(t,"transaction put response",{path:c.toString(),status:l});let h=[];if(l==="ok"){let p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(Da(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();kp(t,mC(t.transactionQueueTree_,e)),yC(t,t.transactionQueueTree_),Bs(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)sl(p[m])}else{if(l==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{sn("transaction at "+c.toString()+" failed: "+l);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=l}vC(t,e)}},o)}function vC(t,e){let n=XP(t,e),r=al(n),i=ZP(t,n);return w9(t,i,r),r}function w9(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=pn(n,c.path),h=!1,p;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,p=c.abortReason,i=i.concat(Da(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=h9)h=!0,p="maxretry",i=i.concat(Da(t.serverSyncTree_,c.currentWriteId,!0));else{let m=JP(t,c.path,o);c.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){KP("transaction failed: Data returned ",v,c.path);let D=xt(v);typeof v=="object"&&v!=null&&Qn(v,".priority")||(D=D.updatePriority(m.getPriority()));let R=c.currentWriteId,x=QP(t),q=Z3(D,m,x);c.currentOutputSnapshotRaw=D,c.currentOutputSnapshotResolved=q,c.currentWriteId=g9(t),o.splice(o.indexOf(R),1),i=i.concat(z3(t.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(Da(t.serverSyncTree_,R,!0))}else h=!0,p="nodata",i=i.concat(Da(t.serverSyncTree_,c.currentWriteId,!0))}Bs(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}kp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)sl(r[a]);yC(t,t.transactionQueueTree_)}function XP(t,e){let n,r=t.transactionQueueTree_;for(n=we(e);n!==null&&La(r)===void 0;)r=mC(r,n),e=Ue(e),n=we(e);return r}function ZP(t,e){let n=[];return eO(t,e,n),n.sort((r,i)=>r.order-i.order),n}function eO(t,e,n){let r=La(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Op(e,i=>{eO(t,i,n)})}function kp(t,e){let n=La(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,qP(e,n.length>0?n:void 0)}Op(e,r=>{kp(t,r)})}function I9(t,e){let n=al(XP(t,e)),r=mC(t.transactionQueueTree_,e);return t9(r,i=>{mE(t,i)}),mE(t,r),GP(r,i=>{mE(t,i)}),n}function mE(t,e){let n=La(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(F(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(F(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Da(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?qP(e,void 0):n.length=s+1,Bs(t.eventQueue_,al(e),i);for(let o=0;o<r.length;o++)sl(r[o])}}function E9(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function C9(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):sn(`Invalid query segment '${n}' in query '${t}'`)}return e}var Wx=function(t,e){let n=T9(t),r=n.namespace;n.domain==="firebase.com"&&Ur(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ur("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||vW();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new wp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Oe(n.pathString)}},T9=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=E9(t.substring(h,p)));let m=C9(t.substring(Math.min(t.length,p)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let v=e.slice(0,l);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{let D=e.indexOf(".");r=e.substring(0,D).toLowerCase(),n=e.substring(D+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var rC=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ge(this._path)?null:pP(this._path)}get ref(){return new ka(this._repo,this._path)}get _queryIdentifier(){let e=Px(this._queryParams),n=aC(e);return n==="{}"?"default":n}get _queryObject(){return Px(this._queryParams)}isEqual(e){if(e=dt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=yP(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+YW(this._path)}};var ka=class t extends rC{constructor(e,n){super(e,n,new LE,!1)}get parent(){let e=gP(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};H3(ka);q3(ka);var b9="FIREBASE_DATABASE_EMULATOR_HOST",iC={},D9=!1;function S9(t,e,n,r){t.repoInfo_=new wp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function A9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ur("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Wx(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[b9]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=Wx(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let h=i&&c?new Ju(Ju.OWNER):new IE(t.name,t.options,e);a9("Invalid Firebase Database URL",o),ge(o.path)||Ur("Database URL must point to the root of a Firebase Database (not including a child path).");let p=N9(a,t,h,new wE(t.name,n));return new sC(p,t)}function R9(t,e){let n=iC[e];(!n||n[t.key]!==t)&&Ur(`Database ${e}(${t.repoInfo_}) has already been deleted.`),v9(t),delete n[t.key]}function N9(t,e,n,r){let i=iC[e.name];i||(i={},iC[e.name]=i);let s=i[t.toURLString()];return s&&Ur("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new nC(t,D9,n,r),i[t.toURLString()]=s,s}var sC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(f9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ka(this._repo,Ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(R9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ur("Cannot call "+e+" on a deleted database.")}};function tO(t=hi(),e){let n=hs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Fh("database");r&&nO(n,...r)}return n}function nO(t,e,n,r={}){t=dt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ur("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ur('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ju(Ju.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Lh(r.mockUserToken,t.app.options.projectId);s=new Ju(o)}S9(i,e,n,s)}function M9(t){mW(er),Xn(new Wt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return A9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Be(mx,gx,t),Be(mx,gx,"esm2017")}uC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};uC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};M9();var cl=class{constructor(e){return e}},rO="database",_C=class{constructor(){return ps(rO)}};var wC=new $("angularfire2.database-instances");function x9(t,e){let n=qo(rO,t,e);return n&&new cl(n)}function P9(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new cl(r)}}var O9={provide:_C,deps:[[new Je,wC]]},k9={provide:cl,useFactory:x9,deps:[[new Je,wC],Nn]};function iO(t,...e){return Be("angularfire",Sr.full,"rtdb"),zt([k9,O9,{provide:wC,useFactory:P9(t),multi:!0,deps:[ve,gt,pi,Ar,[new Je,_s],[new Je,fi],...e]}])}var sO=Rn(tO,!0);var oO={providers:[sA(px),Kv(()=>Qv({projectId:"parcial-rotelagustavo",appId:"1:732777896176:web:c43b2f223e7a4d257e4a35",storageBucket:"parcial-rotelagustavo.appspot.com",apiKey:"AIzaSyDlUjJ-AADdj8611ipikn4UXf5mV0zJ6Co",authDomain:"parcial-rotelagustavo.firebaseapp.com",messagingSenderId:"732777896176"})),x_(()=>P_()),sx(()=>ox()),iO(()=>sO()),Kv(()=>Qv({projectId:"parcial-rotelagustavo",appId:"1:732777896176:web:c43b2f223e7a4d257e4a35",storageBucket:"parcial-rotelagustavo.appspot.com",apiKey:"AIzaSyDlUjJ-AADdj8611ipikn4UXf5mV0zJ6Co",authDomain:"parcial-rotelagustavo.firebaseapp.com",messagingSenderId:"732777896176"})),x_(()=>P_())]};var aO=(()=>{let e=class e{constructor(r){this.firestore=r,this.title="parcial"}};e.\u0275fac=function(i){return new(i||e)(j(Bt))},e.\u0275cmp=Ge({type:e,selectors:[["app-root"]],standalone:!0,features:[We],decls:1,vars:0,template:function(i,s){i&1&&Fe(0,"router-outlet")},dependencies:[gv]});let t=e;return t})();yS(aO,oO).catch(t=>console.error(t));
